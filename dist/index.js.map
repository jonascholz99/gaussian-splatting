{"version":3,"file":"index.js","sources":["../src/math/Vector3.ts","../src/math/Quaternion.ts","../src/events/EventDispatcher.ts","../src/math/Matrix4.ts","../src/events/Events.ts","../src/core/Object3D.ts","../src/math/Matrix3.ts","../src/splats/SplatData.ts","../src/splats/SplatvData.ts","../src/utils/Converter.ts","../src/renderers/webgl/programs/ShaderProgram.ts","../src/renderers/webgl/programs/individual/CubeVisualisationProgram.ts","../src/math/Vector4.ts","../src/math/Box3.ts","../src/splats/SingleSplat.ts","../src/utils/Constants.ts","../src/Octree/core/OctreeIterator.ts","../src/math/NewRay.ts","../src/Octree/core/intersectOctree.ts","../src/Octree/core/OctreeRaycaster.ts","../src/Octree/core/RaycastingFlags.ts","../src/Octree/Octree.ts","../src/Octree/core/layout.ts","../src/Octree/core/Octant.ts","../src/Octree/points/PointContainer.ts","../src/Octree/points/RayPointIntersection.ts","../src/Octree/points/PointData.ts","../src/Octree/points/PointOctant.ts","../src/Octree/points/PointOctree.ts","../src/splats/Splat.ts","../src/splats/Splatv.ts","../src/cameras/CameraData.ts","../src/cameras/Camera.ts","../src/core/Scene.ts","../src/utils/LoaderUtils.ts","../src/loaders/Loader.ts","../src/loaders/PLYLoader.ts","../src/loaders/SplatvLoader.ts","../src/wasm/data.js","../src/renderers/webgl/utils/RenderData.ts","../src/math/Color32.ts","../src/renderers/webgl/programs/RenderProgram.ts","../src/renderers/webgl/passes/FadeInPass.ts","../src/renderers/WebGLRenderer.ts","../src/controls/OrbitControls.ts","../src/controls/FPSControls.ts","../src/math/Plane.ts","../src/renderers/webgl/passes/ShaderPass.ts","../src/renderers/webgl/programs/VideoRenderProgram.ts","../src/math/BVH.ts","../src/renderers/webgl/utils/IntersectionTester.ts","../src/math/BVHNode.ts","../src/math/Ray.ts","../src/cameras/CameraHelper.ts","../src/utils/Utils.ts","../src/renderers/webgl/utils/Raycaster.ts","../src/renderers/webgl/programs/individual/AxisProgram.ts","../src/renderers/webgl/programs/individual/GridProgram.ts","../src/renderers/webgl/programs/individual/PlaneProgram.ts","../src/renderers/webgl/programs/individual/MultibleCubesProgram.ts","../src/renderers/webgl/programs/individual/RayProgram.ts","../src/Octree/OctreeHelper.ts","../src/math/Frustum.ts","../src/utils/Raycaster.ts"],"sourcesContent":["import { Matrix4 } from \"./Matrix4\";\n\nclass Vector3 {\n    public x: number;\n    public y: number;\n    public z: number;\n\n    constructor(x: number = 0, y: number = 0, z: number = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    set( x: number, y: number, z: number ) {\n\n        if ( z === undefined ) z = this.z;\n\n        this.x = x;\n        this.y = y;\n        this.z = z;\n\n        return this;\n    }\n\n    equals(v: Vector3): boolean {\n        if (this.x !== v.x) {\n            return false;\n        }\n        if (this.y !== v.y) {\n            return false;\n        }\n        if (this.z !== v.z) {\n            return false;\n        }\n\n        return true;\n    }\n\n    addVectors(a:Vector3, b:Vector3) {\n        this.x = a.x + b.x;\n        this.y = a.y + b.y;\n        this.z = a.z + b.z;\n        \n        return this;\n    }\n    \n    add(v: number): Vector3;\n    add(v: Vector3): Vector3;\n    add(v: number | Vector3): Vector3 {\n        if (typeof v === \"number\") {\n            return new Vector3(this.x + v, this.y + v, this.z + v);\n        } else {\n            return new Vector3(this.x + v.x, this.y + v.y, this.z + v.z);\n        }\n    }\n\n    addScaledVector( v:Vector3, s: number ) {\n\n        this.x += v.x * s;\n        this.y += v.y * s;\n        this.z += v.z * s;\n\n        return this;\n\n    }\n\n    subVectors(a:Vector3, b:Vector3) {\n        this.x = a.x - b.x;\n        this.y = a.y - b.y;\n        this.z = a.z - b.z;\n\n        return this;\n    }\n    subtract(v: number): Vector3;\n    subtract(v: Vector3): Vector3;\n    subtract(v: number | Vector3): Vector3 {\n        if (typeof v === \"number\") {\n            return new Vector3(this.x - v, this.y - v, this.z - v);\n        } else {\n            return new Vector3(this.x - v.x, this.y - v.y, this.z - v.z);\n        }\n    }\n\n    sub( v: Vector3 ) {\n\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n\n        return this;\n\n    }\n\n    multiply(v: number): Vector3;\n    multiply(v: Vector3): Vector3;\n    multiply(v: Matrix4): Vector3;\n    multiply(v: number | Vector3 | Matrix4): Vector3 {\n        if (typeof v === \"number\") {\n            return new Vector3(this.x * v, this.y * v, this.z * v);\n        } else if (v instanceof Vector3) {\n            return new Vector3(this.x * v.x, this.y * v.y, this.z * v.z);\n        } else {\n            return new Vector3(\n                this.x * v.buffer[0] + this.y * v.buffer[4] + this.z * v.buffer[8] + v.buffer[12],\n                this.x * v.buffer[1] + this.y * v.buffer[5] + this.z * v.buffer[9] + v.buffer[13],\n                this.x * v.buffer[2] + this.y * v.buffer[6] + this.z * v.buffer[10] + v.buffer[14],\n            );\n        }\n    }\n\n    divide(v: number): Vector3;\n    divide(v: Vector3): Vector3;\n    divide(v: number | Vector3): Vector3 {\n        if (typeof v === \"number\") {\n            return new Vector3(this.x / v, this.y / v, this.z / v);\n        } else {\n            return new Vector3(this.x / v.x, this.y / v.y, this.z / v.z);\n        }\n    }\n\n    crossVectors(a: Vector3, b: Vector3): this {\n        const ax = a.x, ay = a.y, az = a.z;\n        const bx = b.x, by = b.y, bz = b.z;\n\n        this.x = ay * bz - az * by;\n        this.y = az * bx - ax * bz;\n        this.z = ax * by - ay * bx;\n\n        return this;\n    }\n    \n    cross(v: Vector3): Vector3 {\n        const x = this.y * v.z - this.z * v.y;\n        const y = this.z * v.x - this.x * v.z;\n        const z = this.x * v.y - this.y * v.x;\n\n        return new Vector3(x, y, z);\n    }\n\n    distanceToSquared( v:Vector3 ) {\n\n        const dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n        return dx * dx + dy * dy + dz * dz;\n\n    }\n\n    toArray(): number[] {\n        return [this.x, this.y, this.z];\n    }\n    \n    \n    dot(v: Vector3): number {\n        return this.x * v.x + this.y * v.y + this.z * v.z;\n    }\n\n    lerp(v: Vector3, t: number): Vector3 {\n        return new Vector3(this.x + (v.x - this.x) * t, this.y + (v.y - this.y) * t, this.z + (v.z - this.z) * t);\n    }\n\n    min(v: Vector3): Vector3 {\n        return new Vector3(Math.min(this.x, v.x), Math.min(this.y, v.y), Math.min(this.z, v.z));\n    }\n\n    max(v: Vector3): Vector3 {\n        return new Vector3(Math.max(this.x, v.x), Math.max(this.y, v.y), Math.max(this.z, v.z));\n    }\n\n    getComponent(axis: number) {\n        switch (axis) {\n            case 0:\n                return this.x;\n            case 1:\n                return this.y;\n            case 2:\n                return this.z;\n            default:\n                throw new Error(`Invalid component index: ${axis}`);\n        }\n    }\n\n    minComponent(): number {\n        if (this.x < this.y && this.x < this.z) {\n            return 0;\n        } else if (this.y < this.z) {\n            return 1;\n        } else {\n            return 2;\n        }\n    }\n\n    maxComponent(): number {\n        if (this.x > this.y && this.x > this.z) {\n            return 0;\n        } else if (this.y > this.z) {\n            return 1;\n        } else {\n            return 2;\n        }\n    }\n\n    magnitude(): number {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n\n    distanceTo(v: Vector3): number {\n        return Math.sqrt((this.x - v.x) ** 2 + (this.y - v.y) ** 2 + (this.z - v.z) ** 2);\n    }\n\n    normalize(): Vector3 {\n        const length = this.magnitude();\n\n        return new Vector3(this.x / length, this.y / length, this.z / length);\n    }\n\n    lengthSq() {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n\n    flat(): number[] {\n        return [this.x, this.y, this.z];\n    }\n\n    clone(): Vector3 {\n        return new Vector3(this.x, this.y, this.z);\n    }\n\n    clamp( min:Vector3, max:Vector3 ) {\n\n        // assumes min < max, componentwise\n\n        this.x = Math.max( min.x, Math.min( max.x, this.x ) );\n        this.y = Math.max( min.y, Math.min( max.y, this.y ) );\n        this.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n        return this;\n\n    }\n    \n    copy( v: Vector3 ) {\n\n        this.x = v.x;\n        this.y = v.y;\n        this.z = v.z;\n\n        return this;\n\n    }\n\n    toString(): string {\n        return `[${this.flat().join(\", \")}]`;\n    }\n\n    static One(value: number = 1): Vector3 {\n        return new Vector3(value, value, value);\n    }\n}\n\nexport { Vector3 };\n","import { Matrix3 } from \"./Matrix3\";\nimport { Vector3 } from \"./Vector3\";\n\nclass Quaternion {\n    public readonly x: number;\n    public readonly y: number;\n    public readonly z: number;\n    public readonly w: number;\n\n    constructor(x: number = 0, y: number = 0, z: number = 0, w: number = 1) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n\n    equals(q: Quaternion): boolean {\n        if (this.x !== q.x) {\n            return false;\n        }\n        if (this.y !== q.y) {\n            return false;\n        }\n        if (this.z !== q.z) {\n            return false;\n        }\n        if (this.w !== q.w) {\n            return false;\n        }\n\n        return true;\n    }\n\n    normalize(): Quaternion {\n        const l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n        return new Quaternion(this.x / l, this.y / l, this.z / l, this.w / l);\n    }\n\n    multiply(q: Quaternion): Quaternion {\n        const w1 = this.w,\n            x1 = this.x,\n            y1 = this.y,\n            z1 = this.z;\n        const w2 = q.w,\n            x2 = q.x,\n            y2 = q.y,\n            z2 = q.z;\n\n        return new Quaternion(\n            w1 * x2 + x1 * w2 + y1 * z2 - z1 * y2,\n            w1 * y2 - x1 * z2 + y1 * w2 + z1 * x2,\n            w1 * z2 + x1 * y2 - y1 * x2 + z1 * w2,\n            w1 * w2 - x1 * x2 - y1 * y2 - z1 * z2,\n        );\n    }\n\n    inverse(): Quaternion {\n        const l = this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n        return new Quaternion(-this.x / l, -this.y / l, -this.z / l, this.w / l);\n    }\n\n    apply(v: Vector3): Vector3 {\n        const vecQuat = new Quaternion(v.x, v.y, v.z, 0);\n        const conjugate = new Quaternion(-this.x, -this.y, -this.z, this.w);\n        const rotatedQuat = this.multiply(vecQuat).multiply(conjugate);\n        return new Vector3(rotatedQuat.x, rotatedQuat.y, rotatedQuat.z);\n    }\n\n    flat(): number[] {\n        return [this.x, this.y, this.z, this.w];\n    }\n\n    clone(): Quaternion {\n        return new Quaternion(this.x, this.y, this.z, this.w);\n    }\n\n    static FromEuler(e: Vector3): Quaternion {\n        const halfX = e.x / 2;\n        const halfY = e.y / 2;\n        const halfZ = e.z / 2;\n        const cy = Math.cos(halfY);\n        const sy = Math.sin(halfY);\n        const cp = Math.cos(halfX);\n        const sp = Math.sin(halfX);\n        const cz = Math.cos(halfZ);\n        const sz = Math.sin(halfZ);\n\n        const q = new Quaternion(\n            cy * sp * cz + sy * cp * sz,\n            sy * cp * cz - cy * sp * sz,\n            cy * cp * sz - sy * sp * cz,\n            cy * cp * cz + sy * sp * sz,\n        );\n        return q;\n    }\n\n    toEuler(): Vector3 {\n        const sinr_cosp = 2 * (this.w * this.x + this.y * this.z);\n        const cosr_cosp = 1 - 2 * (this.x * this.x + this.y * this.y);\n        const x = Math.atan2(sinr_cosp, cosr_cosp);\n\n        let y;\n        const sinp = 2 * (this.w * this.y - this.z * this.x);\n        if (Math.abs(sinp) >= 1) {\n            y = (Math.sign(sinp) * Math.PI) / 2;\n        } else {\n            y = Math.asin(sinp);\n        }\n\n        const siny_cosp = 2 * (this.w * this.z + this.x * this.y);\n        const cosy_cosp = 1 - 2 * (this.y * this.y + this.z * this.z);\n        const z = Math.atan2(siny_cosp, cosy_cosp);\n\n        return new Vector3(x, y, z);\n    }\n\n    static FromMatrix3(matrix: Matrix3): Quaternion {\n        const m = matrix.buffer;\n        const trace = m[0] + m[4] + m[8];\n        let x, y, z, w;\n        if (trace > 0) {\n            const s = 0.5 / Math.sqrt(trace + 1.0);\n            w = 0.25 / s;\n            x = (m[7] - m[5]) * s;\n            y = (m[2] - m[6]) * s;\n            z = (m[3] - m[1]) * s;\n        } else if (m[0] > m[4] && m[0] > m[8]) {\n            const s = 2.0 * Math.sqrt(1.0 + m[0] - m[4] - m[8]);\n            w = (m[7] - m[5]) / s;\n            x = 0.25 * s;\n            y = (m[1] + m[3]) / s;\n            z = (m[2] + m[6]) / s;\n        } else if (m[4] > m[8]) {\n            const s = 2.0 * Math.sqrt(1.0 + m[4] - m[0] - m[8]);\n            w = (m[2] - m[6]) / s;\n            x = (m[1] + m[3]) / s;\n            y = 0.25 * s;\n            z = (m[5] + m[7]) / s;\n        } else {\n            const s = 2.0 * Math.sqrt(1.0 + m[8] - m[0] - m[4]);\n            w = (m[3] - m[1]) / s;\n            x = (m[2] + m[6]) / s;\n            y = (m[5] + m[7]) / s;\n            z = 0.25 * s;\n        }\n        return new Quaternion(x, y, z, w);\n    }\n\n    static FromAxisAngle(axis: Vector3, angle: number): Quaternion {\n        const halfAngle = angle / 2;\n        const sin = Math.sin(halfAngle);\n        const cos = Math.cos(halfAngle);\n        return new Quaternion(axis.x * sin, axis.y * sin, axis.z * sin, cos);\n    }\n\n    static LookRotation(direction: Vector3): Quaternion {\n        const forward = new Vector3(0, 0, 1);\n        const dot = forward.dot(direction);\n\n        if (Math.abs(dot - -1.0) < 0.000001) {\n            return new Quaternion(0, 1, 0, Math.PI);\n        }\n        if (Math.abs(dot - 1.0) < 0.000001) {\n            return new Quaternion();\n        }\n\n        const rotAngle = Math.acos(dot);\n        const rotAxis = forward.cross(direction).normalize();\n        return Quaternion.FromAxisAngle(rotAxis, rotAngle);\n    }\n\n    toString(): string {\n        return `[${this.flat().join(\", \")}]`;\n    }\n}\n\nexport { Quaternion };\n","class EventDispatcher {\n    addEventListener: (type: string, listener: (event: Event) => void) => void;\n    removeEventListener: (type: string, listener: (event: Event) => void) => void;\n    hasEventListener: (type: string, listener: (event: Event) => void) => boolean;\n    dispatchEvent: (event: Event) => void;\n\n    constructor() {\n        const listeners = new Map<string, Set<(event: Event) => void>>();\n\n        this.addEventListener = (type: string, listener: (event: Event) => void) => {\n            if (!listeners.has(type)) {\n                listeners.set(type, new Set());\n            }\n\n            listeners.get(type)!.add(listener);\n        };\n\n        this.removeEventListener = (type: string, listener: (event: Event) => void) => {\n            if (!listeners.has(type)) {\n                return;\n            }\n\n            listeners.get(type)!.delete(listener);\n        };\n\n        this.hasEventListener = (type: string, listener: (event: Event) => void) => {\n            if (!listeners.has(type)) {\n                return false;\n            }\n\n            return listeners.get(type)!.has(listener);\n        };\n\n        this.dispatchEvent = (event: Event) => {\n            if (!listeners.has(event.type)) {\n                return;\n            }\n\n            for (const listener of listeners.get(event.type)!) {\n                listener(event);\n            }\n        };\n    }\n}\n\nexport { EventDispatcher };\n","import { Quaternion } from \"./Quaternion\";\nimport { Vector3 } from \"./Vector3\";\n\nclass Matrix4 {\n    public readonly buffer: number[];\n\n    // prettier-ignore\n    constructor(n11: number = 1, n12: number = 0, n13: number = 0, n14: number = 0, \n                n21: number = 0, n22: number = 1, n23: number = 0, n24: number = 0, \n                n31: number = 0, n32: number = 0, n33: number = 1, n34: number = 0, \n                n41: number = 0, n42: number = 0, n43: number = 0, n44: number = 1) {\n        this.buffer = [\n            n11, n12, n13, n14, \n            n21, n22, n23, n24, \n            n31, n32, n33, n34, \n            n41, n42, n43, n44\n        ];\n    }\n\n    equals(m: Matrix4): boolean {\n        if (this.buffer.length !== m.buffer.length) {\n            return false;\n        }\n        if (this.buffer === m.buffer) {\n            return true;\n        }\n        for (let i = 0; i < this.buffer.length; i++) {\n            if (this.buffer[i] !== m.buffer[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    multiply(m: Matrix4): Matrix4 {\n        const a = this.buffer;\n        const b = m.buffer;\n        return new Matrix4(\n            b[0] * a[0] + b[1] * a[4] + b[2] * a[8] + b[3] * a[12],\n            b[0] * a[1] + b[1] * a[5] + b[2] * a[9] + b[3] * a[13],\n            b[0] * a[2] + b[1] * a[6] + b[2] * a[10] + b[3] * a[14],\n            b[0] * a[3] + b[1] * a[7] + b[2] * a[11] + b[3] * a[15],\n            b[4] * a[0] + b[5] * a[4] + b[6] * a[8] + b[7] * a[12],\n            b[4] * a[1] + b[5] * a[5] + b[6] * a[9] + b[7] * a[13],\n            b[4] * a[2] + b[5] * a[6] + b[6] * a[10] + b[7] * a[14],\n            b[4] * a[3] + b[5] * a[7] + b[6] * a[11] + b[7] * a[15],\n            b[8] * a[0] + b[9] * a[4] + b[10] * a[8] + b[11] * a[12],\n            b[8] * a[1] + b[9] * a[5] + b[10] * a[9] + b[11] * a[13],\n            b[8] * a[2] + b[9] * a[6] + b[10] * a[10] + b[11] * a[14],\n            b[8] * a[3] + b[9] * a[7] + b[10] * a[11] + b[11] * a[15],\n            b[12] * a[0] + b[13] * a[4] + b[14] * a[8] + b[15] * a[12],\n            b[12] * a[1] + b[13] * a[5] + b[14] * a[9] + b[15] * a[13],\n            b[12] * a[2] + b[13] * a[6] + b[14] * a[10] + b[15] * a[14],\n            b[12] * a[3] + b[13] * a[7] + b[14] * a[11] + b[15] * a[15],\n        );\n    }\n\n    clone(): Matrix4 {\n        const e = this.buffer;\n        // prettier-ignore\n        return new Matrix4(\n            e[0], e[1], e[2], e[3], \n            e[4], e[5], e[6], e[7], \n            e[8], e[9], e[10], e[11], \n            e[12], e[13], e[14], e[15]\n        );\n    }\n\n    determinant(): number {\n        const e = this.buffer;\n        // prettier-ignore\n        return (\n            e[12] * e[9] * e[6] * e[3] - e[8] * e[13] * e[6] * e[3] - e[12] * e[5] * e[10] * e[3] + e[4] * e[13] * e[10] * e[3] +\n            e[8] * e[5] * e[14] * e[3] - e[4] * e[9] * e[14] * e[3] - e[12] * e[9] * e[2] * e[7] + e[8] * e[13] * e[2] * e[7] +\n            e[12] * e[1] * e[10] * e[7] - e[0] * e[13] * e[10] * e[7] - e[8] * e[1] * e[14] * e[7] + e[0] * e[9] * e[14] * e[7] +\n            e[12] * e[5] * e[2] * e[11] - e[4] * e[13] * e[2] * e[11] - e[12] * e[1] * e[6] * e[11] + e[0] * e[13] * e[6] * e[11] +\n            e[4] * e[1] * e[14] * e[11] - e[0] * e[5] * e[14] * e[11] - e[8] * e[5] * e[2] * e[15] + e[4] * e[9] * e[2] * e[15] +\n            e[8] * e[1] * e[6] * e[15] - e[0] * e[9] * e[6] * e[15] - e[4] * e[1] * e[10] * e[15] + e[0] * e[5] * e[10] * e[15]\n        );\n    }\n\n    invert(): Matrix4 {\n        const e = this.buffer;\n        const det = this.determinant();\n        if (det === 0) {\n            throw new Error(\"Matrix is not invertible.\");\n        }\n        const invDet = 1 / det;\n        // prettier-ignore\n        return new Matrix4(\n            invDet * (\n                e[5] * e[10] * e[15] - e[5] * e[11] * e[14] - e[9] * e[6] * e[15] + e[9] * e[7] * e[14] + e[13] * e[6] * e[11] - e[13] * e[7] * e[10]\n            ),\n            invDet * (\n                -e[1] * e[10] * e[15] + e[1] * e[11] * e[14] + e[9] * e[2] * e[15] - e[9] * e[3] * e[14] - e[13] * e[2] * e[11] + e[13] * e[3] * e[10]\n            ),\n            invDet * (\n                e[1] * e[6] * e[15] - e[1] * e[7] * e[14] - e[5] * e[2] * e[15] + e[5] * e[3] * e[14] + e[13] * e[2] * e[7] - e[13] * e[3] * e[6]\n            ),\n            invDet * (\n                -e[1] * e[6] * e[11] + e[1] * e[7] * e[10] + e[5] * e[2] * e[11] - e[5] * e[3] * e[10] - e[9] * e[2] * e[7] + e[9] * e[3] * e[6]\n            ),\n            invDet * (\n                -e[4] * e[10] * e[15] + e[4] * e[11] * e[14] + e[8] * e[6] * e[15] - e[8] * e[7] * e[14] - e[12] * e[6] * e[11] + e[12] * e[7] * e[10]\n            ),\n            invDet * (\n                e[0] * e[10] * e[15] - e[0] * e[11] * e[14] - e[8] * e[2] * e[15] + e[8] * e[3] * e[14] + e[12] * e[2] * e[11] - e[12] * e[3] * e[10]\n            ),\n            invDet * (\n                -e[0] * e[6] * e[15] + e[0] * e[7] * e[14] + e[4] * e[2] * e[15] - e[4] * e[3] * e[14] - e[12] * e[2] * e[7] + e[12] * e[3] * e[6]\n            ),\n            invDet * (\n                e[0] * e[6] * e[11] - e[0] * e[7] * e[10] - e[4] * e[2] * e[11] + e[4] * e[3] * e[10] + e[8] * e[2] * e[7] - e[8] * e[3] * e[6]\n            ),\n            invDet * (\n                e[4] * e[9] * e[15] - e[4] * e[11] * e[13] - e[8] * e[5] * e[15] + e[8] * e[7] * e[13] + e[12] * e[5] * e[11] - e[12] * e[7] * e[9]\n            ),\n            invDet * (\n                -e[0] * e[9] * e[15] + e[0] * e[11] * e[13] + e[8] * e[1] * e[15] - e[8] * e[3] * e[13] - e[12] * e[1] * e[11] + e[12] * e[3] * e[9]\n            ),\n            invDet * (\n                e[0] * e[5] * e[15] - e[0] * e[7] * e[13] - e[4] * e[1] * e[15] + e[4] * e[3] * e[13] + e[12] * e[1] * e[7] - e[12] * e[3] * e[5]\n            ),\n            invDet * (\n                -e[0] * e[5] * e[11] + e[0] * e[7] * e[9] + e[4] * e[1] * e[11] - e[4] * e[3] * e[9] - e[8] * e[1] * e[7] + e[8] * e[3] * e[5]\n            ),\n            invDet * (\n                -e[4] * e[9] * e[14] + e[4] * e[10] * e[13] + e[8] * e[5] * e[14] - e[8] * e[6] * e[13] - e[12] * e[5] * e[10] + e[12] * e[6] * e[9]\n            ),\n            invDet * (\n                e[0] * e[9] * e[14] - e[0] * e[10] * e[13] - e[8] * e[1] * e[14] + e[8] * e[2] * e[13] + e[12] * e[1] * e[10] - e[12] * e[2] * e[9]\n            ),\n            invDet * (\n                -e[0] * e[5] * e[14] + e[0] * e[6] * e[13] + e[4] * e[1] * e[14] - e[4] * e[2] * e[13] - e[12] * e[1] * e[6] + e[12] * e[2] * e[5]\n            ),\n            invDet * (\n                e[0] * e[5] * e[10] - e[0] * e[6] * e[9] - e[4] * e[1] * e[10] + e[4] * e[2] * e[9] + e[8] * e[1] * e[6] - e[8] * e[2] * e[5]\n            ),\n        );\n    }\n\n    static Compose(position: Vector3, rotation: Quaternion, scale: Vector3): Matrix4 {\n        const x = rotation.x,\n            y = rotation.y,\n            z = rotation.z,\n            w = rotation.w;\n        const x2 = x + x,\n            y2 = y + y,\n            z2 = z + z;\n        const xx = x * x2,\n            xy = x * y2,\n            xz = x * z2;\n        const yy = y * y2,\n            yz = y * z2,\n            zz = z * z2;\n        const wx = w * x2,\n            wy = w * y2,\n            wz = w * z2;\n        const sx = scale.x,\n            sy = scale.y,\n            sz = scale.z;\n        // prettier-ignore\n        return new Matrix4(\n            (1 - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n            (xy - wz) * sy, (1 - (xx + zz)) * sy, (yz + wx) * sy, 0,\n            (xz + wy) * sz, (yz - wx) * sz, (1 - (xx + yy)) * sz, 0,\n            position.x, position.y, position.z, 1\n        );\n    }\n\n    toString(): string {\n        return `[${this.buffer.join(\", \")}]`;\n    }\n}\n\nexport { Matrix4 };\n","import { Object3D } from \"../core/Object3D\";\n\nclass ObjectAddedEvent extends Event {\n    constructor(public object: Object3D) {\n        super(\"objectAdded\");\n    }\n}\n\nclass ObjectRemovedEvent extends Event {\n    constructor(public object: Object3D) {\n        super(\"objectRemoved\");\n    }\n}\n\nclass ObjectChangedEvent extends Event {\n    constructor(public object: Object3D) {\n        super(\"objectChanged\");\n    }\n}\n\nclass RenderedSplatsChangedEvent extends Event {\n    constructor(public object: Object3D) {\n        super(\"renderedSplatsChanged\");\n    }\n}\n\nexport { ObjectAddedEvent, ObjectRemovedEvent, ObjectChangedEvent, RenderedSplatsChangedEvent };\n","import { Vector3 } from \"../math/Vector3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { EventDispatcher } from \"../events/EventDispatcher\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport {ObjectChangedEvent, RenderedSplatsChangedEvent} from \"../events/Events\";\n\nabstract class Object3D extends EventDispatcher {\n    public positionChanged: boolean = false;\n    public rotationChanged: boolean = false;\n    public scaleChanged: boolean = false;\n\n    protected _position: Vector3 = new Vector3();\n    protected _rotation: Quaternion = new Quaternion();\n    protected _scale: Vector3 = new Vector3(1, 1, 1);\n    protected _transform: Matrix4 = new Matrix4();\n\n    protected _changeEvent = new ObjectChangedEvent(this);\n    protected _renderedSplatsChanged = new RenderedSplatsChangedEvent(this);\n\n    update: () => void;\n    applyPosition: () => void;\n    applyRotation: () => void;\n    applyScale: () => void;\n    raiseChangeEvent: () => void;\n\n    constructor() {\n        super();\n\n        this.update = () => {};\n\n        this.applyPosition = () => {\n            this.position = new Vector3();\n        };\n\n        this.applyRotation = () => {\n            this.rotation = new Quaternion();\n        };\n\n        this.applyScale = () => {\n            this.scale = new Vector3(1, 1, 1);\n        };\n\n        this.raiseChangeEvent = () => {\n            this.dispatchEvent(this._changeEvent);\n        };\n    }\n\n    protected _updateMatrix() {\n        this._transform = Matrix4.Compose(this._position, this._rotation, this._scale);\n    }\n\n    get position() {\n        return this._position;\n    }\n\n    set position(position: Vector3) {\n        if (!this._position.equals(position)) {\n            this._position = position;\n            this.positionChanged = true;\n            this._updateMatrix();\n            this.dispatchEvent(this._changeEvent);\n        }\n    }\n\n    get rotation() {\n        return this._rotation;\n    }\n\n    set rotation(rotation: Quaternion) {\n        if (!this._rotation.equals(rotation)) {\n            this._rotation = rotation;\n            this.rotationChanged = true;\n            this._updateMatrix();\n            this.dispatchEvent(this._changeEvent);\n        }\n    }\n\n    get scale() {\n        return this._scale;\n    }\n\n    set scale(scale: Vector3) {\n        if (!this._scale.equals(scale)) {\n            this._scale = scale;\n            this.scaleChanged = true;\n            this._updateMatrix();\n            this.dispatchEvent(this._changeEvent);\n        }\n    }\n\n    get forward() {\n        let forward = new Vector3(0, 0, 1);\n        forward = this.rotation.apply(forward);\n        return forward;\n    }\n\n    get transform() {\n        return this._transform;\n    }\n}\n\nexport { Object3D };\n","import { Quaternion } from \"./Quaternion\";\nimport type { Vector3 } from \"./Vector3\";\n\nclass Matrix3 {\n    public readonly buffer: number[];\n\n    // prettier-ignore\n    constructor(n11: number = 1, n12: number = 0, n13: number = 0,\n                n21: number = 0, n22: number = 1, n23: number = 0,\n                n31: number = 0, n32: number = 0, n33: number = 1) {\n        this.buffer = [\n            n11, n12, n13,\n            n21, n22, n23,\n            n31, n32, n33\n        ];\n    }\n\n    equals(m: Matrix3): boolean {\n        if (this.buffer.length !== m.buffer.length) {\n            return false;\n        }\n        if (this.buffer === m.buffer) {\n            return true;\n        }\n        for (let i = 0; i < this.buffer.length; i++) {\n            if (this.buffer[i] !== m.buffer[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    multiply(v: Matrix3): Matrix3 {\n        const a = this.buffer;\n        const b = v.buffer;\n        return new Matrix3(\n            b[0] * a[0] + b[3] * a[1] + b[6] * a[2],\n            b[1] * a[0] + b[4] * a[1] + b[7] * a[2],\n            b[2] * a[0] + b[5] * a[1] + b[8] * a[2],\n            b[0] * a[3] + b[3] * a[4] + b[6] * a[5],\n            b[1] * a[3] + b[4] * a[4] + b[7] * a[5],\n            b[2] * a[3] + b[5] * a[4] + b[8] * a[5],\n            b[0] * a[6] + b[3] * a[7] + b[6] * a[8],\n            b[1] * a[6] + b[4] * a[7] + b[7] * a[8],\n            b[2] * a[6] + b[5] * a[7] + b[8] * a[8],\n        );\n    }\n\n    clone(): Matrix3 {\n        const e = this.buffer;\n        // prettier-ignore\n        return new Matrix3(\n            e[0], e[1], e[2],\n            e[3], e[4], e[5],\n            e[6], e[7], e[8]\n        );\n    }\n\n    static Eye(v: number = 1): Matrix3 {\n        return new Matrix3(v, 0, 0, 0, v, 0, 0, 0, v);\n    }\n\n    static Diagonal(v: Vector3): Matrix3 {\n        return new Matrix3(v.x, 0, 0, 0, v.y, 0, 0, 0, v.z);\n    }\n\n    static RotationFromQuaternion(q: Quaternion): Matrix3 {\n        const matrix = new Matrix3(\n            1 - 2 * q.y * q.y - 2 * q.z * q.z,\n            2 * q.x * q.y - 2 * q.z * q.w,\n            2 * q.x * q.z + 2 * q.y * q.w,\n            2 * q.x * q.y + 2 * q.z * q.w,\n            1 - 2 * q.x * q.x - 2 * q.z * q.z,\n            2 * q.y * q.z - 2 * q.x * q.w,\n            2 * q.x * q.z - 2 * q.y * q.w,\n            2 * q.y * q.z + 2 * q.x * q.w,\n            1 - 2 * q.x * q.x - 2 * q.y * q.y,\n        );\n        return matrix;\n    }\n\n    static RotationFromEuler(m: Vector3): Matrix3 {\n        const cx = Math.cos(m.x);\n        const sx = Math.sin(m.x);\n        const cy = Math.cos(m.y);\n        const sy = Math.sin(m.y);\n        const cz = Math.cos(m.z);\n        const sz = Math.sin(m.z);\n\n        const rotationMatrix = [\n            cy * cz + sy * sx * sz,\n            -cy * sz + sy * sx * cz,\n            sy * cx,\n            cx * sz,\n            cx * cz,\n            -sx,\n            -sy * cz + cy * sx * sz,\n            sy * sz + cy * sx * cz,\n            cy * cx,\n        ];\n\n        return new Matrix3(...rotationMatrix);\n    }\n\n    toString(): string {\n        return `[${this.buffer.join(\", \")}]`;\n    }\n}\n\nexport { Matrix3 };\n","import { Vector3 } from \"../math/Vector3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport {PointOctree} from \"../Octree/points/PointOctree\";\n\nclass SplatData {\n    static RowLength = 3 * 4 + 3 * 4 + 4 + 4;\n\n    private firstTime = true;\n    \n    public changed = false;\n    public detached = false;\n    \n    private _vertexCount: number;\n    private _renderedSplats: number;\n    private _positions: Float32Array;\n    private _rotations: Float32Array;\n    private _scales: Float32Array;\n    private _colors: Uint8Array;\n    private _selection: Uint8Array;\n    private _rendered: Uint8Array;\n    \n    private _renderedPositions: Float32Array;\n    private _renderedRotations: Float32Array;\n    private _renderedScales: Float32Array;\n    private _renderedColors: Uint8Array;\n    private _renderedSelection: Uint8Array;\n\n    translate: (translation: Vector3) => void;\n    rotate: (rotation: Quaternion) => void;\n    scale: (scale: Vector3) => void;\n    calculateRenderedSplats: () => void;\n    serialize: () => Uint8Array;\n    reattach: (\n        positions: ArrayBufferLike,\n        rotations: ArrayBufferLike,\n        scales: ArrayBufferLike,\n        colors: ArrayBufferLike,\n        selection: ArrayBufferLike,\n        rendered: ArrayBufferLike,\n    ) => void;\n    \n    resetRendering: () => void;\n    \n    constructor(\n        vertexCount: number = 0,\n        positions: Float32Array | null = null,\n        rotations: Float32Array | null = null,\n        scales: Float32Array | null = null,\n        colors: Uint8Array | null = null,\n    ) {\n        this._vertexCount = vertexCount;\n        this._positions = positions || new Float32Array(0);\n        this._renderedPositions = positions || new Float32Array(0);\n        this._rotations = rotations || new Float32Array(0);\n        this._renderedRotations = rotations || new Float32Array(0);\n        this._scales = scales || new Float32Array(0);\n        this._renderedScales = scales || new Float32Array(0);\n        this._colors = colors || new Uint8Array(0);\n        this._renderedColors = colors || new Uint8Array(0);\n        this._selection = new Uint8Array(this.vertexCount);\n        this._renderedSelection = new Uint8Array(this.vertexCount);\n        this._rendered = new Uint8Array(this.vertexCount).fill(1);\n        this._renderedSplats = vertexCount;\n        \n        this.resetRendering = () => {\n            this._rendered = new Uint8Array(this.vertexCount).fill(0);\n        }\n        \n        this.calculateRenderedSplats = () => {\n            this._renderedSplats = this._rendered.reduce((count, value) => count + value, 0);\n        }\n\n        this.translate = (translation: Vector3) => {\n            for (let i = 0; i < this.vertexCount; i++) {\n                this.positions[3 * i + 0] += translation.x;\n                this.positions[3 * i + 1] += translation.y;\n                this.positions[3 * i + 2] += translation.z;\n            }\n\n            this.changed = true;\n        };\n\n        this.rotate = (rotation: Quaternion) => {\n            const R = Matrix3.RotationFromQuaternion(rotation).buffer;\n            for (let i = 0; i < this.vertexCount; i++) {\n                const x = this.positions[3 * i + 0];\n                const y = this.positions[3 * i + 1];\n                const z = this.positions[3 * i + 2];\n\n                this.positions[3 * i + 0] = R[0] * x + R[1] * y + R[2] * z;\n                this.positions[3 * i + 1] = R[3] * x + R[4] * y + R[5] * z;\n                this.positions[3 * i + 2] = R[6] * x + R[7] * y + R[8] * z;\n\n                const currentRotation = new Quaternion(\n                    this.rotations[4 * i + 1],\n                    this.rotations[4 * i + 2],\n                    this.rotations[4 * i + 3],\n                    this.rotations[4 * i + 0],\n                );\n\n                const newRot = rotation.multiply(currentRotation);\n                this.rotations[4 * i + 1] = newRot.x;\n                this.rotations[4 * i + 2] = newRot.y;\n                this.rotations[4 * i + 3] = newRot.z;\n                this.rotations[4 * i + 0] = newRot.w;\n            }\n\n            this.changed = true;\n        };\n\n        this.scale = (scale: Vector3) => {\n            for (let i = 0; i < this.vertexCount; i++) {\n                this.positions[3 * i + 0] *= scale.x;\n                this.positions[3 * i + 1] *= scale.y;\n                this.positions[3 * i + 2] *= scale.z;\n\n                this.scales[3 * i + 0] *= scale.x;\n                this.scales[3 * i + 1] *= scale.y;\n                this.scales[3 * i + 2] *= scale.z;\n            }\n\n            this.changed = true;\n        };\n\n\n        this.serialize = () => {\n            const data = new Uint8Array(this.vertexCount * SplatData.RowLength);\n\n            const f_buffer = new Float32Array(data.buffer);\n            const u_buffer = new Uint8Array(data.buffer);\n\n            for (let i = 0; i < this.vertexCount; i++) {\n                f_buffer[8 * i + 0] = this.positions[3 * i + 0];\n                f_buffer[8 * i + 1] = this.positions[3 * i + 1];\n                f_buffer[8 * i + 2] = this.positions[3 * i + 2];\n\n                u_buffer[32 * i + 24 + 0] = this.colors[4 * i + 0];\n                u_buffer[32 * i + 24 + 1] = this.colors[4 * i + 1];\n                u_buffer[32 * i + 24 + 2] = this.colors[4 * i + 2];\n                u_buffer[32 * i + 24 + 3] = this.colors[4 * i + 3];\n\n                f_buffer[8 * i + 3 + 0] = this.scales[3 * i + 0];\n                f_buffer[8 * i + 3 + 1] = this.scales[3 * i + 1];\n                f_buffer[8 * i + 3 + 2] = this.scales[3 * i + 2];\n\n                u_buffer[32 * i + 28 + 0] = (this.rotations[4 * i + 0] * 128 + 128) & 0xff;\n                u_buffer[32 * i + 28 + 1] = (this.rotations[4 * i + 1] * 128 + 128) & 0xff;\n                u_buffer[32 * i + 28 + 2] = (this.rotations[4 * i + 2] * 128 + 128) & 0xff;\n                u_buffer[32 * i + 28 + 3] = (this.rotations[4 * i + 3] * 128 + 128) & 0xff;\n            }\n\n            return data;\n        };\n\n        this.reattach = (\n            positions: ArrayBufferLike,\n            rotations: ArrayBufferLike,\n            scales: ArrayBufferLike,\n            colors: ArrayBufferLike,\n            selection: ArrayBufferLike,\n            rendered: ArrayBufferLike,\n        ) => {\n            this._rendered = new Uint8Array(rendered);\n            const receivedSplats = this._rendered.reduce((count, value) => count + (value !== 0 ? 1 : 0), 0);\n\n            console.assert(\n                positions.byteLength === receivedSplats * 3 * 4,\n                `Expected ${receivedSplats * 3 * 4} bytes, got ${positions.byteLength} bytes which are ${positions.byteLength / 3 / 4} splats`,\n            );\n\n            this._renderedPositions = new Float32Array(positions);\n            this._renderedRotations = new Float32Array(rotations);\n            this._renderedScales = new Float32Array(scales);\n            this._renderedColors = new Uint8Array(colors);\n            this._renderedSelection = new Uint8Array(selection);\n\n            let newIndex = 0;\n            for (let i = 0; i < this._rendered.length; i++) {\n                if (this._rendered[i] === 1) {\n                    // Update positions (3 values per position)\n                    this._positions[i * 3] = this._renderedPositions[newIndex * 3];\n                    this._positions[i * 3 + 1] = this._renderedPositions[newIndex * 3 + 1];\n                    this._positions[i * 3 + 2] = this._renderedPositions[newIndex * 3 + 2];\n\n                    // Update rotations (4 values per rotation)\n                    this._rotations[i * 4] = this._renderedRotations[newIndex * 4];\n                    this._rotations[i * 4 + 1] = this._renderedRotations[newIndex * 4 + 1];\n                    this._rotations[i * 4 + 2] = this._renderedRotations[newIndex * 4 + 2];\n                    this._rotations[i * 4 + 3] = this._renderedRotations[newIndex * 4 + 3];\n\n                    // Update scales (3 values per scale)\n                    this._scales[i * 3] = this._renderedScales[newIndex * 3];\n                    this._scales[i * 3 + 1] = this._renderedScales[newIndex * 3 + 1];\n                    this._scales[i * 3 + 2] = this._renderedScales[newIndex * 3 + 2];\n\n                    // Update colors (4 values per color, assuming RGBA)\n                    this._colors[i * 4] = this._renderedColors[newIndex * 4];\n                    this._colors[i * 4 + 1] = this._renderedColors[newIndex * 4 + 1];\n                    this._colors[i * 4 + 2] = this._renderedColors[newIndex * 4 + 2];\n                    this._colors[i * 4 + 3] = this._renderedColors[newIndex * 4 + 3];\n\n                    // Update selection\n                    this._selection[i] = this._renderedSelection[newIndex];\n\n                    newIndex++;\n                }\n            }\n            this.detached = false;\n        };\n    }\n    \n\n    static Deserialize(data: Uint8Array): SplatData {\n        const vertexCount = data.length / SplatData.RowLength;\n        const positions = new Float32Array(3 * vertexCount);\n        const rotations = new Float32Array(4 * vertexCount);\n        const scales = new Float32Array(3 * vertexCount);\n        const colors = new Uint8Array(4 * vertexCount);\n\n        const f_buffer = new Float32Array(data.buffer);\n        const u_buffer = new Uint8Array(data.buffer);\n\n        for (let i = 0; i < vertexCount; i++) {\n            positions[3 * i + 0] = f_buffer[8 * i + 0];\n            positions[3 * i + 1] = f_buffer[8 * i + 1];\n            positions[3 * i + 2] = f_buffer[8 * i + 2];\n\n            rotations[4 * i + 0] = (u_buffer[32 * i + 28 + 0] - 128) / 128;\n            rotations[4 * i + 1] = (u_buffer[32 * i + 28 + 1] - 128) / 128;\n            rotations[4 * i + 2] = (u_buffer[32 * i + 28 + 2] - 128) / 128;\n            rotations[4 * i + 3] = (u_buffer[32 * i + 28 + 3] - 128) / 128;\n\n            scales[3 * i + 0] = f_buffer[8 * i + 3 + 0];\n            scales[3 * i + 1] = f_buffer[8 * i + 3 + 1];\n            scales[3 * i + 2] = f_buffer[8 * i + 3 + 2];\n\n            colors[4 * i + 0] = u_buffer[32 * i + 24 + 0];\n            colors[4 * i + 1] = u_buffer[32 * i + 24 + 1];\n            colors[4 * i + 2] = u_buffer[32 * i + 24 + 2];\n            colors[4 * i + 3] = u_buffer[32 * i + 24 + 3];\n        }\n        \n        return new SplatData(vertexCount, positions, rotations, scales, colors);\n    }\n\n    get vertexCount() {\n        return this._vertexCount;\n    }\n    \n    get renderedSplats() {\n        return this._renderedSplats;\n    }\n\n    get positions() {\n        return this._positions;\n    }\n    \n    get renderedPositions() {\n        return this._renderedPositions;\n    }\n\n    get rotations() {\n        return this._rotations;\n    }\n\n    get renderedRotations() {\n        return this._renderedRotations;\n    }\n    get scales() {\n        return this._scales;\n    }\n    \n    get renderedScales() {\n        return this._renderedScales;\n    }\n\n    get colors() {\n        return this._colors;\n    }\n    \n    get renderedColors() {\n        return this._renderedColors;\n    }\n\n    get selection() {\n        return this._selection;\n    }\n    \n    get renderedSelection() {\n        return this._renderedSelection;\n    }\n\n    get rendered() {\n        return this._rendered;\n    }\n    \n    calculateRenderedTransforms() {\n        this._renderedPositions = new Float32Array(this._renderedSplats * 3);\n        this._renderedRotations = new Float32Array(this._renderedSplats * 4);\n        this._renderedScales = new Float32Array(this._renderedSplats * 3);\n        this._renderedColors = new Uint8Array(this._renderedSplats * 4);\n        this._renderedSelection = new Uint8Array(this._renderedSplats);\n\n        let tempIndex = 0;\n        this._rendered.forEach((isRendered, i) => {\n            if (isRendered === 1) {\n                const positionScaleIndex = i * 3;\n                const rotationColorIndex = i * 4;\n                \n                this._renderedPositions[tempIndex * 3] = this._positions[positionScaleIndex];\n                this._renderedPositions[tempIndex * 3 + 1] = this._positions[positionScaleIndex + 1];\n                this._renderedPositions[tempIndex * 3 + 2] = this._positions[positionScaleIndex + 2];\n                \n                this._renderedRotations[tempIndex * 4] = this._rotations[rotationColorIndex];\n                this._renderedRotations[tempIndex * 4 + 1] = this._rotations[rotationColorIndex + 1];\n                this._renderedRotations[tempIndex * 4 + 2] = this._rotations[rotationColorIndex + 2];\n                this._renderedRotations[tempIndex * 4 + 3] = this._rotations[rotationColorIndex + 3];\n                \n                this._renderedScales[tempIndex * 3] = this._scales[positionScaleIndex];\n                this._renderedScales[tempIndex * 3 + 1] = this._scales[positionScaleIndex + 1];\n                this._renderedScales[tempIndex * 3 + 2] = this._scales[positionScaleIndex + 2];\n\n                this._renderedColors[tempIndex * 4] = this._colors[rotationColorIndex];\n                this._renderedColors[tempIndex * 4 + 1] = this._colors[rotationColorIndex + 1];\n                this._renderedColors[tempIndex * 4 + 2] = this._colors[rotationColorIndex + 2];\n                this._renderedColors[tempIndex * 4 + 3] = this._colors[rotationColorIndex + 3];\n                \n                this._renderedSelection[tempIndex] = this._selection[i];\n\n                tempIndex++;\n            }\n        });\n    }\n}\n\nexport { SplatData };\n","class SplatvData {\n    static RowLength = 64;\n\n    private _vertexCount: number;\n    private _positions: Float32Array;\n    private _data: Uint32Array;\n    private _width: number;\n    private _height: number;\n\n    serialize: () => Uint8Array;\n\n    constructor(vertexCount: number, positions: Float32Array, data: Uint32Array, width: number, height: number) {\n        this._vertexCount = vertexCount;\n        this._positions = positions;\n        this._data = data;\n        this._width = width;\n        this._height = height;\n\n        this.serialize = () => {\n            return new Uint8Array(this._data.buffer);\n        };\n    }\n\n    static Deserialize(data: Uint8Array, width: number, height: number): SplatvData {\n        const buffer = new Uint32Array(data.buffer);\n        const f_buffer = new Float32Array(data.buffer);\n        const vertexCount = Math.floor(f_buffer.byteLength / this.RowLength);\n        const positions = new Float32Array(vertexCount * 3);\n        for (let i = 0; i < vertexCount; i++) {\n            positions[3 * i + 0] = f_buffer[16 * i + 0];\n            positions[3 * i + 1] = f_buffer[16 * i + 1];\n            positions[3 * i + 2] = f_buffer[16 * i + 2];\n            positions[3 * i + 0] = f_buffer[16 * i + 3];\n        }\n        return new SplatvData(vertexCount, positions, buffer, width, height);\n    }\n\n    get vertexCount() {\n        return this._vertexCount;\n    }\n\n    get positions() {\n        return this._positions;\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    get width() {\n        return this._width;\n    }\n\n    get height() {\n        return this._height;\n    }\n}\n\nexport { SplatvData };\n","import { Quaternion } from \"../math/Quaternion\";\nimport {WebGLRenderer} from \"../renderers/WebGLRenderer\";\nimport {Vector3} from \"../math/Vector3\";\nimport {CubeVisualisationProgram} from \"../renderers/webgl/programs/individual/CubeVisualisationProgram\";\n\nclass Converter {\n    public static SH_C0 = 0.28209479177387814;\n\n    public static SplatToPLY(buffer: ArrayBuffer, vertexCount: number): ArrayBuffer {\n        let header = \"ply\\nformat binary_little_endian 1.0\\n\";\n        header += `element vertex ${vertexCount}\\n`;\n\n        const properties = [\"x\", \"y\", \"z\", \"nx\", \"ny\", \"nz\", \"f_dc_0\", \"f_dc_1\", \"f_dc_2\"];\n        for (let i = 0; i < 45; i++) {\n            properties.push(`f_rest_${i}`);\n        }\n        properties.push(\"opacity\");\n        properties.push(\"scale_0\");\n        properties.push(\"scale_1\");\n        properties.push(\"scale_2\");\n        properties.push(\"rot_0\");\n        properties.push(\"rot_1\");\n        properties.push(\"rot_2\");\n        properties.push(\"rot_3\");\n\n        for (const property of properties) {\n            header += `property float ${property}\\n`;\n        }\n        header += \"end_header\\n\";\n\n        const headerBuffer = new TextEncoder().encode(header);\n\n        const plyRowLength = 4 * 3 + 4 * 3 + 4 * 3 + 4 * 45 + 4 + 4 * 3 + 4 * 4;\n        const plyLength = vertexCount * plyRowLength;\n        const output = new DataView(new ArrayBuffer(headerBuffer.length + plyLength));\n        new Uint8Array(output.buffer).set(headerBuffer, 0);\n\n        const f_buffer = new Float32Array(buffer);\n        const u_buffer = new Uint8Array(buffer);\n\n        const offset = headerBuffer.length;\n        const f_dc_offset = 4 * 3 + 4 * 3;\n        const opacity_offset = f_dc_offset + 4 * 3 + 4 * 45;\n        const scale_offset = opacity_offset + 4;\n        const rot_offset = scale_offset + 4 * 3;\n        for (let i = 0; i < vertexCount; i++) {\n            const pos0 = f_buffer[8 * i + 0];\n            const pos1 = f_buffer[8 * i + 1];\n            const pos2 = f_buffer[8 * i + 2];\n\n            const f_dc_0 = (u_buffer[32 * i + 24 + 0] / 255 - 0.5) / this.SH_C0;\n            const f_dc_1 = (u_buffer[32 * i + 24 + 1] / 255 - 0.5) / this.SH_C0;\n            const f_dc_2 = (u_buffer[32 * i + 24 + 2] / 255 - 0.5) / this.SH_C0;\n\n            const alpha = u_buffer[32 * i + 24 + 3] / 255;\n            const opacity = Math.log(alpha / (1 - alpha));\n\n            const scale0 = Math.log(f_buffer[8 * i + 3 + 0]);\n            const scale1 = Math.log(f_buffer[8 * i + 3 + 1]);\n            const scale2 = Math.log(f_buffer[8 * i + 3 + 2]);\n\n            let q = new Quaternion(\n                (u_buffer[32 * i + 28 + 1] - 128) / 128,\n                (u_buffer[32 * i + 28 + 2] - 128) / 128,\n                (u_buffer[32 * i + 28 + 3] - 128) / 128,\n                (u_buffer[32 * i + 28 + 0] - 128) / 128,\n            );\n            q = q.normalize();\n\n            const rot0 = q.w;\n            const rot1 = q.x;\n            const rot2 = q.y;\n            const rot3 = q.z;\n\n            output.setFloat32(offset + plyRowLength * i + 0, pos0, true);\n            output.setFloat32(offset + plyRowLength * i + 4, pos1, true);\n            output.setFloat32(offset + plyRowLength * i + 8, pos2, true);\n\n            output.setFloat32(offset + plyRowLength * i + f_dc_offset + 0, f_dc_0, true);\n            output.setFloat32(offset + plyRowLength * i + f_dc_offset + 4, f_dc_1, true);\n            output.setFloat32(offset + plyRowLength * i + f_dc_offset + 8, f_dc_2, true);\n\n            output.setFloat32(offset + plyRowLength * i + opacity_offset, opacity, true);\n\n            output.setFloat32(offset + plyRowLength * i + scale_offset + 0, scale0, true);\n            output.setFloat32(offset + plyRowLength * i + scale_offset + 4, scale1, true);\n            output.setFloat32(offset + plyRowLength * i + scale_offset + 8, scale2, true);\n\n            output.setFloat32(offset + plyRowLength * i + rot_offset + 0, rot0, true);\n            output.setFloat32(offset + plyRowLength * i + rot_offset + 4, rot1, true);\n            output.setFloat32(offset + plyRowLength * i + rot_offset + 8, rot2, true);\n            output.setFloat32(offset + plyRowLength * i + rot_offset + 12, rot3, true);\n        }\n\n        return output.buffer;\n    }\n}\n\nexport { Converter };\n","import { Camera } from \"../../../cameras/Camera\";\nimport { Scene } from \"../../../core/Scene\";\nimport { WebGLRenderer } from \"../../WebGLRenderer\";\nimport { ShaderPass } from \"../passes/ShaderPass\";\n\nabstract class ShaderProgram {\n    private _renderer: WebGLRenderer;\n    private _program: WebGLProgram;\n    private _passes: ShaderPass[];\n\n    protected _scene: Scene | null = null;\n    protected _camera: Camera | null = null;\n    protected _started: boolean = false;\n    protected _initialized: boolean = false;\n\n    protected abstract _initialize: () => void;\n    protected abstract _resize: () => void;\n    protected abstract _render: () => void;\n    protected abstract _dispose: () => void;\n\n    initialize: () => void;\n    resize: () => void;\n    render: (scene: Scene, camera: Camera) => void;\n    dispose: () => void;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[]) {\n        this._renderer = renderer;\n        const gl = renderer.gl;\n\n        this._program = gl.createProgram() as WebGLProgram;\n        this._passes = passes || [];\n\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER) as WebGLShader;\n        gl.shaderSource(vertexShader, this._getVertexSource());\n        gl.compileShader(vertexShader);\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n            console.error(gl.getShaderInfoLog(vertexShader));\n        }\n\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER) as WebGLShader;\n        gl.shaderSource(fragmentShader, this._getFragmentSource());\n        gl.compileShader(fragmentShader);\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n            console.error(gl.getShaderInfoLog(fragmentShader));\n        }\n\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            console.error(gl.getProgramInfoLog(this.program));\n        }\n\n        this.resize = () => {\n            gl.useProgram(this._program);\n\n            this._resize();\n        };\n\n        this.initialize = () => {\n            console.assert(!this._initialized, \"ShaderProgram already initialized\");\n\n            gl.useProgram(this._program);\n\n            this._initialize();\n            for (const pass of this.passes) {\n                pass.initialize(this);\n            }\n\n            this._initialized = true;\n            this._started = true;\n        };\n\n        this.render = (scene: Scene, camera: Camera) => {\n            gl.useProgram(this._program);\n\n            if (this._scene !== scene || this._camera !== camera) {\n                this.dispose();\n                this._scene = scene;\n                this._camera = camera;\n                this.initialize();\n            }\n\n            for (const pass of this.passes) {\n                pass.render();\n            }\n\n            this._render();\n        };\n\n        this.dispose = () => {\n            if (!this._initialized) return;\n\n            gl.useProgram(this._program);\n\n            for (const pass of this.passes) {\n                pass.dispose();\n            }\n\n            this._dispose();\n\n            this._scene = null;\n            this._camera = null;\n            this._initialized = false;\n        };\n    }\n\n    get renderer() {\n        return this._renderer;\n    }\n\n    get scene() {\n        return this._scene;\n    }\n\n    get camera() {\n        return this._camera;\n    }\n\n    get program() {\n        return this._program;\n    }\n\n    get passes() {\n        return this._passes;\n    }\n\n    get started() {\n        return this._started;\n    }\n\n    protected abstract _getVertexSource(): string;\n    protected abstract _getFragmentSource(): string;\n}\n\nexport { ShaderProgram };\n","import {ShaderProgram} from \"../ShaderProgram\";\nimport {WebGLRenderer} from \"../../../WebGLRenderer\";\nimport {ShaderPass} from \"../../passes/ShaderPass\";\n\nconst axisVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = projection * view * vec4(position, 1.0);\n}\n`;\n\nconst axisFragmentShader = /*glsl*/ `#version 300 es\nprecision mediump float;\nuniform vec4 cubeColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = cubeColor;\n}\n`;\n\nclass CubeVisualisationProgram extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[], points: Float32Array[], color: Float32Array = new Float32Array([1, 0, 0, 0.2]), borderColor: Float32Array = new Float32Array([1, 0, 0, 1]), drawPlanes: boolean[] | undefined = undefined) {\n        if (!(points.length == 2 || points.length == 8)) {\n            console.error(\"Please provide 2 oder 8 corners\")\n        }\n        super(renderer, passes);\n\n        const gl = renderer.gl;\n\n        let vertexBuffer: WebGLBuffer;\n\n        let positionAttribute: number;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_color: WebGLUniformLocation;\n\n        let corners: Float32Array;\n        let surface: Float32Array;\n        \n        let numberOfVisiblePlanes = 0;\n        \n        if(points.length === 2) {\n            numberOfVisiblePlanes = 6\n            const [x1, y1, z1] = points[0];\n            const [x2, y2, z2] = points[1];\n\n\n            corners = new Float32Array([\n                x1, y1, z1, x2, y1, z1,  // Linie von P1 zu P2\n                x1, y1, z1, x1, y2, z1,  // Linie von P1 zu P3\n                x1, y1, z1, x1, y1, z2,  // Linie von P1 zu P5\n                x2, y1, z1, x2, y2, z1,  // Linie von P2 zu P4\n                x2, y1, z1, x2, y1, z2,  // Linie von P2 zu P6\n                x1, y2, z1, x2, y2, z1,  // Linie von P3 zu P4\n                x1, y2, z1, x1, y2, z2,  // Linie von P3 zu P7\n                x1, y1, z2, x2, y1, z2,  // Linie von P5 zu P6\n                x1, y1, z2, x1, y2, z2,  // Linie von P5 zu P7\n                x2, y2, z1, x2, y2, z2,  // Linie von P4 zu P8\n                x2, y1, z2, x2, y2, z2,  // Linie von P6 zu P8\n                x1, y2, z2, x2, y2, z2   // Linie von P7 zu P8\n            ]);\n\n\n            surface = new Float32Array([\n                x1, y1, z1, x2, y1, z1, x1, y2, z1, x2, y1, z1, x2, y2, z1, x1, y2, z1,\n                x1, y1, z2, x2, y1, z2, x1, y2, z2, x2, y1, z2, x2, y2, z2, x1, y2, z2,\n                x1, y1, z1, x1, y1, z2, x1, y2, z1, x1, y2, z2, x1, y1, z2, x1, y2, z1,\n                x2, y1, z1, x2, y1, z2, x2, y2, z1, x2, y2, z2, x2, y1, z2, x2, y2, z1,\n                x1, y1, z1, x2, y1, z1, x1, y1, z2, x2, y1, z2, x2, y1, z1, x1, y1, z2,\n                x1, y2, z1, x2, y2, z1, x1, y2, z2, x2, y2, z2, x2, y2, z1, x1, y2, z2\n            ])\n        } else {\n            const [x1, y1, z1] = points[0];\n            const [x2, y2, z2] = points[1];\n            const [x3, y3, z3] = points[2];\n            const [x4, y4, z4] = points[3];\n            const [x5, y5, z5] = points[4];\n            const [x6, y6, z6] = points[5];\n            const [x7, y7, z7] = points[6];\n            const [x8, y8, z8] = points[7];\n            \n            corners = new Float32Array([\n                x1, y1, z1, x2, y2, z2,  // Linie von P1 zu P2\n                x1, y1, z1, x3, y3, z3,  // Linie von P1 zu P3\n                x1, y1, z1, x5, y5, z5,  // Linie von P1 zu P5\n                x2, y2, z2, x4, y4, z4,  // Linie von P2 zu P4\n                x2, y2, z2, x6, y6, z6,  // Linie von P2 zu P6\n                x3, y3, z3, x4, y4, z4,  // Linie von P3 zu P4\n                x3, y3, z3, x7, y7, z7,  // Linie von P3 zu P7\n                x5, y5, z5, x6, y6, z6,  // Linie von P5 zu P6\n                x5, y5, z5, x7, y7, z7,  // Linie von P5 zu P7\n                x4, y4, z4, x8, y8, z8,  // Linie von P4 zu P8\n                x6, y6, z6, x8, y8, z8,  // Linie von P6 zu P8\n                x7, y7, z7, x8, y8, z8   // Linie von P7 zu P8\n            ]);\n            \n            if(drawPlanes === undefined) {\n                numberOfVisiblePlanes = 6;\n                surface = new Float32Array([\n                    x1, y1, z1, x2, y2, z2, x3, y3, z3, x2, y2, z2, x4, y4, z4, x3, y3, z3,\n                    x5, y5, z5, x6, y6, z6, x7, y7, z7, x6, y6, z6, x8, y8, z8, x7, y7, z7,\n                    x1, y1, z1, x5, y5, z5, x3, y3, z3, x7, y7, z7, x5, y5, z5, x3, y3, z3,\n                    x2, y2, z2, x6, y6, z6, x4, y4, z4, x8, y8, z8, x6, y6, z6, x4, y4, z4,\n                    x1, y1, z1, x2, y2, z2, x5, y5, z5, x6, y6, z6, x2, y2, z2, x5, y5, z5,\n                    x3, y3, z3, x4, y4, z4, x7, y7, z7, x8, y8, z8, x4, y4, z4, x7, y7, z7\n                ])\n            } else {\n                let surfaceData: number[] = [];\n                if (drawPlanes[0]) {\n                    numberOfVisiblePlanes++;\n                    surfaceData.push(\n                        x1, y1, z1, x2, y2, z2, x3, y3, z3, x2, y2, z2, x4, y4, z4, x3, y3, z3\n                    );\n                }\n                if (drawPlanes[1]) {\n                    numberOfVisiblePlanes++;\n                    surfaceData.push(\n                        x5, y5, z5, x6, y6, z6, x7, y7, z7, x6, y6, z6, x8, y8, z8, x7, y7, z7\n                    );\n                }\n                if (drawPlanes[2]) {\n                    numberOfVisiblePlanes++;\n                    surfaceData.push(\n                        x1, y1, z1, x5, y5, z5, x3, y3, z3, x7, y7, z7, x5, y5, z5, x3, y3, z3\n                    );\n                }\n                if (drawPlanes[3]) {\n                    numberOfVisiblePlanes++;\n                    surfaceData.push(\n                        x2, y2, z2, x6, y6, z6, x4, y4, z4, x8, y8, z8, x6, y6, z6, x4, y4, z4\n                    );\n                }\n                if (drawPlanes[4]) {\n                    numberOfVisiblePlanes++;\n                    surfaceData.push(\n                        x1, y1, z1, x2, y2, z2, x5, y5, z5, x6, y6, z6, x2, y2, z2, x5, y5, z5\n                    );\n                }\n                if (drawPlanes[5]) {\n                    numberOfVisiblePlanes++;\n                    surfaceData.push(\n                        x3, y3, z3, x4, y4, z4, x7, y7, z7, x8, y8, z8, x4, y4, z4, x7, y7, z7\n                    );\n                }\n                surface = new Float32Array(surfaceData);\n            }\n        }\n        \n\n        const colorLines = borderColor;\n\n        this._initialize = () => {\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_color = gl.getUniformLocation(this.program, \"cubeColor\") as WebGLUniformLocation;\n        };\n\n        const drawCubeLines = (vertices: Float32Array, color: Float32Array) => {\n            gl.lineWidth(5);\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.LINES, 0, 24);\n        };\n\n        const drawCube = (vertices: Float32Array, color: Float32Array) => {\n            gl.lineWidth(5);\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLES, 0, 6 * numberOfVisiblePlanes);\n        };\n        \n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            drawCubeLines(corners, colorLines);\n            drawCube(surface, color)\n        };\n\n        this._resize = () => {};\n        \n        this._dispose = () => {};\n    }\n\n    protected _getFragmentSource(): string {\n        return axisFragmentShader;\n    }\n\n    protected _getVertexSource(): string {\n        return axisVertexShader;\n    }\n    \n}\n\nexport { CubeVisualisationProgram }","import { Matrix4 } from \"./Matrix4\";\n\nclass Vector4 {\n    public readonly x: number;\n    public readonly y: number;\n    public readonly z: number;\n    public readonly w: number;\n\n    constructor(x: number = 0, y: number = 0, z: number = 0, w: number = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n\n    equals(v: Vector4): boolean {\n        if (this.x !== v.x) {\n            return false;\n        }\n        if (this.y !== v.y) {\n            return false;\n        }\n        if (this.z !== v.z) {\n            return false;\n        }\n        if (this.w !== v.w) {\n            return false;\n        }\n\n        return true;\n    }\n\n    add(v: number): Vector4;\n    add(v: Vector4): Vector4;\n    add(v: number | Vector4): Vector4 {\n        if (typeof v === \"number\") {\n            return new Vector4(this.x + v, this.y + v, this.z + v, this.w + v);\n        } else {\n            return new Vector4(this.x + v.x, this.y + v.y, this.z + v.z, this.w + v.w);\n        }\n    }\n\n    subtract(v: number): Vector4;\n    subtract(v: Vector4): Vector4;\n    subtract(v: number | Vector4): Vector4 {\n        if (typeof v === \"number\") {\n            return new Vector4(this.x - v, this.y - v, this.z - v, this.w - v);\n        } else {\n            return new Vector4(this.x - v.x, this.y - v.y, this.z - v.z, this.w - v.w);\n        }\n    }\n\n    multiply(v: number): Vector4;\n    multiply(v: Vector4): Vector4;\n    multiply(v: Matrix4): Vector4;\n    multiply(v: number | Vector4 | Matrix4): Vector4 {\n        if (typeof v === \"number\") {\n            return new Vector4(this.x * v, this.y * v, this.z * v, this.w * v);\n        } else if (v instanceof Vector4) {\n            return new Vector4(this.x * v.x, this.y * v.y, this.z * v.z, this.w * v.w);\n        } else {\n            return new Vector4(\n                this.x * v.buffer[0] + this.y * v.buffer[4] + this.z * v.buffer[8] + this.w * v.buffer[12],\n                this.x * v.buffer[1] + this.y * v.buffer[5] + this.z * v.buffer[9] + this.w * v.buffer[13],\n                this.x * v.buffer[2] + this.y * v.buffer[6] + this.z * v.buffer[10] + this.w * v.buffer[14],\n                this.x * v.buffer[3] + this.y * v.buffer[7] + this.z * v.buffer[11] + this.w * v.buffer[15],\n            );\n        }\n    }\n\n    dot(v: Vector4): number {\n        return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n    }\n\n    lerp(v: Vector4, t: number): Vector4 {\n        return new Vector4(\n            this.x + (v.x - this.x) * t,\n            this.y + (v.y - this.y) * t,\n            this.z + (v.z - this.z) * t,\n            this.w + (v.w - this.w) * t,\n        );\n    }\n\n    magnitude(): number {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    }\n\n    distanceTo(v: Vector4): number {\n        return Math.sqrt((this.x - v.x) ** 2 + (this.y - v.y) ** 2 + (this.z - v.z) ** 2 + (this.w - v.w) ** 2);\n    }\n\n    normalize(): Vector4 {\n        const length = this.magnitude();\n\n        return new Vector4(this.x / length, this.y / length, this.z / length, this.w / length);\n    }\n\n    flat(): number[] {\n        return [this.x, this.y, this.z, this.w];\n    }\n\n    clone(): Vector4 {\n        return new Vector4(this.x, this.y, this.z, this.w);\n    }\n\n    toString(): string {\n        return `[${this.flat().join(\", \")}]`;\n    }\n}\n\nexport { Vector4 };\n","import { Vector3 } from \"./Vector3\";\nimport {WebGLRenderer} from \"../renderers/WebGLRenderer\";\nimport {CubeVisualisationProgram} from \"../renderers/webgl/programs/individual/CubeVisualisationProgram\";\nimport {ShaderProgram} from \"../renderers/webgl/programs/ShaderProgram\";\nimport {Vector4} from \"./Vector4\";\n\nclass Box3 {\n    boxRenderProgram: ShaderProgram | undefined;\n    \n    constructor(\n        public min: Vector3,\n        public max: Vector3,\n    ) {}\n\n    public contains(point: Vector3) {\n        return (\n            point.x >= this.min.x &&\n            point.x <= this.max.x &&\n            point.y >= this.min.y &&\n            point.y <= this.max.y &&\n            point.z >= this.min.z &&\n            point.z <= this.max.z\n        );\n    }\n\n    public intersects(box: Box3) {\n        return (\n            this.max.x >= box.min.x &&\n            this.min.x <= box.max.x &&\n            this.max.y >= box.min.y &&\n            this.min.y <= box.max.y &&\n            this.max.z >= box.min.z &&\n            this.min.z <= box.max.z\n        );\n    }\n\n    public intersectsBox(box: Box3) {\n        return (\n            this.max.x >= box.min.x &&\n            this.min.x <= box.max.x &&\n            this.max.y >= box.min.y &&\n            this.min.y <= box.max.y &&\n            this.max.z >= box.min.z &&\n            this.min.z <= box.max.z\n        );\n    }\n\n    public intersectsBasedOnCenter(box: Box3) {\n        const centerA = this.center();\n        const centerB = box.center();\n\n        const sizeA = this.size();\n        const sizeB = box.size();\n\n        \n        return (\n            Math.abs(centerA.x - centerB.x) <= (sizeA.x / 2 + sizeB.x / 2) &&\n            Math.abs(centerA.y - centerB.y) <= (sizeA.y / 2 + sizeB.y / 2) &&\n            Math.abs(centerA.z - centerB.z) <= (sizeA.z / 2 + sizeB.z / 2)\n        );\n    }\n\n\n    public size() {\n        return this.max.subtract(this.min);\n    }\n\n    public center() {\n        return this.min.add(this.max).divide(2);\n    }\n\n    public expand(point: Vector3) {\n        this.min = this.min.min(point);\n        this.max = this.max.max(point);\n    }\n\n    public permute() {\n        const min = this.min;\n        const max = this.max;\n        this.min = new Vector3(Math.min(min.x, max.x), Math.min(min.y, max.y), Math.min(min.z, max.z));\n        this.max = new Vector3(Math.max(min.x, max.x), Math.max(min.y, max.y), Math.max(min.z, max.z));\n    }\n    \n    public surfaceArea(): number {\n        const width = this.max.x - this.min.x;\n        const height = this.max.y - this.min.y;\n        const depth = this.max.z - this.min.z;\n        return 2 * ((width * height) + (width * depth) + (height * depth));\n    }\n    \n    public drawBox(renderer: WebGLRenderer, color: Vector4 = new Vector4(0.0, 1.0, 0.0, 0.5), cornerColor: Vector4 = new Vector4(1.0, 0.0, 0.0, 1.0)) {\n        \n        this.permute();\n        let boxColor = new Float32Array([color.x, color.y, color.z, color.w]);\n        let lineColor = new Float32Array([cornerColor.x, cornerColor.y, cornerColor.z, cornerColor.w]);\n        let boxMin = new Float32Array([this.min.x, this.min.y, this.min.z]);\n        let boxMax = new Float32Array([this.max.x, this.max.y, this.max.z]);\n        \n        this.boxRenderProgram = new CubeVisualisationProgram(renderer, [], [boxMin, boxMax], boxColor, lineColor)\n        renderer.addProgram(this.boxRenderProgram);\n    }\n    \n    public ereaseBox(renderer: WebGLRenderer) {\n        if(this.boxRenderProgram !== undefined) {\n            renderer.removeProgram(this.boxRenderProgram);\n        }\n    }\n\n    expandByPoint(point: Vector3): void {\n        this.min = this.min.min(point);\n        this.max = this.max.max(point);\n    }\n\n    getCorners(): Vector3[] {\n        return [\n            new Vector3(this.min.x, this.min.y, this.min.z), // Near-Bottom-Left\n            new Vector3(this.max.x, this.min.y, this.min.z), // Near-Bottom-Right\n            new Vector3(this.min.x, this.max.y, this.min.z), // Near-Top-Left\n            new Vector3(this.max.x, this.max.y, this.min.z), // Near-Top-Right\n            new Vector3(this.min.x, this.min.y, this.max.z), // Far-Bottom-Left\n            new Vector3(this.max.x, this.min.y, this.max.z), // Far-Bottom-Right\n            new Vector3(this.min.x, this.max.y, this.max.z), // Far-Top-Left\n            new Vector3(this.max.x, this.max.y, this.max.z)  // Far-Top-Right\n        ];\n    }\n}\n\nexport { Box3 };\n","import {Object3D} from \"../core/Object3D\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Box3 } from \"../math/Box3\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport {Vector4} from \"../math/Vector4\";\nimport {SplatData} from \"./SplatData\";\n\nclass SingleSplat {\n\n    private readonly _index: number;\n    private _data: SplatData;\n\n    private readonly _bounds: Box3;\n\n    private readonly _defaultColor: Uint8Array;\n\n    recalculateBounds: () => void;\n    translate: (translation: Vector3) => void;\n    rotate: (rotation: Quaternion) => void;\n    scale: (scale: Vector3) => void;\n    \n    constructor(index: number, data: SplatData) { \n        this._index = index;\n        this._data = data;\n\n        this._bounds = new Box3(\n            new Vector3(Infinity, Infinity, Infinity),\n            new Vector3(-Infinity, -Infinity, -Infinity),\n        );\n        this._defaultColor = new Uint8Array(data.colors.subarray(index * 4, index * 4 + 4));\n\n        this.recalculateBounds = () => {\n            const pos = this.Position;\n            const scl = this.Scale;\n            \n            this._bounds.min = new Vector3(\n                pos[0] - scl[0],\n                pos[1] - scl[1],\n                pos[2] - scl[2]\n            );\n            this._bounds.max = new Vector3(\n                pos[0] + scl[0],\n                pos[1] + scl[1],\n                pos[2] + scl[2]\n            );\n        };\n\n\n        this.translate = (translation: Vector3) => {\n            const pos = this.Position;\n            pos[0] += translation.x;\n            pos[1] += translation.y;\n            pos[2] += translation.z;\n        };\n\n        this.rotate = (rotation: Quaternion) => {\n            const R = Matrix3.RotationFromQuaternion(rotation).buffer;\n            const pos = this.Position;\n\n            const x = pos[0];\n            const y = pos[1];\n            const z = pos[2];\n\n            pos[0] = R[0] * x + R[1] * y + R[2] * z;\n            pos[1] = R[3] * x + R[4] * y + R[5] * z;\n            pos[2] = R[6] * x + R[7] * y + R[8] * z;\n\n            const rot = this.Rotation;\n            const currentRotation = new Quaternion(rot[1], rot[2], rot[3], rot[0]);\n\n            const newRot = rotation.multiply(currentRotation);\n            rot[0] = newRot.w;\n            rot[1] = newRot.x;\n            rot[2] = newRot.y;\n            rot[3] = newRot.z;\n        };\n        \n        this.scale = (scale: Vector3) => {\n            const pos = this.Position;\n            const scl = this.Scale;\n\n            pos[0] *= scale.x;\n            pos[1] *= scale.y;\n            pos[2] *= scale.z;\n\n            scl[0] *= scale.x;\n            scl[1] *= scale.y;\n            scl[2] *= scale.z;\n        };\n        \n        this.recalculateBounds();\n    }\n\n    reattach(position: Float32Array, rotation: Float32Array, scale: Float32Array, color: Uint8Array, selection: Uint8Array) {\n        this._data.positions.set(position, this._index * 3);\n        this._data.rotations.set(rotation, this._index * 4);\n        this._data.scales.set(scale, this._index * 3);\n        this._data.colors.set(color, this._index * 4);\n        this._data.selection.set(selection, this._index);\n    }\n\n    get Selected() {\n        return this._data.selection[this._index];\n    }\n\n    set Selected(value: number) {\n        this._data.selection[this._index] = value;\n    }\n\n    get Rendered() {\n        return this._data.rendered[this._index];\n    }\n\n    set Rendered(value: number) {\n        this._data.rendered[this._index] = value;\n    }\n\n    get Position() {\n        const i = this._index * 3;\n        return this._data.positions.subarray(i, i + 3);\n    }\n\n    get Rotation() {\n        const i = this._index * 4;\n        return this._data.rotations.subarray(i, i + 4);\n    }\n\n    get Scale() {\n        const i = this._index * 3;\n        return this._data.scales.subarray(i, i + 3);\n    }\n    \n    set Color(colorVector: Uint8Array) {\n        const colorIndex = this._index * 4;\n        this._data.colors.set(colorVector, colorIndex);\n    }\n    get Color() {\n        const i = this._index * 4;\n        return this._data.colors.subarray(i, i + 4);\n    }\n    \n    ResetColor() {\n        this._data.colors.set(this._defaultColor,  this._index * 4);\n    }\n    \n    get bounds() {\n        return this._bounds;\n    }\n    \n    get PositionVec3() {\n        const pos = this.Position;\n        return new Vector3(pos[0], pos[1], pos[2]);\n    }\n    \n    get index() {\n        return this._index;\n    }\n    \n    get ScaleVec3() {\n        const scale = this.Scale;\n        return new Vector3(scale[0], scale[1], scale[2]);\n    }\n\n    setTransparency(alpha: number) {\n        this.Color[3] = Math.floor(alpha * this._defaultColor[3]);\n    }\n\n\n    setBlending(alpha: number) {\n        this.Color[3] = Math.floor(alpha * this.Color[3]);;\n    }\n}\n\nexport { SingleSplat };","class Constants {\n    static readonly BYTE_OFFSET_FLOAT: number = 4;\n    static readonly BYTE_OFFSET_DOUBLE: number = 8;\n\n    static readonly BYTE_OFFSET_INT: number = 4;\n}\n\nexport { Constants }","import { Box3 } from \"../../math/Box3\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Node } from \"./Node\";\nimport {Frustum} from \"../../math/Frustum\";\n\nconst b = new Box3(\n    new Vector3(Infinity, Infinity, Infinity),\n    new Vector3(-Infinity, -Infinity, -Infinity),\n);\n\nexport class OctreeIterator implements Iterator<Node>, Iterable<Node> {\n    \n    private root: Node;\n    \n    private region: Box3 | Frustum | null;\n    \n    private result!: IteratorResult<Node>;\n    \n    private trace!: Node[];\n    \n    private indices!: number[];\n    \n    constructor(root: Node, region: Box3 | Frustum | null = null) {\n        this.root = root;\n        this.region = region;\n        this.reset();\n    }\n    \n    reset() {\n        const root = this.root;\n        \n        this.trace = [];\n        this.indices = [];\n        \n        if(root !== null) {\n            b.min = root.min;\n            b.max = root.max;\n            \n            if(this.region === null || this.region.intersectsBox(b)) {\n                this.trace.push(root);\n                this.indices.push(0);\n            }\n        }\n        \n        this.result = {\n            done: false\n        } as IteratorResult<Node>;\n        \n        return this;\n    }\n\n    next(): IteratorResult<Node> {\n        const region = this.region;\n        const indices = this.indices;\n        const trace = this.trace;\n        \n        let octant = null;\n        let depth = trace.length - 1;\n        \n        while(octant === null && depth >= 0) {\n            const index = indices[depth]++;\n            const children = trace[depth].children;\n            \n            if(index < 8) {\n                if(children !== undefined && children !== null) {\n                    const child = children[index];\n                    \n                    if(region !== null) {\n                        b.min = child.min;\n                        b.max = child.max;\n                        \n                        if(!region.intersectsBox(b)) {\n                            continue;\n                        }\n                    }\n                    \n                    trace.push(child);\n                    indices.push(0);\n                    \n                    ++depth;\n                } else {\n                    octant = trace.pop();\n                    indices.pop();\n                }\n            } else {\n                trace.pop();\n                indices.pop();\n                \n                --depth;\n            }\n        }\n        \n        this.result.value = octant;\n        this.result.done = (octant === null);\n        \n        return this.result;\n    }\n    \n    [Symbol.iterator](): Iterator<Node> {\n        return this;\n    }\n}\n","import {Vector3} from \"./Vector3\";\nimport {Box3} from \"./Box3\";\nimport {Plane} from \"./Plane\";\n\nconst _vector:Vector3 = new Vector3();\nconst _segCenter:Vector3 = new Vector3();\nconst _segDir:Vector3 = new Vector3();\nconst _diff:Vector3 = new Vector3();\n\nconst _edge1:Vector3 = new Vector3();\nconst _edge2:Vector3 = new Vector3();\nconst _normal:Vector3 = new Vector3();\nclass NewRay {\n    public origin: Vector3;\n    public direction: Vector3;\n    \n    constructor(origin:Vector3 = new Vector3(), direction:Vector3 = new Vector3(0, 0, -1)) {\n        this.origin = origin;\n        this.direction = direction;\n    }\n    \n    set(origin:Vector3, direction:Vector3) {\n        this.origin.copy( origin );\n        this.direction.copy( direction );\n        \n        return this;\n    }\n    \n    copy( ray: NewRay ) {\n        this.origin.copy( ray.origin );\n        this.direction.copy( ray.direction );\n\n        return this;\n    }\n\n    at( t: number, target:Vector3 = new Vector3() ) {\n\n        return target.copy( this.origin ).addScaledVector( this.direction, t );\n\n    }\n\n    intersectPlane( plane: Plane, target: Vector3 ) {\n\n        const t = this.distanceToPlane( plane );\n\n        if ( t === null ) {\n\n            return null;\n\n        }\n\n        return this.at( t, target );\n\n    }\n\n    distanceToPlane( plane: Plane ) {\n\n        const denominator = plane.normal.dot( this.direction );\n\n        if ( denominator === 0 ) {\n\n            // line is coplanar, return origin\n            if ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n                return 0;\n\n            }\n\n            // Null is preferable to undefined since undefined means.... it is undefined\n\n            return null;\n\n        }\n\n        const t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n        // Return if the ray never intersects the plane\n\n        return t >= 0 ? t : null;\n\n    }\n\n    lookAt( v:Vector3 ) {\n\n        this.direction.copy( v ).sub( this.origin ).normalize();\n\n        return this;\n\n    }\n\n    recast( t:number ) {\n\n        this.origin.copy( this.at( t, _vector ) );\n\n        return this;\n\n    }\n\n    closestPointToPoint( point:Vector3, target:Vector3 ) {\n\n        target.subVectors( point, this.origin );\n\n        const directionDistance = target.dot( this.direction );\n\n        if ( directionDistance < 0 ) {\n\n            return target.copy( this.origin );\n\n        }\n\n        return target.copy( this.origin ).addScaledVector( this.direction, directionDistance );\n\n    }\n\n    distanceToPoint( point:Vector3 ) {\n\n        return Math.sqrt( this.distanceSqToPoint( point ) );\n\n    }\n\n    distanceSqToPoint( point:Vector3 ) {\n\n        const directionDistance = _vector.subVectors( point, this.origin ).dot( this.direction );\n\n        // point behind the ray\n\n        if ( directionDistance < 0 ) {\n\n            return this.origin.distanceToSquared( point );\n\n        }\n\n        _vector.copy( this.origin ).addScaledVector( this.direction, directionDistance );\n\n        return _vector.distanceToSquared( point );\n\n    }\n\n    intersectBox( box: Box3, target:Vector3 ) {\n\n        let tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n        const invdirx = 1 / this.direction.x,\n            invdiry = 1 / this.direction.y,\n            invdirz = 1 / this.direction.z;\n\n        const origin = this.origin;\n\n        if ( invdirx >= 0 ) {\n\n            tmin = ( box.min.x - origin.x ) * invdirx;\n            tmax = ( box.max.x - origin.x ) * invdirx;\n\n        } else {\n\n            tmin = ( box.max.x - origin.x ) * invdirx;\n            tmax = ( box.min.x - origin.x ) * invdirx;\n\n        }\n\n        if ( invdiry >= 0 ) {\n\n            tymin = ( box.min.y - origin.y ) * invdiry;\n            tymax = ( box.max.y - origin.y ) * invdiry;\n\n        } else {\n\n            tymin = ( box.max.y - origin.y ) * invdiry;\n            tymax = ( box.min.y - origin.y ) * invdiry;\n\n        }\n\n        if ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n        if ( tymin > tmin || isNaN( tmin ) ) tmin = tymin;\n\n        if ( tymax < tmax || isNaN( tmax ) ) tmax = tymax;\n\n        if ( invdirz >= 0 ) {\n\n            tzmin = ( box.min.z - origin.z ) * invdirz;\n            tzmax = ( box.max.z - origin.z ) * invdirz;\n\n        } else {\n\n            tzmin = ( box.max.z - origin.z ) * invdirz;\n            tzmax = ( box.min.z - origin.z ) * invdirz;\n\n        }\n\n        if ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n        if ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n        if ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n        //return point closest to the ray (positive side)\n\n        if ( tmax < 0 ) return null;\n\n        return this.at( tmin >= 0 ? tmin : tmax, target );\n\n    }\n\n    intersectsBox( box:Box3 ) {\n\n        return this.intersectBox( box, _vector ) !== null;\n\n    }\n\n    equals( ray: NewRay ) {\n\n        return ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n    }\n\n    clone() {\n        const Constructor = this.constructor as new () => this;\n        return new Constructor().copy(this);\n    }\n}\n\nexport { NewRay }","import { Node } from \"../core/Node.js\";\nimport { RaycastingFlags } from \"./RaycastingFlags.js\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Box3 } from \"../../math/Box3\";\nimport {NewRay} from \"../../math/NewRay\";\n\nconst v = new Vector3();\nconst b = new Box3(\n    new Vector3(Infinity, Infinity, Infinity),\n    new Vector3(-Infinity, -Infinity, -Infinity),\n);\nconst d = new Box3(\n    new Vector3(Infinity, Infinity, Infinity),\n    new Vector3(-Infinity, -Infinity, -Infinity),\n);\nconst r = new NewRay();\n\n\nexport function intersectOctree(octree: Node, ray: NewRay, flags: RaycastingFlags): number[] | null {\n\n    // Translate the octant extents to the scene origin.\n    const min = b.min.set(0, 0, 0);\n    const max = b.max.subVectors(octree.max, octree.min);\n\n    const dimensions = octree.getDimensions(d.min);\n    const halfDimensions = d.max.copy(dimensions).multiply(0.5);\n\n    const origin = r.origin.copy(ray.origin);\n    const direction = r.direction.copy(ray.direction);\n\n    // Translate the ray to the center of the octant.\n    origin.sub(octree.getCenter(v)).add(halfDimensions);\n\n    // Reset all flags.\n    flags.value = 0;\n\n    // Handle rays with negative directions and prevent division by zero.\n    if(direction.x < 0.0) {\n\n        origin.x = dimensions.x - origin.x;\n        direction.x = -direction.x;\n        flags.value |= 4;\n\n    } else if(direction.x === 0.0) {\n\n        direction.x = Number.EPSILON;\n\n    }\n\n    if(direction.y < 0.0) {\n\n        origin.y = dimensions.y - origin.y;\n        direction.y = -direction.y;\n        flags.value |= 2;\n\n    } else if(direction.y === 0.0) {\n\n        direction.y = Number.EPSILON;\n\n    }\n\n    if(direction.z < 0.0) {\n\n        origin.z = dimensions.z - origin.z;\n        direction.z = -direction.z;\n        flags.value |= 1;\n\n    } else if(direction.z === 0.0) {\n\n        direction.z = Number.EPSILON;\n\n    }\n\n    // Improve IEEE double stability.\n    const invDirX = 1.0 / direction.x;\n    const invDirY = 1.0 / direction.y;\n    const invDirZ = 1.0 / direction.z;\n\n    // Project the ray to the octant's boundaries.\n    const tx0 = (min.x - origin.x) * invDirX;\n    const tx1 = (max.x - origin.x) * invDirX;\n    const ty0 = (min.y - origin.y) * invDirY;\n    const ty1 = (max.y - origin.y) * invDirY;\n    const tz0 = (min.z - origin.z) * invDirZ;\n    const tz1 = (max.z - origin.z) * invDirZ;\n\n    // Check if the ray hits the octree.\n    const hit = (Math.max(tx0, ty0, tz0) < Math.min(tx1, ty1, tz1));\n    return hit ? [tx0, ty0, tz0, tx1, ty1, tz1] : null;\n\n}","import { RaycastingFlags } from \"./RaycastingFlags\";\nimport { Node } from \"./Node\";\nimport {Ray} from \"../../math/Ray\";\nimport { intersectOctree } from \"./intersectOctree\";\nimport {NewRay} from \"../../math/NewRay\";\n\nconst flags = new RaycastingFlags();\n\nconst octantTable = [\n\n    new Uint8Array([4, 2, 1]),\n    new Uint8Array([5, 3, 8]),\n    new Uint8Array([6, 8, 3]),\n    new Uint8Array([7, 8, 8]),\n    new Uint8Array([8, 6, 5]),\n    new Uint8Array([8, 7, 8]),\n    new Uint8Array([8, 8, 7]),\n    new Uint8Array([8, 8, 8])\n\n];\n\nexport function findNextOctant(currentOctant: number, tx1: number, ty1: number, tz1: number): number {\n\n    let min: number;\n    let exit: number;\n\n    // Find the exit plane.\n    if(tx1 < ty1) {\n\n        min = tx1;\n        exit = 0; // YZ-plane.\n\n    } else {\n\n        min = ty1;\n        exit = 1; // XZ-plane.\n\n    }\n\n    if(tz1 < min) {\n\n        exit = 2; // XY-plane.\n\n    }\n\n    return octantTable[currentOctant][exit];\n\n}\n\nfunction findEntryOctant(tx0: number, ty0: number, tz0: number, txm: number, tym: number, tzm: number): number {\n\n    let entry = 0;\n\n    // Find the entry plane.\n    if(tx0 > ty0 && tx0 > tz0) {\n\n        // YZ-plane.\n        if(tym < tx0) {\n\n            entry |= 2;\n\n        }\n\n        if(tzm < tx0) {\n\n            entry |= 1;\n\n        }\n\n    } else if(ty0 > tz0) {\n\n        // XZ-plane.\n        if(txm < ty0) {\n\n            entry |= 4;\n\n        }\n\n        if(tzm < ty0) {\n\n            entry |= 1;\n\n        }\n\n    } else {\n\n        // XY-plane.\n        if(txm < tz0) {\n\n            entry |= 4;\n\n        }\n\n        if(tym < tz0) {\n\n            entry |= 2;\n\n        }\n\n    }\n\n    return entry;\n\n}\n\nfunction raycastOctant(node: Node, tx0: number, ty0: number, tz0: number, tx1: number, ty1: number, tz1: number, result: Node[]): void {\n    if(tx1 >= 0.0 && ty1 >= 0.0 && tz1 >= 0.0) {\n\n        const c = node.children;\n\n        if(c === null || c === undefined) {\n\n            // Leaf.\n            result.push(node);\n\n        } else {\n\n            // Calculate mean values.\n            const txm = 0.5 * (tx0 + tx1);\n            const tym = 0.5 * (ty0 + ty1);\n            const tzm = 0.5 * (tz0 + tz1);\n\n            const f = flags.value;\n            let currentOctant = findEntryOctant(tx0, ty0, tz0, txm, tym, tzm);\n\n            /* The possibilities for the next node are passed in the same respective\n            order as the t-values. Hence, if the first value is found to be the\n            greatest, the fourth one will be returned. If the second value is the\n            greatest, the fifth one will be returned, etc. */\n\n            while(currentOctant < 8) {\n\n                switch(currentOctant) {\n\n                    case 0:\n                        raycastOctant(c[f], tx0, ty0, tz0, txm, tym, tzm, result);\n                        currentOctant = findNextOctant(currentOctant, txm, tym, tzm);\n                        break;\n\n                    case 1:\n                        raycastOctant(c[f ^ 1], tx0, ty0, tzm, txm, tym, tz1, result);\n                        currentOctant = findNextOctant(currentOctant, txm, tym, tz1);\n                        break;\n\n                    case 2:\n                        raycastOctant(c[f ^ 2], tx0, tym, tz0, txm, ty1, tzm, result);\n                        currentOctant = findNextOctant(currentOctant, txm, ty1, tzm);\n                        break;\n\n                    case 3:\n                        raycastOctant(c[f ^ 3], tx0, tym, tzm, txm, ty1, tz1, result);\n                        currentOctant = findNextOctant(currentOctant, txm, ty1, tz1);\n                        break;\n\n                    case 4:\n                        raycastOctant(c[f ^ 4], txm, ty0, tz0, tx1, tym, tzm, result);\n                        currentOctant = findNextOctant(currentOctant, tx1, tym, tzm);\n                        break;\n\n                    case 5:\n                        raycastOctant(c[f ^ 5], txm, ty0, tzm, tx1, tym, tz1, result);\n                        currentOctant = findNextOctant(currentOctant, tx1, tym, tz1);\n                        break;\n\n                    case 6:\n                        raycastOctant(c[f ^ 6], txm, tym, tz0, tx1, ty1, tzm, result);\n                        currentOctant = findNextOctant(currentOctant, tx1, ty1, tzm);\n                        break;\n\n                    case 7:\n                        raycastOctant(c[f ^ 7], txm, tym, tzm, tx1, ty1, tz1, result);\n                        // Far top right octant. No other octants can be reached from here.\n                        currentOctant = 8;\n                        break;\n\n                }\n\n            }\n\n        }\n\n    }\n}\n\nexport class OctreeRaycaster {\n    \n    static intersectOctree(node: Node, ray: NewRay): Node[] {\n\n        const result: Node[] = [];\n        const t = intersectOctree(node, ray, flags);\n\n        if(t !== null) {\n\n            raycastOctant(node, t[0], t[1], t[2], t[3], t[4], t[5], result);\n\n        }\n\n        return result;\n\n    }\n\n}","export class RaycastingFlags {\n    \n    value: number;\n\n    constructor() {\n\n        this.value = 0;\n\n    }\n\n}","import { Tree } from \"./core/Tree\";\nimport { Node } from \"./core/Node\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Box3 } from \"../math/Box3\";\nimport { OctreeIterator } from \"./core/OctreeIterator\";\nimport { NewRaycaster } from \"../utils/Raycaster\";\nimport {OctreeRaycaster} from \"./core/OctreeRaycaster\";\nimport {Frustum} from \"../math/Frustum\";\nimport {WebGLRenderer} from \"../renderers/WebGLRenderer\";\n\nconst b = new Box3(\n    new Vector3(Infinity, Infinity, Infinity),\n    new Vector3(-Infinity, -Infinity, -Infinity),\n);\n\nfunction getDepth(node: Node): number {\n    const children = node.children;\n    \n    let result = 0;\n    \n    if(children !== undefined && children !== null) {\n        for(let i = 0; i < children.length; ++i) {\n            const d = 1 + getDepth(children[i]);\n            \n            if(d > result) {\n                result = d;\n            }\n        }\n    }\n    \n    return result;\n}\n\nfunction cull(node: Node, region: Box3 | Frustum, result: Node[]): void {\n    const children = node.children;\n    \n    b.min = node.min;\n    b.max = node.max;\n    \n    if(region.intersectsBox(b)) {\n        if(children !== undefined && children !== null) {\n            for(let i = 0; i < children.length; ++i) {\n                cull(children[i], region, result);\n            }\n        } else {\n            result.push(node);\n        }\n    }\n}\n\nfunction findNodesByLevel(node: Node, level: number, depth: number, result: Node[]): void {\n    const children = node.children;\n    \n    if(depth === level) {\n        result.push(node);\n    } else if(children !== undefined && children !== null) {\n        \n        ++depth;\n        \n        for(let i = 0; i < children.length; ++i) {\n            findNodesByLevel(children[i], level, depth, result)\n        }\n    }\n}\n\nexport class Octree implements Tree, Iterable<Node> {\n    protected root: Node;\n    \n    constructor(root: Node) {\n        this.root = root;\n    }\n    \n    get min(): Vector3 {\n        return this.root.min;\n    }\n    \n    get max(): Vector3 {\n        return this.root.max;\n    }\n    \n    get children(): Node[] | null {\n        return this.root.children || null;\n    }\n    \n    getCenter(result: Vector3): Vector3 {\n        return this.root.getCenter(result);\n    }\n    \n    getDimensions(result: Vector3): Vector3 {\n        return this.root.getDimensions(result);\n    }\n    \n    cull(region: Box3 | Frustum): Node[] {\n        const result: Node[] = []\n        cull(this.root, region, result);\n        return result;\n    }\n    \n    getDepth(): number {\n        return getDepth(this.root);\n    }\n    \n    findNodesByLevel(level: number): Node[] {\n        const result: Node[] = [];\n        findNodesByLevel(this.root, level, 0, result);\n        return result;\n    }\n    \n    getIntersectingNodes(raycaster: NewRaycaster): Node[] {\n        return OctreeRaycaster.intersectOctree(this.root, raycaster.ray);\n    }\n    \n    leaves(region: Box3 | Frustum | null = null): Iterator<Node> {\n        return new OctreeIterator(this.root, region);\n    }\n    \n    [Symbol.iterator](): Iterator<Node> {\n        return new OctreeIterator(this.root);\n    }\n}","/**\n * A binary pattern that describes the standard octant layout:\n *\n * ```text\n *    3____7\n *  2/___6/|\n *  | 1__|_5\n *  0/___4/\n * ```\n *\n * This common layout is crucial for positional assumptions.\n */\n\nexport const layout = [\n\n    new Uint8Array([0, 0, 0]),\n    new Uint8Array([0, 0, 1]),\n    new Uint8Array([0, 1, 0]),\n    new Uint8Array([0, 1, 1]),\n\n    new Uint8Array([1, 0, 0]),\n    new Uint8Array([1, 0, 1]),\n    new Uint8Array([1, 1, 0]),\n    new Uint8Array([1, 1, 1])\n\n];","import {Node} from \"./Node\";\nimport {DataContainer} from \"./DataContainer\";\nimport {Vector3} from \"../../math/Vector3\";\nimport {layout} from \"./layout\";\n\nconst c = new Vector3();\nexport class Octant<T> implements Node, DataContainer<T> {\n    min: Vector3;\n    max: Vector3;\n    children: Node[] | null;\n    data: T | null;\n    \n    constructor(min = new Vector3(), max = new Vector3()) {\n        this.min = min;\n        this.max = max;\n        this.children = null;\n        this.data = null;\n    }\n    \n    getCenter(result: Vector3): Vector3 {\n        return result.addVectors(this.min, this.max).multiply(0.5)\n    }\n    \n    getDimensions(result: Vector3): Vector3 {\n        return result.subVectors(this.max, this.min);\n    }\n    \n    split(): void {\n        const min = this.min;\n        const max = this.max;\n        const mid = this.getCenter(c);\n        \n        const children: Node[] = this.children = [];\n        \n        for(let i = 0; i < 8; ++i) {\n            const combination = layout[i];\n            const child = new (<typeof Octant> this.constructor)();\n            \n            child.min.set(\n                (combination[0] === 0) ? min.x : mid.x,\n                (combination[1] === 0) ? min.y : mid.y,\n                (combination[2] === 0) ? min.z : mid.z\n            );\n            \n            child.max.set(\n                (combination[0] === 0) ? mid.x : max.x,\n                (combination[1] === 0) ? mid.y : max.y,\n                (combination[2] === 0) ? mid.z : max.z\n            );\n            \n            children[i] = child;\n        }\n    }\n}","import { DataContainer } from \"../core/DataContainer\";\nimport { Vector3 } from \"../../math/Vector3\";\n\nexport class PointContainer<T> implements DataContainer<T> {\n\n    data: T | null;\n    \n\n    point: Vector3 | null;\n\n\n    distance: number;\n    \n    constructor(point: Vector3 | null = null, data: T | null = null, distance = 0.0) {\n\n        this.point = point;\n        this.data = data;\n        this.distance = distance;\n\n    }\n\n}","import { PointContainer } from \"./PointContainer\";\nimport { Vector3 } from \"../../math/Vector3\";\n\nexport class RayPointIntersection<T> extends PointContainer<T> {\n    \n    distanceToRay: number;\n    \n\n    constructor(distanceToOrigin: number, distanceToRay: number, point: Vector3, data: T | null = null) {\n\n        super(point, data, distanceToOrigin);\n        this.distanceToRay = distanceToRay;\n\n    }\n\n}","import { Vector3 } from \"../../math/Vector3\";\nimport { NewRaycaster } from \"../../utils/Raycaster\";\nimport { RayPointIntersection } from \"./RayPointIntersection\";\n\nexport class PointData<T> {\n    points: Vector3[];\n    \n    data: T[];\n\n    constructor() {\n        this.points = [];\n        this.data = [];\n    }\n    \n    testPoints(raycaster: NewRaycaster, result: RayPointIntersection<T>[]): void {\n        const threshold = (raycaster.params.Points !== undefined) ? raycaster.params.Points.threshold : 0;\n        const thresholdSq = threshold * threshold;\n        const ray = raycaster.ray;\n        \n        const points = this.points;\n        const data = this.data;\n\n        for(let i = 0, l = points.length; i < l; ++i) {\n\n            const point = points[i];\n            const distanceToRaySq = ray.distanceSqToPoint(point);\n\n            if(distanceToRaySq < thresholdSq) {\n\n                const closestPoint = ray.closestPointToPoint(point, new Vector3());\n                const distance = ray.origin.distanceTo(closestPoint);\n\n                if(distance >= raycaster.near && distance <= raycaster.far) {\n\n                    result.push(new RayPointIntersection<T>(distance, Math.sqrt(distanceToRaySq), closestPoint, data[i]));\n\n                }\n\n            }\n\n        }\n    }\n}","import {Vector3} from \"../../math/Vector3\";\nimport {Octant} from \"../core/Octant\";\nimport {PointData} from \"./PointData\";\n\nconst p = new Vector3();\n\nexport class PointOctant<T> extends Octant<PointData<T>> {\n    constructor(min: Vector3, max: Vector3) {\n        super(min, max);\n    }\n\n    distanceToSquared(point: Vector3): number {\n\n        const clampedPoint = p.copy(point).clamp(this.min, this.max);\n        return clampedPoint.sub(point).lengthSq();\n\n    }\n\n    distanceToCenterSquared(point: Vector3): number {\n\n        const center = this.getCenter(p);\n\n        const dx = point.x - center.x;\n        const dy = point.y - center.x;\n        const dz = point.z - center.z;\n\n        return dx * dx + dy * dy + dz * dz;\n\n    }\n\n    contains(point: Vector3, bias: number): boolean {\n\n        const min = this.min;\n        const max = this.max;\n\n        return (\n            point.x >= min.x - bias &&\n            point.y >= min.y - bias &&\n            point.z >= min.z - bias &&\n            point.x <= max.x + bias &&\n            point.y <= max.y + bias &&\n            point.z <= max.z + bias\n        );\n    }\n\n    redistribute(bias: number): void {\n\n        const children = this.children;\n        const pointData = this.data;\n\n        if(children !== null && pointData !== null) {\n\n            const points = pointData.points;\n            const data = pointData.data;\n\n            for(let i = 0, il = points.length; i < il; ++i) {\n\n                const point = points[i];\n                const entry = data[i];\n\n                for(let j = 0, jl = children.length; j < jl; ++j) {\n\n                    const child = children[j] as PointOctant<T>;\n\n                    if(child.contains(point, bias)) {\n\n                        if(child.data === null) {\n\n                            child.data = new PointData<T>();\n\n                        }\n\n                        const childData = child.data;\n                        childData.points.push(point);\n                        childData.data.push(entry);\n\n                        break;\n\n                    }\n\n                }\n\n            }\n\n            this.data = null;\n\n        }\n\n    }\n\n    merge(): void {\n\n        const children = this.children;\n\n        if(children !== null) {\n\n            const pointData = new PointData<T>();\n\n            for(let i = 0, l = children.length; i < l; ++i) {\n\n                const child = children[i] as PointOctant<T>;\n                const childData = child.data;\n\n                if(childData !== null) {\n\n                    pointData.points = pointData.points.concat(childData.points);\n                    pointData.data = pointData.data.concat(childData.data);\n\n                }\n\n            }\n\n            this.children = null;\n            this.data = pointData;\n\n        }\n\n    }\n\n}","import { Octree } from \"../Octree\";\nimport {Vector3} from \"../../math/Vector3\";\nimport {PointOctant} from \"./PointOctant\";\nimport {PointContainer} from \"./PointContainer\";\nimport {RayPointIntersection} from \"./RayPointIntersection\";\nimport {NewRaycaster} from \"../../utils/Raycaster\";\nimport {PointData} from \"./PointData\";\n\nfunction countPoints<T>(octant: PointOctant<T>): number {\n\n    const children = octant.children;\n    let result = 0;\n\n    if(children !== null) {\n\n        for(let i = 0, l = children.length; i < l; ++i) {\n\n            result += countPoints(children[i] as PointOctant<T>);\n\n        }\n\n    } else if(octant.data !== null) {\n\n        const pointData = octant.data;\n        result = pointData.points.length;\n\n    }\n\n    return result;\n\n}\n\nfunction set<T>(point: Vector3, data: T, octree: PointOctree<T>, octant: PointOctant<T> | null, depth: number): boolean {\n\n    let exists = false;\n    let done = false;\n\n    if(octant !== null && octant.contains(point, octree.getBias())) {\n\n        let children = octant.children;\n\n        if(children === null) {\n\n            let index = 0;\n\n            if(octant.data === null) {\n\n                octant.data = new PointData<T>();\n\n            } else {\n\n                const pointData = octant.data;\n                const points = pointData.points;\n\n                for(let i = 0, l = points.length; !exists && i < l; ++i) {\n\n                    exists = points[i].equals(point);\n                    index = i;\n\n                }\n\n            }\n\n            const pointData = octant.data;\n\n            if(exists) {\n\n                pointData.data[index] = data;\n                done = true;\n\n            } else if(pointData.points.length < octree.getMaxPoints() || depth === octree.getMaxDepth()) {\n\n                pointData.points.push(point.clone());\n                pointData.data.push(data);\n                done = true;\n\n            } else {\n\n                octant.split();\n                octant.redistribute(octree.getBias());\n                children = octant.children;\n\n            }\n\n        }\n\n        if(children !== null) {\n\n            ++depth;\n\n            for(let i = 0, l = children.length; !done && i < l; ++i) {\n\n                done = set(point, data, octree, children[i] as PointOctant<T>, depth);\n\n            }\n\n        }\n\n    }\n\n    return done;\n}\n\nfunction remove<T>(point: Vector3, octree: PointOctree<T>, octant: PointOctant<T>,\n                   parent: PointOctant<T> | null): T | null {\n\n    const children = octant.children;\n    let result = null;\n\n    if(octant.contains(point, octree.getBias())) {\n\n        if(children !== null) {\n\n            for(let i = 0, l = children.length; result === null && i < l; ++i) {\n\n                result = remove(point, octree, children[i] as PointOctant<T>, octant);\n\n            }\n\n        } else if(octant.data !== null) {\n\n            const pointData = octant.data;\n            const points = pointData.points;\n            const data = pointData.data;\n\n            for(let i = 0, l = points.length; i < l; ++i) {\n\n                if(points[i].equals(point)) {\n\n                    const last = l - 1;\n                    result = data[i];\n\n                    // If the point is NOT the last one in the array:\n                    if(i < last) {\n\n                        // Overwrite with the last point and data entry.\n                        points[i] = points[last];\n                        data[i] = data[last];\n\n                    }\n\n                    // Drop the last entry.\n                    points.pop();\n                    data.pop();\n\n                    if(parent !== null && countPoints(parent) <= octree.getMaxPoints()) {\n\n                        parent.merge();\n\n                    }\n\n                    break;\n\n                }\n\n            }\n\n        }\n\n    }\n\n    return result;\n}\n\nfunction get<T>(point: Vector3, octree: PointOctree<T>, octant: PointOctant<T>): T | null {\n\n    const children = octant.children;\n    let result = null;\n\n    if(octant.contains(point, octree.getBias())) {\n\n        if(children !== null) {\n\n            for(let i = 0, l = children.length; result === null && i < l; ++i) {\n\n                result = get(point, octree, children[i] as PointOctant<T>);\n\n            }\n\n        } else if(octant.data !== null) {\n\n            const pointData = octant.data;\n            const points = pointData.points;\n            const data = pointData.data;\n\n            for(let i = 0, l = points.length; result === null && i < l; ++i) {\n\n                if(point.equals(points[i])) {\n\n                    result = data[i];\n\n                }\n\n            }\n\n        }\n\n    }\n\n    return result;\n}\n\nfunction move<T>(point: Vector3, position: Vector3, octree: PointOctree<T>,\n                 octant: PointOctant<T>, parent: PointOctant<T> | null, depth: number): T | null {\n\n    const children = octant.children;\n    let result = null;\n\n    if(octant.contains(point, octree.getBias())) {\n\n        if(octant.contains(position, octree.getBias())) {\n\n            // The point and the new position both fall into the current octant.\n            if(children !== null) {\n\n                ++depth;\n\n                for(let i = 0, l = children.length; result === null && i < l; ++i) {\n\n                    const child = children[i] as PointOctant<T>;\n                    result = move(point, position, octree, child, octant, depth);\n\n                }\n\n            } else if(octant.data !== null) {\n\n                // No divergence - the point can be updated in place.\n                const pointData = octant.data;\n                const points = pointData.points;\n                const data = pointData.data;\n\n                for(let i = 0, l = points.length; i < l; ++i) {\n\n                    if(point.equals(points[i])) {\n\n                        // The point exists! Update its position.\n                        points[i].copy(position);\n                        result = data[i];\n                        break;\n\n                    }\n\n                }\n\n            }\n\n        } else {\n\n            // Retrieve the point and remove it.\n            result = remove(point, octree, octant, parent);\n\n            // Go back to the parent octant and add the updated point.\n            set(position, result, octree, parent, depth - 1);\n\n        }\n\n    }\n\n    return result;\n\n}\n\n\nfunction findNearestPoint<T>(point: Vector3, maxDistance: number,\n                             skipSelf: boolean, octant: PointOctant<T>): PointContainer<T> | null {\n\n    interface SortableOctant<T> {\n\n        octant: PointOctant<T>;\n        distance: number;\n\n    }\n\n    let result = null;\n    let bestDistance = maxDistance;\n\n    if(octant.children !== null) {\n\n        // Sort the children: smallest distance to the point first, ASC.\n        const sortedChildren: SortableOctant<T>[] = octant.children.map((child) => {\n\n            // Precompute distances.\n            const octant = child as PointOctant<T>;\n\n            return {\n                distance: octant.distanceToCenterSquared(point),\n                octant\n            };\n\n        }).sort((a, b) => a.distance - b.distance);\n\n        // Traverse from closest to furthest.\n        for(let i = 0, l = sortedChildren.length; i < l; ++i) {\n\n            const child = sortedChildren[i].octant;\n\n            if(child.contains(point, bestDistance)) {\n\n                const intermediateResult = findNearestPoint(\n                    point, bestDistance, skipSelf, child\n                );\n\n                if(intermediateResult !== null) {\n\n                    bestDistance = intermediateResult.distance;\n                    result = intermediateResult;\n\n                    if(bestDistance === 0.0) {\n\n                        break;\n\n                    }\n\n                }\n\n            }\n\n        }\n\n    } else if(octant.data !== null) {\n\n        const pointData = octant.data;\n        const points = pointData.points;\n        const data = pointData.data;\n\n        let index = -1;\n\n        for(let i = 0, l = points.length; i < l; ++i) {\n\n            if(points[i].equals(point)) {\n\n                if(!skipSelf) {\n\n                    bestDistance = 0.0;\n                    index = i;\n                    break;\n\n                }\n\n            } else {\n\n                const distance = point.distanceTo(points[i]);\n\n                if(distance < bestDistance) {\n\n                    bestDistance = distance;\n                    index = i;\n\n                }\n\n            }\n\n        }\n\n        if(index >= 0) {\n\n            result = new PointContainer(points[index], data[index], bestDistance);\n\n        }\n\n    }\n\n    return result;\n\n}\n\nfunction findPoints<T>(point: Vector3, radius: number, skipSelf: boolean,\n                       octant: PointOctant<T>, result: PointContainer<T>[]): void {\n\n    const children = octant.children;\n\n    if(children !== null) {\n\n        for(let i = 0, l = children.length; i < l; ++i) {\n\n            const child = children[i] as PointOctant<T>;\n\n            if(child.contains(point, radius)) {\n\n                findPoints(point, radius, skipSelf, child, result);\n\n            }\n\n        }\n\n    } else if(octant.data !== null) {\n\n        const pointData = octant.data;\n        const points = pointData.points;\n        const data = pointData.data;\n\n        for(let i = 0, l = points.length; i < l; ++i) {\n\n            const p = points[i];\n\n            if(p.equals(point)) {\n\n                if(!skipSelf) {\n\n                    result.push(new PointContainer(p.clone(), data[i], 0.0));\n\n                }\n\n            } else {\n\n                const rSq = radius * radius;\n                const dSq = p.distanceToSquared(point);\n\n                if(dSq <= rSq) {\n\n                    result.push(new PointContainer(p.clone(), data[i], Math.sqrt(dSq)));\n\n                }\n\n            }\n\n        }\n\n    }\n\n}\n\n\nexport class PointOctree<T> extends Octree {\n    private bias: number;\n    \n    private maxPoints: number;\n    \n    private maxDepth: number;\n    \n    constructor(min: Vector3, max: Vector3, bias = 0.0, maxPoints = 8, maxDepth = 8) {\n        super(new PointOctant<T>(min, max));\n        \n        this.bias = Math.max(0.0, bias);\n        this.maxPoints = Math.max(1, Math.round(maxPoints));\n        this.maxDepth = Math.max(0, Math.round(maxDepth));\n    }\n    \n    getBias(): number {\n        return this.bias;\n    }\n    \n    getMaxPoints(): number {\n        return this.maxPoints;\n    }\n\n    getMaxDepth(): number {\n        return this.maxDepth;\n    }\n\n    countPoints(octant: PointOctant<T> = this.root as PointOctant<T>): number {\n        return countPoints(octant);\n    }\n\n    set(point: Vector3, data: T): boolean {\n        return set(point, data, this, this.root as PointOctant<T>, 0);\n    }\n\n    remove(point: Vector3): T | null {\n        return remove(point, this, this.root as PointOctant<T>, null);\n    }\n\n    get(point: Vector3): T | null {\n        return get(point, this, this.root as PointOctant<T>);\n    }\n    \n    move(point: Vector3, position: Vector3): T | null {\n        return move(point, position, this, this.root as PointOctant<T>, null, 0);\n    }\n\n    findNearestPoint(point: Vector3, maxDistance = Number.POSITIVE_INFINITY, skipSelf = false): PointContainer<T> | null {\n        const root = this.root as PointOctant<T>;\n        const result = findNearestPoint(point, maxDistance, skipSelf, root);\n\n        if(result !== null && result.point !== null) {\n\n            result.point = result.point.clone();\n\n        }\n\n        return result;\n    }\n\n    findPoints(point: Vector3, radius: number, skipSelf = false): PointContainer<T>[] {\n        const result: PointContainer<T>[] = [];\n        findPoints(point, radius, skipSelf, this.root as PointOctant<T>, result);\n        return result;\n    }\n\n    raycast(raycaster: NewRaycaster): RayPointIntersection<T>[] {\n\n        const result: RayPointIntersection<T>[] = [];\n        const octants = super.getIntersectingNodes(raycaster) as PointOctant<T>[];\n\n        if(octants.length > 0) {\n\n            for(let i = 0, l = octants.length; i < l; ++i) {\n\n                const octant = octants[i];\n                const pointData = octant.data;\n\n                if(pointData !== null) {\n\n                    pointData.testPoints(raycaster, result);\n\n                }\n\n            }\n\n        }\n\n        return result;\n    }\n} ","import { SplatData } from \"./SplatData\";\nimport { Object3D } from \"../core/Object3D\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Converter } from \"../utils/Converter\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Box3 } from \"../math/Box3\";\nimport { SingleSplat } from \"./SingleSplat\"\n\nimport { Constants } from \"../utils/Constants\";\nimport {PointOctree} from \"../Octree/points/PointOctree\";\n\nclass Splat extends Object3D {\n    public selectedChanged: boolean = false;\n    public renderNumberChanged: boolean = false;\n    public colorTransformChanged: boolean = false;\n\n    private _splats: Array<SingleSplat> = [];\n    private _data: SplatData;\n    private _selected: boolean = false;\n    private _colorTransforms: Array<Matrix4> = [];\n    private _colorTransformsMap: Map<number, number> = new Map();\n    private _bounds: Box3;\n    \n    private _numberOfSplats: number;\n    private _numberOfRenderedSplats: number;\n\n    private _octree: PointOctree<SingleSplat> | undefined;\n    \n    applySelection: () => void;\n    applyRendering: () => void;\n    \n    constructor(splat: SplatData | undefined = undefined) {\n        super();\n        \n        this._splats = new Array<SingleSplat>();\n        this._data = splat || new SplatData();\n        \n        this._bounds = new Box3(\n            new Vector3(Infinity, Infinity, Infinity),\n            new Vector3(-Infinity, -Infinity, -Infinity),\n        );\n\n        this._numberOfSplats = 0;\n        this._numberOfRenderedSplats = 0\n        \n\n        this.applyPosition = () => {\n            this.data.translate(this.position);\n            this.position = new Vector3();\n        };\n\n        this.applyRotation = () => {\n            this.data.rotate(this.rotation)\n            this.rotation = new Quaternion();\n            \n        };\n\n        this.applyScale = () => {\n            this.data.scale(this.scale);\n            this.scale = new Vector3(1, 1, 1);\n        };\n        \n        this.applySelection = () => {\n            this.selectedChanged = true;\n            this.dispatchEvent(this._changeEvent);\n            \n            this.data.changed = true;\n        }\n        \n        this.applyRendering = () => {\n            this.data.calculateRenderedSplats();\n            \n            this.renderNumberChanged = true;\n            \n            this.dispatchEvent(this._changeEvent);\n            this.data.changed = true;\n        }\n\n\n        (async () => {\n            await this.createSplatsData(splat);\n            await this.recalculateBounds();\n            await this.createOctree();\n            this.data.changed = true;\n        })();\n    }\n\n    async createSplatsData(splat: SplatData | undefined) {\n        if (splat != undefined) {\n            this._numberOfSplats = splat.vertexCount;\n            this._numberOfRenderedSplats = splat.vertexCount;\n\n            console.time(\"Splats creation\");\n            for (let i = 0; i < splat.vertexCount; i++) {\n                let singleSplat = new SingleSplat(i, this._data);\n                this._splats.push(singleSplat);\n\n                if (i % 1000 === 0) { // Nach jedem 1000. Eintrag den Main-Thread freigeben\n                    await Promise.resolve();\n                }\n            }\n            console.timeEnd(\"Splats creation\");\n        }\n    }\n\n\n    async recalculateBounds() {\n        console.time(\"Bounds calculation\");\n        for (let i = 0; i < this._numberOfSplats; i++) {\n            const pos = this._splats[i].Position;\n            this._bounds.expand(new Vector3(pos[0], pos[1], pos[2]));\n\n            if (i % 1000 === 0) { // Nach jedem 1000. Eintrag den Main-Thread freigeben\n                await Promise.resolve();\n            }\n        }\n        console.timeEnd(\"Bounds calculation\");\n    }\n\n\n    async createOctree() {\n        this._octree = new PointOctree<SingleSplat>(this._bounds.min, this._bounds.max, 0.0, 8, 8);\n        console.time(\"Octree creation\");\n        const positionVector = new Vector3();\n        for (let i = 0; i < this._numberOfSplats; i++) {\n            const pos = this._splats[i].Position;\n            positionVector.set(pos[0], pos[1], pos[2]);\n            this._octree.set(positionVector, this._splats[i]);\n\n            if (i % 1000 === 0) { // Nach jedem 1000. Eintrag den Main-Thread freigeben\n                await Promise.resolve();\n            }\n        }\n        console.timeEnd(\"Octree creation\");\n    }\n\n\n    saveToFile(name: string | null = null, format: string | null = null) {\n        if (!document) return;\n\n        if (!format) {\n            format = \"splat\";\n        } else if (format !== \"splat\" && format !== \"ply\") {\n            throw new Error(\"Invalid format. Must be 'splat' or 'ply'\");\n        }\n\n        if (!name) {\n            const now = new Date();\n            name = `splat-${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}.${format}`;\n        }\n\n        this.applyRotation();\n        this.applyScale();\n        this.applyPosition();\n\n        const data = this.serialize();\n        let blob;\n        if (format === \"ply\") {\n            const plyData = Converter.SplatToPLY(data.buffer, this._numberOfSplats);\n            blob = new Blob([plyData], { type: \"application/octet-stream\" });\n        } else {\n            blob = new Blob([data.buffer], { type: \"application/octet-stream\" });\n        }\n\n        const link = document.createElement(\"a\");\n        link.download = name;\n        link.href = URL.createObjectURL(blob);\n        link.click();\n    }\n\n    get data() {\n        return this._data;\n    }\n    \n    get splats() {\n        return this._splats;\n    }\n    \n    getSplatAtIndex(index: number): SingleSplat | undefined {\n        if (index < 0 || index >= this._numberOfSplats) {\n            console.error(\"Index out of bounds\");\n            return undefined; \n        }\n        return this._splats[index];\n    }\n\n    get selected() {\n        return this._selected;\n    }\n\n    set selected(selected: boolean) {\n        if (this._selected !== selected) {\n            this._selected = selected;\n            this.selectedChanged = true;\n            this.dispatchEvent(this._changeEvent);\n        }\n    }\n    \n    selectSplat(index: number, value: number) {\n        this._splats[index].Selected = value;\n        \n        this.selectedChanged = true;\n        this.dispatchEvent(this._changeEvent);\n    }\n    \n    renderSplat(index: number, value: number) {\n        this._data.rendered[index] = value;\n    }\n    \n    updateRenderingOfSplats() {\n        this.data.changed = true;\n    }\n\n    get colorTransforms() {\n        return this._colorTransforms;\n    }\n\n    get colorTransformsMap() {\n        return this._colorTransformsMap;\n    }\n    \n    get bounds() {\n        let center = this._bounds.center();\n        center = center.add(this.position);\n\n        let size = this._bounds.size();\n        size = size.multiply(this.scale);\n\n        return new Box3(center.subtract(size.divide(2)), center.add(size.divide(2)));\n    }\n    \n    get splatCount() {\n        return this._numberOfSplats;\n    }\n    \n    get numberOfRenderedSplats() {\n        return this._data.renderedSplats;\n    }\n\n    serialize = () => {\n        console.log(\"serialize splat\")\n        const data = new Uint8Array(this._numberOfSplats * SplatData.RowLength);\n\n        const f_buffer = new Float32Array(data.buffer);\n        const u_buffer = new Uint8Array(data.buffer);\n        \n        for (let i = 0; i < this._numberOfSplats; i++) {\n            f_buffer[8 * i + 0] = this._splats[i].Position[0];\n            f_buffer[8 * i + 1] = this._splats[i].Position[1];\n            f_buffer[8 * i + 2] = this._splats[i].Position[2];\n\n            u_buffer[32 * i + 24 + 0] = this._splats[i].Color[0];\n            u_buffer[32 * i + 24 + 1] = this._splats[i].Color[1];\n            u_buffer[32 * i + 24 + 2] = this._splats[i].Color[2];\n            u_buffer[32 * i + 24 + 3] = this._splats[i].Color[3];\n\n            f_buffer[8 * i + 3 + 0] = this._splats[i].Scale[0];\n            f_buffer[8 * i + 3 + 1] = this._splats[i].Scale[1];\n            f_buffer[8 * i + 3 + 2] = this._splats[i].Scale[2];\n\n            u_buffer[32 * i + 28 + 0] = (this._splats[i].Rotation[0] * 128 + 128) & 0xff;\n            u_buffer[32 * i + 28 + 1] = (this._splats[i].Rotation[1] * 128 + 128) & 0xff;\n            u_buffer[32 * i + 28 + 2] = (this._splats[i].Rotation[2] * 128 + 128) & 0xff;\n            u_buffer[32 * i + 28 + 3] = (this._splats[i].Rotation[3] * 128 + 128) & 0xff;\n        }\n\n        return data;\n    };\n\n    reattach = (\n        positions: ArrayBufferLike,\n        rotations: ArrayBufferLike,\n        scales: ArrayBufferLike,\n        colors: ArrayBufferLike,\n        selection: ArrayBufferLike,\n    ) => {\n        console.assert(\n            positions.byteLength === this._numberOfRenderedSplats * 3 * 4,\n            `Expected ${this._numberOfRenderedSplats * 3 * 4} bytes, got ${positions.byteLength} bytes`,\n        );\n\n        for(let i = 0; i < this._numberOfSplats; i++) {\n            if(this._splats[i].Rendered === 1){\n                let position: Float32Array = new Float32Array(positions, 3 * i * Constants.BYTE_OFFSET_FLOAT, 3);\n                let rotation: Float32Array = new Float32Array(rotations, 4 * i * Constants.BYTE_OFFSET_FLOAT, 4);\n                let scale: Float32Array = new Float32Array(scales, 3 * i * Constants.BYTE_OFFSET_FLOAT, 3);\n                let color: Uint8Array = new Uint8Array(colors, 1 * i * Constants.BYTE_OFFSET_INT, 4);\n                let selected: Uint8Array = new Uint8Array(selection, i, 1);\n\n                this._splats[i].reattach(position, rotation, scale, color, selected);       \n            }\n        }\n        \n        this._data.detached = false;\n    };\n\n    get Positions(): Float32Array {\n        return this._data.renderedPositions;\n    }\n\n    get Scales(): Float32Array {\n        return this._data.renderedScales;\n    }\n\n    get Rotations(): Float32Array {\n        return this._data.renderedRotations;\n    }\n\n    get Colors(): Uint8Array {\n        return this._data.renderedColors;\n    }\n\n    get Selections(): Uint8Array {\n        return this._data.renderedSelection;\n    }\n\n    get Rendered(): Uint8Array {\n        return this.data.rendered;\n    }\n    \n    get octree() {\n        return this._octree;\n    }\n}\n\nexport { Splat };\n","import { Object3D } from \"../core/Object3D\";\nimport { SplatvData } from \"./SplatvData\";\n\nclass Splatv extends Object3D {\n    private _data: SplatvData;\n\n    constructor(splat: SplatvData) {\n        super();\n\n        this._data = splat;\n    }\n\n    get data() {\n        return this._data;\n    }\n}\n\nexport { Splatv };\n","import { Quaternion } from \"../math/Quaternion\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Vector3 } from \"../math/Vector3\";\n\nclass CameraData {\n    private _fx: number = 1132;\n    private _fy: number = 1132;\n    private _near: number = 0.1;\n    private _far: number = 30;\n\n    private _width: number = 512;\n    private _height: number = 512;\n\n    private _projectionMatrix: Matrix4 = new Matrix4();\n    private _viewMatrix: Matrix4 = new Matrix4();\n    private _viewProj: Matrix4 = new Matrix4();\n\n    update: (position: Vector3, rotation: Quaternion) => void;\n    setSize: (width: number, height: number) => void;\n\n    private _updateProjectionMatrix: () => void;\n\n    constructor() {\n        this._updateProjectionMatrix = () => {\n            // prettier-ignore\n            this._projectionMatrix = new Matrix4(\n                2 * this.fx / this.width, 0, 0, 0,\n                0, -2 * this.fy / this.height, 0, 0,\n                0, 0, this.far / (this.far - this.near), 1,\n                0, 0, -(this.far * this.near) / (this.far - this.near), 0\n            );\n\n            this._viewProj = this.projectionMatrix.multiply(this.viewMatrix);\n        };\n\n        this.update = (position: Vector3, rotation: Quaternion) => {\n            const R = Matrix3.RotationFromQuaternion(rotation).buffer;\n            const t = position.flat();\n\n            // prettier-ignore\n            this._viewMatrix = new Matrix4(\n                R[0], R[1], R[2], 0,\n                R[3], R[4], R[5], 0,\n                R[6], R[7], R[8], 0,\n                -t[0] * R[0] - t[1] * R[3] - t[2] * R[6],\n                -t[0] * R[1] - t[1] * R[4] - t[2] * R[7],\n                -t[0] * R[2] - t[1] * R[5] - t[2] * R[8],\n                1,\n            );\n\n            this._viewProj = this.projectionMatrix.multiply(this.viewMatrix);\n        };\n\n        this.setSize = (width: number, height: number) => {\n            this._width = width;\n            this._height = height;\n            this._updateProjectionMatrix();\n        };\n    }\n\n    get fx() {\n        return this._fx;\n    }\n\n    set fx(fx: number) {\n        if (this._fx !== fx) {\n            this._fx = fx;\n            this._updateProjectionMatrix();\n        }\n    }\n\n    get fy() {\n        return this._fy;\n    }\n\n    set fy(fy: number) {\n        if (this._fy !== fy) {\n            this._fy = fy;\n            this._updateProjectionMatrix();\n        }\n    }\n\n    get near() {\n        return this._near;\n    }\n\n    set near(near: number) {\n        if (this._near !== near) {\n            this._near = near;\n            this._updateProjectionMatrix();\n        }\n    }\n\n    get far() {\n        return this._far;\n    }\n\n    set far(far: number) {\n        if (this._far !== far) {\n            this._far = far;\n            this._updateProjectionMatrix();\n        }\n    }\n\n    get width() {\n        return this._width;\n    }\n\n    get height() {\n        return this._height;\n    }\n\n    get projectionMatrix() {\n        return this._projectionMatrix;\n    }\n\n    get viewMatrix() {\n        return this._viewMatrix;\n    }\n\n    get viewProj() {\n        return this._viewProj;\n    }\n    \n    get direction() {\n        const inverseViewMatrix = this._viewMatrix.invert().buffer;\n\n        // Dritte Spalte der inversen View-Matrix extrahieren\n        const direction = new Vector3(\n            inverseViewMatrix[8],\n            inverseViewMatrix[9],\n            inverseViewMatrix[10]\n        );\n\n        return direction.normalize();\n    }\n}\n\nexport { CameraData };\n","import {CameraData} from \"./CameraData\";\nimport {Object3D} from \"../core/Object3D\";\nimport {Vector3} from \"../math/Vector3\";\nimport {Vector4} from \"../math/Vector4\";\n\nclass Camera extends Object3D {\n    private _data: CameraData;\n\n    screenPointToRay: (x: number, y: number) => Vector3;\n    screenToWorldPoint: (x: number, y: number) => Vector3;\n    worldToScreenPoint: (worldPoint: Vector3) => Vector3;\n    worldToCameraPoint: (worldPoint: Vector3) => Vector3;\n\n        constructor(camera: CameraData | undefined = undefined) {\n        super();\n\n        this._data = camera ? camera : new CameraData();\n        this._position = new Vector3(0, 0, -5);\n\n        this.update = () => {\n            this.data.update(this.position, this.rotation);\n        };\n\n        this.worldToScreenPoint = (worldPoint: Vector3) => {\n            const worldSpaceCoords = new Vector4(worldPoint.x, worldPoint.y, worldPoint.z, 1.0);\n            const viewMatrix = this._data.viewMatrix;\n            const cameraSpaceCoors = worldSpaceCoords.multiply(viewMatrix);\n            \n            const projectionMatrix = this._data.projectionMatrix;\n            const clipSpaceCoords = cameraSpaceCoors.multiply(projectionMatrix);\n\n            return new Vector3(\n                clipSpaceCoords.x / clipSpaceCoords.w,\n                clipSpaceCoords.y / clipSpaceCoords.w,\n                clipSpaceCoords.z / clipSpaceCoords.w,\n            );\n        }\n        \n        this.worldToCameraPoint = (worldPoint: Vector3) => {\n            // Transformiere den Punkt in den Kamera-Raum\n            const cameraSpaceCoords = new Vector4(worldPoint.x, worldPoint.y, worldPoint.z, 1.0);\n            const viewMatrix = this._data.viewMatrix;\n            const cameraCoords = cameraSpaceCoords.multiply(viewMatrix);\n\n            return new Vector3(\n                cameraCoords.x / cameraCoords.w,\n                cameraCoords.y / cameraCoords.w,\n                cameraCoords.z / cameraCoords.w\n            );\n        }\n        \n        this.screenToWorldPoint = (x: number, y: number, z:number = -1) => {\n            const clipSpaceCoords = new Vector4(x, y, z, 1);\n            const inverseProjectionMatrix = this._data.projectionMatrix.invert();\n            const cameraSpaceCoords = clipSpaceCoords.multiply(inverseProjectionMatrix);\n            const inverseViewMatrix = this._data.viewMatrix.invert();\n            const worldSpaceCoords = cameraSpaceCoords.multiply(inverseViewMatrix);\n            return new Vector3(\n                worldSpaceCoords.x / worldSpaceCoords.w,\n                worldSpaceCoords.y / worldSpaceCoords.w,\n                worldSpaceCoords.z / worldSpaceCoords.w,\n            );\n        };\n        \n        this.screenPointToRay = (x: number, y: number) => {\n            const clipSpaceCoords = new Vector4(x, y, -1, 1);\n            const inverseProjectionMatrix = this._data.projectionMatrix.invert();\n            const cameraSpaceCoords = clipSpaceCoords.multiply(inverseProjectionMatrix);\n            const inverseViewMatrix = this._data.viewMatrix.invert();\n            const worldSpaceCoords = cameraSpaceCoords.multiply(inverseViewMatrix);\n            const worldSpacePosition = new Vector3(\n                worldSpaceCoords.x / worldSpaceCoords.w,\n                worldSpaceCoords.y / worldSpaceCoords.w,\n                worldSpaceCoords.z / worldSpaceCoords.w,\n            );\n            const direction = worldSpacePosition.subtract(this.position).normalize();\n            return direction;\n        };\n    }\n\n    get data() {\n        return this._data;\n    }\n}\n\nexport { Camera };\n","import { Object3D } from \"./Object3D\";\nimport { SplatData } from \"../splats/SplatData\";\nimport { Splat } from \"../splats/Splat\";\nimport { EventDispatcher } from \"../events/EventDispatcher\";\nimport { ObjectAddedEvent, ObjectRemovedEvent } from \"../events/Events\";\nimport { Converter } from \"../utils/Converter\";\n\nclass Scene extends EventDispatcher {\n    private _objects: Object3D[] = [];\n\n    addObject: (object: Object3D) => void;\n    removeObject: (object: Object3D) => void;\n    findObject: (predicate: (object: Object3D) => boolean) => Object3D | undefined;\n    findObjectOfType: <T extends Object3D>(type: { new (): T }) => T | undefined;\n    reset: () => void;\n\n    constructor() {\n        super();\n\n        this.addObject = (object: Object3D) => {\n            this.objects.push(object);\n            this.dispatchEvent(new ObjectAddedEvent(object));\n        };\n\n        this.removeObject = (object: Object3D) => {\n            const index = this.objects.indexOf(object);\n            if (index < 0) {\n                throw new Error(\"Object not found in scene\");\n            }\n            this.objects.splice(index, 1);\n            this.dispatchEvent(new ObjectRemovedEvent(object));\n        };\n\n        this.findObject = (predicate: (object: Object3D) => boolean) => {\n            for (const object of this.objects) {\n                if (predicate(object)) {\n                    return object;\n                }\n            }\n            return undefined;\n        };\n\n        this.findObjectOfType = <T extends Object3D>(type: { new (): T }) => {\n            for (const object of this.objects) {\n                if (object instanceof type) {\n                    return object;\n                }\n            }\n            return undefined;\n        };\n\n        this.reset = () => {\n            const objectsToRemove = this.objects.slice();\n            for (const object of objectsToRemove) {\n                this.removeObject(object);\n            }\n        };\n\n        this.reset();\n    }\n\n    saveToFile(name: string | null = null, format: string | null = null) {\n        if (!document) return;\n\n        if (!format) {\n            format = \"splat\";\n        } else if (format !== \"splat\" && format !== \"ply\") {\n            throw new Error(\"Invalid format. Must be 'splat' or 'ply'\");\n        }\n\n        if (!name) {\n            const now = new Date();\n            name = `scene-${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}.${format}`;\n        }\n\n        const buffers: Uint8Array[] = [];\n        let vertexCount = 0;\n\n        for (const object of this.objects) {\n            object.applyRotation();\n            object.applyScale();\n            object.applyPosition();\n            if (object instanceof Splat) {\n                const buffer = object.serialize();\n                buffers.push(buffer);\n                vertexCount += object.splatCount;\n            }\n        }\n\n        const data = new Uint8Array(vertexCount * SplatData.RowLength);\n        let offset = 0;\n        for (const buffer of buffers) {\n            data.set(buffer, offset);\n            offset += buffer.length;\n        }\n\n        let blob;\n        if (format === \"ply\") {\n            const plyData = Converter.SplatToPLY(data.buffer, vertexCount);\n            blob = new Blob([plyData], { type: \"application/octet-stream\" });\n        } else {\n            blob = new Blob([data.buffer], { type: \"application/octet-stream\" });\n        }\n\n        const link = document.createElement(\"a\");\n        link.download = name;\n        link.href = URL.createObjectURL(blob);\n        link.click();\n    }\n\n    get objects() {\n        return this._objects;\n    }\n}\n\nexport { Scene };\n","export async function initiateFetchRequest(url: string, useCache: boolean): Promise<Response> {\n    const req = await fetch(url, {\n        mode: \"cors\",\n        credentials: \"omit\",\n        cache: useCache ? \"force-cache\" : \"default\",\n    });\n\n    if (req.status != 200) {\n        throw new Error(req.status + \" Unable to load \" + req.url);\n    }\n\n    return req;\n}\n\nexport async function loadDataIntoBuffer(res: Response, onProgress?: (progress: number) => void): Promise<Uint8Array> {\n    const reader = res.body!.getReader();\n\n    const contentLength = parseInt(res.headers.get(\"content-length\") as string);\n    const buffer = new Uint8Array(contentLength);\n\n    let bytesRead = 0;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer.set(value, bytesRead);\n        bytesRead += value.length;\n        onProgress?.(bytesRead / contentLength);\n    }\n\n    return buffer;\n}\n\nexport async function loadChunkedDataIntoBuffer(\n    res: Response,\n    onProgress?: (progress: number) => void,\n): Promise<Uint8Array> {\n    const reader = res.body!.getReader();\n\n    const chunks = [];\n    let receivedLength = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        chunks.push(value);\n        receivedLength += value.length;\n    }\n\n    const buffer = new Uint8Array(receivedLength);\n    let position = 0;\n    for (const chunk of chunks) {\n        buffer.set(chunk, position);\n        position += chunk.length;\n\n        onProgress?.(position / receivedLength);\n    }\n\n    return buffer;\n}\n\nexport async function loadRequestDataIntoBuffer(\n    res: Response,\n    onProgress?: (progress: number) => void,\n): Promise<Uint8Array> {\n    if (res.headers.has(\"content-length\")) {\n        return loadDataIntoBuffer(res, onProgress);\n    } else {\n        return loadChunkedDataIntoBuffer(res, onProgress);\n    }\n}\n","import type { Scene } from \"../core/Scene\";\nimport { Splat } from \"../splats/Splat\";\nimport { SplatData } from \"../splats/SplatData\";\nimport { initiateFetchRequest, loadRequestDataIntoBuffer } from \"../utils/LoaderUtils\";\n\nclass Loader {\n    \n    static async LoadAsync(\n        url: string,\n        scene: Scene,\n        onProgress?: (progress: number) => void,\n        useCache: boolean = false,\n    ): Promise<Splat> {\n        const res: Response = await initiateFetchRequest(url, useCache);\n\n        const buffer = await loadRequestDataIntoBuffer(res, onProgress);\n\n        return this.LoadFromArrayBuffer(buffer, scene);\n    }\n\n    static async LoadFromFileAsync(file: File, scene: Scene, onProgress?: (progress: number) => void): Promise<Splat> {\n        const reader = new FileReader();\n        let splat = new Splat();\n        reader.onload = (e) => {\n            splat = this.LoadFromArrayBuffer(e.target!.result as ArrayBuffer, scene);\n        };\n        reader.onprogress = (e) => {\n            onProgress?.(e.loaded / e.total);\n        };\n        reader.readAsArrayBuffer(file);\n        await new Promise<void>((resolve) => {\n            reader.onloadend = () => {\n                resolve();\n            };\n        });\n        return splat;\n    }\n\n    static LoadFromArrayBuffer(arrayBuffer: ArrayBufferLike, scene: Scene): Splat {\n        const buffer = new Uint8Array(arrayBuffer);\n        const data = SplatData.Deserialize(buffer);\n        const splat = new Splat(data);\n        scene.addObject(splat);\n        return splat;\n    }\n}\n\nexport { Loader };\n","import { Scene } from \"../core/Scene\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { SplatData } from \"../splats/SplatData\";\nimport { Splat } from \"../splats/Splat\";\nimport { Converter } from \"../utils/Converter\";\nimport { initiateFetchRequest, loadRequestDataIntoBuffer } from \"../utils/LoaderUtils\";\n\nclass PLYLoader {\n    static async LoadAsync(\n        url: string,\n        scene: Scene,\n        onProgress?: (progress: number) => void,\n        format: string = \"\",\n        useCache: boolean = false,\n    ): Promise<Splat> {\n        const res: Response = await initiateFetchRequest(url, useCache);\n\n        const plyData = await loadRequestDataIntoBuffer(res, onProgress);\n\n        if (plyData[0] !== 112 || plyData[1] !== 108 || plyData[2] !== 121 || plyData[3] !== 10) {\n            throw new Error(\"Invalid PLY file\");\n        }\n\n        return this.LoadFromArrayBuffer(plyData.buffer, scene, format);\n    }\n\n    static async LoadFromFileAsync(\n        file: File,\n        scene: Scene,\n        onProgress?: (progress: number) => void,\n        format: string = \"\",\n    ): Promise<Splat> {\n        const reader = new FileReader();\n        let splat = new Splat();\n        reader.onload = (e) => {\n            splat = this.LoadFromArrayBuffer(e.target!.result as ArrayBuffer, scene, format);\n        };\n        reader.onprogress = (e) => {\n            onProgress?.(e.loaded / e.total);\n        };\n        reader.readAsArrayBuffer(file);\n        await new Promise<void>((resolve) => {\n            reader.onloadend = () => {\n                resolve();\n            };\n        });\n        return splat;\n    }\n\n    static LoadFromArrayBuffer(arrayBuffer: ArrayBufferLike, scene: Scene, format: string = \"\"): Splat {\n        const buffer = new Uint8Array(this._ParsePLYBuffer(arrayBuffer, format));\n        const data = SplatData.Deserialize(buffer);\n        const splat = new Splat(data);\n        scene.addObject(splat);\n        return splat;\n    }\n\n    private static _ParsePLYBuffer(inputBuffer: ArrayBuffer, format: string): ArrayBuffer {\n        type PlyProperty = {\n            name: string;\n            type: string;\n            offset: number;\n        };\n\n        const ubuf = new Uint8Array(inputBuffer);\n        const headerText = new TextDecoder().decode(ubuf.slice(0, 1024 * 10));\n        const header_end = \"end_header\\n\";\n        const header_end_index = headerText.indexOf(header_end);\n        if (header_end_index < 0) throw new Error(\"Unable to read .ply file header\");\n\n        const vertexCount = parseInt(/element vertex (\\d+)\\n/.exec(headerText)![1]);\n\n        let rowOffset = 0;\n        const offsets: Record<string, number> = {\n            double: 8,\n            int: 4,\n            uint: 4,\n            float: 4,\n            short: 2,\n            ushort: 2,\n            uchar: 1,\n        };\n\n        const properties: PlyProperty[] = [];\n        for (const prop of headerText\n            .slice(0, header_end_index)\n            .split(\"\\n\")\n            .filter((k) => k.startsWith(\"property \"))) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const [_p, type, name] = prop.split(\" \");\n            properties.push({ name, type, offset: rowOffset });\n            \n            if (!offsets[type]) throw new Error(`Unsupported property type: ${type}`);\n            rowOffset += offsets[type];\n        }\n\n        const dataView = new DataView(inputBuffer, header_end_index + header_end.length);\n        const buffer = new ArrayBuffer(SplatData.RowLength * vertexCount);\n\n        const q_polycam = Quaternion.FromEuler(new Vector3(Math.PI / 2, 0, 0));\n\n        for (let i = 0; i < vertexCount; i++) {\n            const position = new Float32Array(buffer, i * SplatData.RowLength, 3);\n            const scale = new Float32Array(buffer, i * SplatData.RowLength + 12, 3);\n            const rgba = new Uint8ClampedArray(buffer, i * SplatData.RowLength + 24, 4);\n            const rot = new Uint8ClampedArray(buffer, i * SplatData.RowLength + 28, 4);\n\n            let r0: number = 255;\n            let r1: number = 0;\n            let r2: number = 0;\n            let r3: number = 0;\n\n            properties.forEach((property) => {\n                let value;\n                switch (property.type) {\n                    case \"float\":\n                        value = dataView.getFloat32(property.offset + i * rowOffset, true);\n                        break;\n                    case \"int\":\n                        value = dataView.getInt32(property.offset + i * rowOffset, true);\n                        break;\n                    default:\n                        throw new Error(`Unsupported property type: ${property.type}`);\n                }\n\n                switch (property.name) {\n                    case \"x\":\n                        position[0] = value;\n                        break;\n                    case \"y\":\n                        position[1] = value;\n                        break;\n                    case \"z\":\n                        position[2] = value;\n                        break;\n                    case \"scale_0\":\n                    case \"scaling_0\":\n                        scale[0] = Math.exp(value);\n                        break;\n                    case \"scale_1\":\n                    case \"scaling_1\":\n                        scale[1] = Math.exp(value);\n                        break;\n                    case \"scale_2\":\n                    case \"scaling_2\":\n                        scale[2] = Math.exp(value);\n                        break;\n                    case \"red\":\n                        rgba[0] = value;\n                        break;\n                    case \"green\":\n                        rgba[1] = value;\n                        break;\n                    case \"blue\":\n                        rgba[2] = value;\n                        break;\n                    case \"f_dc_0\":\n                    case \"features_0\":\n                        rgba[0] = (0.5 + Converter.SH_C0 * value) * 255;\n                        break;\n                    case \"f_dc_1\":\n                    case \"features_1\":\n                        rgba[1] = (0.5 + Converter.SH_C0 * value) * 255;\n                        break;\n                    case \"f_dc_2\":\n                    case \"features_2\":\n                        rgba[2] = (0.5 + Converter.SH_C0 * value) * 255;\n                        break;\n                    case \"f_dc_3\":\n                        rgba[3] = (0.5 + Converter.SH_C0 * value) * 255;\n                        break;\n                    case \"opacity\":\n                    case \"opacity_0\":\n                        rgba[3] = (1 / (1 + Math.exp(-value))) * 255;\n                        break;\n                    case \"rot_0\":\n                    case \"rotation_0\":\n                        r0 = value;\n                        break;\n                    case \"rot_1\":\n                    case \"rotation_1\":\n                        r1 = value;\n                        break;\n                    case \"rot_2\":\n                    case \"rotation_2\":\n                        r2 = value;\n                        break;\n                    case \"rot_3\":\n                    case \"rotation_3\":\n                        r3 = value;\n                        break;\n                }\n            });\n\n            let q = new Quaternion(r1, r2, r3, r0);\n\n            switch (format) {\n                case \"polycam\": {\n                    const temp = position[1];\n                    position[1] = -position[2];\n                    position[2] = temp;\n                    q = q_polycam.multiply(q);\n                    break;\n                }\n                case \"\":\n                    break;\n                default:\n                    throw new Error(`Unsupported format: ${format}`);\n            }\n\n            q = q.normalize();\n            rot[0] = q.w * 128 + 128;\n            rot[1] = q.x * 128 + 128;\n            rot[2] = q.y * 128 + 128;\n            rot[3] = q.z * 128 + 128;\n        }\n\n        return buffer;\n    }\n}\n\nexport { PLYLoader };\n","import { Camera } from \"../cameras/Camera\";\nimport type { Scene } from \"../core/Scene\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Splatv } from \"../splats/Splatv\";\nimport { SplatvData } from \"../splats/SplatvData\";\nimport { initiateFetchRequest, loadRequestDataIntoBuffer } from \"../utils/LoaderUtils\";\n\nclass SplatvLoader {\n    static async LoadAsync(\n        url: string,\n        scene: Scene,\n        camera: Camera | null,\n        onProgress?: (progress: number) => void,\n        useCache: boolean = false,\n    ): Promise<Splatv> {\n        const res: Response = await initiateFetchRequest(url, useCache);\n\n        const buffer = await loadRequestDataIntoBuffer(res, onProgress);\n        return this._ParseSplatvBuffer(buffer.buffer, scene, camera);\n    }\n\n    static async LoadFromFileAsync(\n        file: File,\n        scene: Scene,\n        camera: Camera | null,\n        onProgress?: (progress: number) => void,\n    ): Promise<Splatv> {\n        const reader = new FileReader();\n        let splatv: Splatv | null = null;\n        reader.onload = (e) => {\n            splatv = this._ParseSplatvBuffer(e.target!.result as ArrayBuffer, scene, camera);\n        };\n        reader.onprogress = (e) => {\n            onProgress?.(e.loaded / e.total);\n        };\n        reader.readAsArrayBuffer(file);\n        await new Promise<void>((resolve) => {\n            reader.onloadend = () => {\n                resolve();\n            };\n        });\n        if (!splatv) {\n            throw new Error(\"Failed to load splatv file\");\n        }\n        return splatv;\n    }\n\n    private static _ParseSplatvBuffer(inputBuffer: ArrayBuffer, scene: Scene, camera: Camera | null): Splatv {\n        let result: Splatv | null = null;\n\n        const handleChunk = (\n            chunk: { size: number; type: string; texwidth: number; texheight: number },\n            buffer: Uint8Array,\n            chunks: { size: number; type: string }[],\n        ) => {\n            if (chunk.type === \"magic\") {\n                const intView = new Int32Array(buffer.buffer);\n                if (intView[0] !== 0x674b) {\n                    throw new Error(\"Invalid splatv file\");\n                }\n                chunks.push({ size: intView[1], type: \"chunks\" });\n            } else if (chunk.type === \"chunks\") {\n                const splatChunks = JSON.parse(new TextDecoder(\"utf-8\").decode(buffer));\n                if (splatChunks.length == 0) {\n                    throw new Error(\"Invalid splatv file\");\n                } else if (splatChunks.length > 1) {\n                    console.warn(\"Splatv file contains more than one chunk, only the first one will be loaded\");\n                }\n                const chunk = splatChunks[0];\n                const cameras = chunk.cameras as { position: number[]; rotation: number[][] }[];\n                if (camera && cameras && cameras.length) {\n                    const cameraData = cameras[0];\n                    const position = new Vector3(\n                        cameraData.position[0],\n                        cameraData.position[1],\n                        cameraData.position[2],\n                    );\n                    const rotation = Quaternion.FromMatrix3(\n                        new Matrix3(\n                            cameraData.rotation[0][0],\n                            cameraData.rotation[0][1],\n                            cameraData.rotation[0][2],\n                            cameraData.rotation[1][0],\n                            cameraData.rotation[1][1],\n                            cameraData.rotation[1][2],\n                            cameraData.rotation[2][0],\n                            cameraData.rotation[2][1],\n                            cameraData.rotation[2][2],\n                        ),\n                    );\n                    camera.position = position;\n                    camera.rotation = rotation;\n                }\n                chunks.push(chunk);\n            } else if (chunk.type === \"splat\") {\n                const data = SplatvData.Deserialize(buffer, chunk.texwidth, chunk.texheight);\n                const splatv = new Splatv(data);\n                scene.addObject(splatv);\n                result = splatv;\n            }\n        };\n\n        const ubuf = new Uint8Array(inputBuffer);\n        const chunks: { size: number; type: string; texwidth: number; texheight: number }[] = [\n            { size: 8, type: \"magic\", texwidth: 0, texheight: 0 },\n        ];\n        let chunk: { size: number; type: string; texwidth: number; texheight: number } | undefined = chunks.shift();\n        let buffer = new Uint8Array(chunk!.size);\n        let offset = 0;\n        let inputOffset = 0;\n        while (chunk) {\n            while (offset < chunk.size) {\n                const sizeToRead = Math.min(chunk.size - offset, ubuf.length - inputOffset);\n                buffer.set(ubuf.subarray(inputOffset, inputOffset + sizeToRead), offset);\n                offset += sizeToRead;\n                inputOffset += sizeToRead;\n            }\n            handleChunk(chunk, buffer, chunks);\n            if (result) {\n                return result;\n            }\n            chunk = chunks.shift();\n            if (chunk) {\n                buffer = new Uint8Array(chunk.size);\n                offset = 0;\n            }\n        }\n\n        throw new Error(\"Invalid splatv file\");\n    }\n}\n\nexport { SplatvLoader };\n","\nvar loadWasm = (() => {\n  var _scriptDir = import.meta.url;\n  \n  return (\nfunction(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;var readyPromise=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=true;var scriptDirectory=\"\";var read_,readAsync,readBinary;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.startsWith(\"blob:\")){scriptDirectory=\"\"}else{scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];function intArrayFromBase64(s){var decoded=atob(s);var bytes=new Uint8Array(decoded.length);for(var i=0;i<decoded.length;++i){bytes[i]=decoded.charCodeAt(i)}return bytes}function tryParseAsDataURI(filename){if(!isDataURI(filename)){return}return intArrayFromBase64(filename.slice(dataURIPrefix.length))}var wasmMemory;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b)}var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;Module[\"monitorRunDependencies\"]?.(runDependencies)}function removeRunDependency(id){runDependencies--;Module[\"monitorRunDependencies\"]?.(runDependencies);if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){Module[\"onAbort\"]?.(what);what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";var isDataURI=filename=>filename.startsWith(dataURIPrefix);var wasmBinaryFile;wasmBinaryFile=\"data:application/octet-stream;base64,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X19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAADAYAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAADAYAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAADAYAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UADAYAAKgEAACcBAAAAAAAABwFAAABAAAAAgAAAAMAAAAEAAAABQAAAE4xMF9fY3h4YWJpdjEyM19fZnVuZGFtZW50YWxfdHlwZV9pbmZvRQAMBgAA9AQAADwEAAB2AAAA4AQAACgFAABiAAAA4AQAADQFAABjAAAA4AQAAEAFAABoAAAA4AQAAEwFAABhAAAA4AQAAFgFAABzAAAA4AQAAGQFAAB0AAAA4AQAAHAFAABpAAAA4AQAAHwFAABqAAAA4AQAAIgFAABsAAAA4AQAAJQFAABtAAAA4AQAAKAFAAB4AAAA4AQAAKwFAAB5AAAA4AQAALgFAABmAAAA4AQAAMQFAABkAAAA4AQAANAFAAAAAAAAbAQAAAEAAAAGAAAAAwAAAAQAAAAHAAAACAAAAAkAAAAKAAAAAAAAAFQGAAABAAAACwAAAAMAAAAEAAAABwAAAAwAAAANAAAADgAAAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQAAAAAMBgAALAYAAGwEAAB1bnNpZ25lZCBzaG9ydAB1bnNpZ25lZCBpbnQAZmxvYXQAdWludDY0X3QAdW5zaWduZWQgY2hhcgBib29sAHVuc2lnbmVkIGxvbmcAc3RkOjp3c3RyaW5nAHN0ZDo6c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGRvdWJsZQB2b2lkAGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGNoYXI+AHN0ZDo6YmFzaWNfc3RyaW5nPHVuc2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNpZ25lZCBjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+AE5TdDNfXzIxMmJhc2ljX3N0cmluZ0ljTlNfMTFjaGFyX3RyYWl0c0ljRUVOU185YWxsb2NhdG9ySWNFRUVFAAAAAOQFAACSCQAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWhOU18xMWNoYXJfdHJhaXRzSWhFRU5TXzlhbGxvY2F0b3JJaEVFRUUAAOQFAADcCQAATlN0M19fMjEyYmFzaWNfc3RyaW5nSXdOU18xMWNoYXJfdHJhaXRzSXdFRU5TXzlhbGxvY2F0b3JJd0VFRUUAAOQFAAAkCgAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURzTlNfMTFjaGFyX3RyYWl0c0lEc0VFTlNfOWFsbG9jYXRvcklEc0VFRUUAAADkBQAAbAoAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0lEaU5TXzExY2hhcl90cmFpdHNJRGlFRU5TXzlhbGxvY2F0b3JJRGlFRUVFAAAA5AUAALgKAABOMTBlbXNjcmlwdGVuM3ZhbEUAAOQFAAAECwAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJY0VFAADkBQAAIAsAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWFFRQAA5AUAAEgLAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0loRUUAAOQFAABwCwAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJc0VFAADkBQAAmAsAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXRFRQAA5AUAAMALAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lpRUUAAOQFAADoCwAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJakVFAADkBQAAEAwAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWxFRQAA5AUAADgMAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ltRUUAAOQFAABgDAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJeEVFAADkBQAAiAwAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXlFRQAA5AUAALAMAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lmRUUAAOQFAADYDAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJZEVFAADkBQAAAA0AQagaCwMwDwE=\";function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}var binary=tryParseAsDataURI(file);if(binary){return binary}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){wasmExports=instance.exports;wasmMemory=wasmExports[\"k\"];updateMemoryViews();addOnInit(wasmExports[\"l\"]);removeRunDependency(\"wasm-instantiate\");return wasmExports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var noExitRuntime=Module[\"noExitRuntime\"]||true;var __embind_register_bigint=(primitiveType,name,size,minRange,maxRange)=>{};var embind_init_charCodes=()=>{var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i)}embind_charCodes=codes};var embind_charCodes;var readLatin1String=ptr=>{var ret=\"\";var c=ptr;while(HEAPU8[c]){ret+=embind_charCodes[HEAPU8[c++]]}return ret};var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var BindingError;var throwBindingError=message=>{throw new BindingError(message)};var InternalError;function sharedRegisterType(rawType,registeredInstance,options={}){var name=registeredInstance.name;if(!rawType){throwBindingError(`type \"${name}\" must have a positive integer typeid pointer`)}if(registeredTypes.hasOwnProperty(rawType)){if(options.ignoreDuplicateRegistrations){return}else{throwBindingError(`Cannot register type '${name}' twice`)}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(awaitingDependencies.hasOwnProperty(rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(cb=>cb())}}function registerType(rawType,registeredInstance,options={}){if(!(\"argPackAdvance\"in registeredInstance)){throw new TypeError(\"registerType registeredInstance requires argPackAdvance\")}return sharedRegisterType(rawType,registeredInstance,options)}var GenericWireTypeSize=8;var __embind_register_bool=(rawType,name,trueValue,falseValue)=>{name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":function(wt){return!!wt},\"toWireType\":function(destructors,o){return o?trueValue:falseValue},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":function(pointer){return this[\"fromWireType\"](HEAPU8[pointer])},destructorFunction:null})};var emval_freelist=[];var emval_handles=[];var __emval_decref=handle=>{if(handle>9&&0===--emval_handles[handle+1]){emval_handles[handle]=undefined;emval_freelist.push(handle)}};var count_emval_handles=()=>emval_handles.length/2-5-emval_freelist.length;var init_emval=()=>{emval_handles.push(0,1,undefined,1,null,1,true,1,false,1);Module[\"count_emval_handles\"]=count_emval_handles};var Emval={toValue:handle=>{if(!handle){throwBindingError(\"Cannot use deleted val. handle = \"+handle)}return emval_handles[handle]},toHandle:value=>{switch(value){case undefined:return 2;case null:return 4;case true:return 6;case false:return 8;default:{const handle=emval_freelist.pop()||emval_handles.length;emval_handles[handle]=value;emval_handles[handle+1]=1;return handle}}}};function readPointer(pointer){return this[\"fromWireType\"](HEAPU32[pointer>>2])}var EmValType={name:\"emscripten::val\",\"fromWireType\":handle=>{var rv=Emval.toValue(handle);__emval_decref(handle);return rv},\"toWireType\":(destructors,value)=>Emval.toHandle(value),\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":readPointer,destructorFunction:null};var __embind_register_emval=rawType=>registerType(rawType,EmValType);var floatReadValueFromPointer=(name,width)=>{switch(width){case 4:return function(pointer){return this[\"fromWireType\"](HEAPF32[pointer>>2])};case 8:return function(pointer){return this[\"fromWireType\"](HEAPF64[pointer>>3])};default:throw new TypeError(`invalid float width (${width}): ${name}`)}};var __embind_register_float=(rawType,name,size)=>{name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":value=>value,\"toWireType\":(destructors,value)=>value,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":floatReadValueFromPointer(name,size),destructorFunction:null})};var integerReadValueFromPointer=(name,width,signed)=>{switch(width){case 1:return signed?pointer=>HEAP8[pointer]:pointer=>HEAPU8[pointer];case 2:return signed?pointer=>HEAP16[pointer>>1]:pointer=>HEAPU16[pointer>>1];case 4:return signed?pointer=>HEAP32[pointer>>2]:pointer=>HEAPU32[pointer>>2];default:throw new TypeError(`invalid integer width (${width}): ${name}`)}};var __embind_register_integer=(primitiveType,name,size,minRange,maxRange)=>{name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295}var fromWireType=value=>value;if(minRange===0){var bitshift=32-8*size;fromWireType=value=>value<<bitshift>>>bitshift}var isUnsignedType=name.includes(\"unsigned\");var checkAssertions=(value,toTypeName)=>{};var toWireType;if(isUnsignedType){toWireType=function(destructors,value){checkAssertions(value,this.name);return value>>>0}}else{toWireType=function(destructors,value){checkAssertions(value,this.name);return value}}registerType(primitiveType,{name:name,\"fromWireType\":fromWireType,\"toWireType\":toWireType,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":integerReadValueFromPointer(name,size,minRange!==0),destructorFunction:null})};var __embind_register_memory_view=(rawType,dataTypeIndex,name)=>{var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){var size=HEAPU32[handle>>2];var data=HEAPU32[handle+4>>2];return new TA(HEAP8.buffer,data,size)}name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":decodeMemoryView,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":decodeMemoryView},{ignoreDuplicateRegistrations:true})};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var __embind_register_std_string=(rawType,name)=>{name=readLatin1String(name);var stdStringIsUTF8=name===\"std::string\";registerType(rawType,{name:name,\"fromWireType\"(value){var length=HEAPU32[value>>2];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment}else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+1}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i])}str=a.join(\"\")}_free(value);return str},\"toWireType\"(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value)}var length;var valueIsOfTypeString=typeof value==\"string\";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError(\"Cannot pass non-string to std::string\")}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value)}else{length=value.length}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>2]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1)}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError(\"String has UTF-16 code units that do not fit in 8 bits\")}HEAPU8[ptr+i]=charCode}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i]=value[i]}}}if(destructors!==null){destructors.push(_free,base)}return base},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":readPointer,destructorFunction(ptr){_free(ptr)}})};var UTF16Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf-16le\"):undefined;var UTF16ToString=(ptr,maxBytesToRead)=>{var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr));var str=\"\";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit)}return str};var stringToUTF16=(str,outPtr,maxBytesToWrite)=>{maxBytesToWrite??=2147483647;if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit;outPtr+=2}HEAP16[outPtr>>1]=0;return outPtr-startPtr};var lengthBytesUTF16=str=>str.length*2;var UTF32ToString=(ptr,maxBytesToRead)=>{var i=0;var str=\"\";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}else{str+=String.fromCharCode(utf32)}}return str};var stringToUTF32=(str,outPtr,maxBytesToWrite)=>{maxBytesToWrite??=2147483647;if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023}HEAP32[outPtr>>2]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break}HEAP32[outPtr>>2]=0;return outPtr-startPtr};var lengthBytesUTF32=str=>{var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4}return len};var __embind_register_std_wstring=(rawType,charSize,name)=>{name=readLatin1String(name);var decodeString,encodeString,readCharAt,lengthBytesUTF;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;readCharAt=pointer=>HEAPU16[pointer>>1]}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;readCharAt=pointer=>HEAPU32[pointer>>2]}registerType(rawType,{name:name,\"fromWireType\":value=>{var length=HEAPU32[value>>2];var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||readCharAt(currentBytePtr)==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment}else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+charSize}}_free(value);return str},\"toWireType\":(destructors,value)=>{if(!(typeof value==\"string\")){throwBindingError(`Cannot pass non-string to C++ string type ${name}`)}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>2]=length/charSize;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr)}return ptr},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":readPointer,destructorFunction(ptr){_free(ptr)}})};var __embind_register_void=(rawType,name)=>{name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,\"argPackAdvance\":0,\"fromWireType\":()=>undefined,\"toWireType\":(destructors,o)=>undefined})};var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};embind_init_charCodes();BindingError=Module[\"BindingError\"]=class BindingError extends Error{constructor(message){super(message);this.name=\"BindingError\"}};InternalError=Module[\"InternalError\"]=class InternalError extends Error{constructor(message){super(message);this.name=\"InternalError\"}};init_emval();var wasmImports={f:__embind_register_bigint,h:__embind_register_bool,g:__embind_register_emval,e:__embind_register_float,b:__embind_register_integer,a:__embind_register_memory_view,d:__embind_register_std_string,c:__embind_register_std_wstring,i:__embind_register_void,j:_emscripten_resize_heap};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"l\"])();var ___getTypeName=a0=>(___getTypeName=wasmExports[\"__getTypeName\"])(a0);var _pack=Module[\"_pack\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11)=>(_pack=Module[\"_pack\"]=wasmExports[\"m\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11);var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"o\"])(a0);var _free=Module[\"_free\"]=a0=>(_free=Module[\"_free\"]=wasmExports[\"p\"])(a0);var __emscripten_stack_restore=a0=>(__emscripten_stack_restore=wasmExports[\"_emscripten_stack_restore\"])(a0);var __emscripten_stack_alloc=a0=>(__emscripten_stack_alloc=wasmExports[\"_emscripten_stack_alloc\"])(a0);var _emscripten_stack_get_current=()=>(_emscripten_stack_get_current=wasmExports[\"emscripten_stack_get_current\"])();var ___cxa_is_pointer_type=a0=>(___cxa_is_pointer_type=wasmExports[\"__cxa_is_pointer_type\"])(a0);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return readyPromise\n}\n);\n})();\nexport default loadWasm;","import { Scene } from \"../../../core/Scene\";\nimport { Splat } from \"../../../splats/Splat\";\nimport DataWorker from \"web-worker:./DataWorker.ts\";\nimport loadWasm from \"../../../wasm/data\";\nimport { Matrix4 } from \"../../../math/Matrix4\";\nimport {SingleSplat} from \"../../../splats/SingleSplat\";\n\nclass RenderData {\n    public dataChanged = false;\n    public transformsChanged = false;\n    public colorTransformsChanged = false;\n\n    private _splatIndices: Map<Splat, number>;\n    private _singleSplatIndices: Map<SingleSplat, number>;\n    private _offsets: Map<Splat, number>;\n    private _singleOffsets: Map<SingleSplat, number>;\n    private _data: Uint32Array;\n    private _width: number;\n    private _height: number;\n    private _transforms: Float32Array;\n    private _transformsWidth: number;\n    private _transformsHeight: number;\n    private _transformIndices: Uint32Array;\n    private _transformIndicesWidth: number;\n    private _transformIndicesHeight: number;\n    private _colorTransforms: Float32Array;\n    private _colorTransformsWidth: number;\n    private _colorTransformsHeight: number;\n    private _colorTransformIndices: Uint32Array;\n    private _colorTransformIndicesWidth: number;\n    private _colorTransformIndicesHeight: number;\n    private _positions: Float32Array;\n    private _rotations: Float32Array;\n    private _scales: Float32Array;\n    private _vertexCount: number;\n    private _updating: Set<Splat> = new Set<Splat>();\n    private _dirty: Set<Splat> = new Set<Splat>();\n    private _worker: Worker;\n    \n    private _renderedSplats: number;\n    \n    getSplat: (index: number) => Splat | null;\n    getLocalIndex: (splat: Splat, index: number) => number;\n    markDirty: (splat: Splat) => void;\n    rebuild: () => void;\n    dispose: () => void;\n\n    constructor(scene: Scene) {\n        let vertexCount = 0;\n        let splatIndex = 0;\n        this._splatIndices = new Map<Splat, number>();\n        this._singleSplatIndices = new Map<SingleSplat, number>();\n        this._offsets = new Map<Splat, number>();\n        this._singleOffsets = new Map<SingleSplat, number>();\n        const lookup = new Map<number, Splat>();\n        const singlelookup = new Map<number, SingleSplat>();\n        for (const object of scene.objects) {\n            if (object instanceof Splat) {\n                this._splatIndices.set(object, splatIndex);\n                this._offsets.set(object, vertexCount);\n                lookup.set(vertexCount, object);\n                vertexCount += object.splatCount;\n                splatIndex++;\n                \n                for(let singleSplat of object.splats) {\n                    this._singleSplatIndices.set(singleSplat, splatIndex);\n                    this._singleOffsets.set(singleSplat, splatIndex);\n                    singlelookup.set(vertexCount, singleSplat);\n                    splatIndex++;\n                }\n            }\n        }\n\n        this._vertexCount = vertexCount;\n        this._renderedSplats = vertexCount;\n        this._width = 2048;\n        this._height = Math.ceil((2 * this.vertexCount) / this.width);\n        this._data = new Uint32Array(this.width * this.height * 4);\n\n        this._transformsWidth = 5;\n        this._transformsHeight = lookup.size;\n        this._transforms = new Float32Array(this._transformsWidth * this._transformsHeight * 4);\n\n        this._transformIndicesWidth = 1024;\n        this._transformIndicesHeight = Math.ceil(this.vertexCount / this._transformIndicesWidth);\n        this._transformIndices = new Uint32Array(this._transformIndicesWidth * this._transformIndicesHeight);\n\n        this._colorTransformsWidth = 4;\n        this._colorTransformsHeight = 64;\n        this._colorTransforms = new Float32Array(this._colorTransformsWidth * this._colorTransformsHeight * 4);\n        this._colorTransforms.fill(0);\n        this._colorTransforms[0] = 1;\n        this._colorTransforms[5] = 1;\n        this._colorTransforms[10] = 1;\n        this._colorTransforms[15] = 1;\n\n        this._colorTransformIndicesWidth = 1024;\n        this._colorTransformIndicesHeight = Math.ceil(this.vertexCount / this._colorTransformIndicesWidth);\n        this._colorTransformIndices = new Uint32Array(\n            this._colorTransformIndicesWidth * this._colorTransformIndicesHeight,\n        );\n        this.colorTransformIndices.fill(0);\n\n        this._positions = new Float32Array(this.vertexCount * 3);\n        this._rotations = new Float32Array(this.vertexCount * 4);\n        this._scales = new Float32Array(this.vertexCount * 3);\n\n        this._worker = new DataWorker();\n\n        const updateRenderData = (splat: Splat) => {\n            this._renderedSplats = splat.data.renderedSplats;\n            this._height = Math.ceil((2 * this._renderedSplats) / this.width);\n            this._data = new Uint32Array(this.width * this.height * 4);\n\n            this._transformIndicesWidth = 1024;\n            this._transformIndicesHeight = Math.ceil(this._renderedSplats / this._transformIndicesWidth);\n            this._transformIndices = new Uint32Array(this._transformIndicesWidth * this._transformIndicesHeight);\n\n            this._colorTransformIndicesWidth = 1024;\n            this._colorTransformIndicesHeight = Math.ceil(this._renderedSplats / this._colorTransformIndicesWidth);\n            this._colorTransformIndices = new Uint32Array(\n                this._colorTransformIndicesWidth * this._colorTransformIndicesHeight,\n            );\n            this.colorTransformIndices.fill(0);\n\n            this._positions = new Float32Array(this._renderedSplats * 3);\n            this._rotations = new Float32Array(this._renderedSplats * 4);\n            this._scales = new Float32Array(this._renderedSplats * 3);\n        }\n        const updateTransform = (splat: Splat) => {\n            const splatIndex = this._splatIndices.get(splat) as number;\n            this._transforms.set(splat.transform.buffer, splatIndex * 20);\n            this._transforms[splatIndex * 20 + 16] = splat.selected ? 1 : 0;\n            splat.positionChanged = false;\n            splat.rotationChanged = false;\n            splat.scaleChanged = false;\n            splat.selectedChanged = false;\n            this.transformsChanged = true;\n        };\n\n        const updateColorTransforms = () => {\n            let colorTransformsChanged = false;\n            for (const splat of this._splatIndices.keys()) {\n                if (splat.colorTransformChanged) {\n                    colorTransformsChanged = true;\n                    break;\n                }\n            }\n            if (!colorTransformsChanged) {\n                return;\n            }\n            const colorTransformsMap: Matrix4[] = [new Matrix4()];\n            this._colorTransformIndices.fill(0);\n            let i = 1;\n            for (const splat of this._splatIndices.keys()) {\n                const offset = this._offsets.get(splat) as number;\n                for (const colorTransform of splat.colorTransforms) {\n                    if (!colorTransformsMap.includes(colorTransform)) {\n                        colorTransformsMap.push(colorTransform);\n                        i++;\n                    }\n                }\n                for (const index of splat.colorTransformsMap.keys()) {\n                    const colorTransformIndex = splat.colorTransformsMap.get(index) as number;\n                    this._colorTransformIndices[index + offset] = colorTransformIndex + i - 1;\n                }\n                splat.colorTransformChanged = false;\n            }\n            for (let index = 0; index < colorTransformsMap.length; index++) {\n                const colorTransform = colorTransformsMap[index];\n                this._colorTransforms.set(colorTransform.buffer, index * 16);\n            }\n            this.colorTransformsChanged = true;\n        };\n\n        this._worker.onmessage = (e) => {\n            if (e.data.response) {\n                const response = e.data.response;\n                const splat = lookup.get(response.offset) as Splat;\n                updateTransform(splat);\n                updateColorTransforms();\n\n                const renderedFrame = new Uint8Array(response.rendered);\n                let renderedCount = 0;\n                for (let i = 0; i < response.vertexCount; i++) {\n                    if (renderedFrame[i] === 1) {\n                        renderedCount++;\n                    }\n                }\n\n                const splatIndex = this._splatIndices.get(splat) as number;\n                for (let i = 0; i < splat.splatCount; i++) {\n                    this._transformIndices[response.offset + i] = splatIndex;\n                }\n                \n                // console.log(\"this._data: \" +this._data.length)\n                // console.log(\"response.data: \" + response.data.length)\n                // console.log(\"response.offset: \" + response.offset)\n                this._data.set(response.data, response.offset * 8);\n                splat.data.reattach(\n                    response.positions,\n                    response.rotations,\n                    response.scales,\n                    response.colors,\n                    response.selection,\n                    response.rendered,\n                );\n\n                this._positions.set(response.worldPositions, response.offset * 3);\n                this._rotations.set(response.worldRotations, response.offset * 4);\n                this._scales.set(response.worldScales, response.offset * 3);\n\n                this._updating.delete(splat);\n\n                splat.selectedChanged = false;\n                splat.renderNumberChanged = false;\n\n                this.dataChanged = true;\n            }\n        };\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let wasmModule: any;\n\n        async function initWasm() {\n            wasmModule = await loadWasm();\n        }\n\n        initWasm();\n\n        async function waitForWasm() {\n            while (!wasmModule) {\n                await new Promise((resolve) => setTimeout(resolve, 0));\n            }\n        }\n\n        const buildImmediate = (splat: Splat) => {\n            if (!wasmModule) {\n                waitForWasm().then(() => {\n                    buildImmediate(splat);\n                });\n                return;\n            }\n\n            updateTransform(splat);\n\n            const positionsPtr = wasmModule._malloc(3 * splat.data.renderedSplats * 4);\n            const rotationsPtr = wasmModule._malloc(4 * splat.data.renderedSplats * 4);\n            const scalesPtr = wasmModule._malloc(3 * splat.data.renderedSplats * 4);\n            const colorsPtr = wasmModule._malloc(4 * splat.data.renderedSplats);\n            const selectionPtr = wasmModule._malloc(splat.data.renderedSplats);\n            const renderedPtr = wasmModule._malloc(splat.splatCount)\n            const dataPtr = wasmModule._malloc(8 * splat.data.renderedSplats * 4);\n            const worldPositionsPtr = wasmModule._malloc(3 * splat.splatCount * 4);\n            const worldRotationsPtr = wasmModule._malloc(4 * splat.splatCount * 4);\n            const worldScalesPtr = wasmModule._malloc(3 * splat.splatCount * 4);\n            \n\n            wasmModule.HEAPF32.set(splat.Positions, positionsPtr / 4);\n            wasmModule.HEAPF32.set(splat.Rotations, rotationsPtr / 4);\n            wasmModule.HEAPF32.set(splat.Scales, scalesPtr / 4);\n            wasmModule.HEAPU8.set(splat.Colors, colorsPtr);\n            wasmModule.HEAPU8.set(splat.Selections, selectionPtr);\n            wasmModule.HEAPU8.set(splat.Rendered, renderedPtr);\n\n            wasmModule._pack(\n                splat.selected,\n                splat.splatCount,\n                positionsPtr,\n                rotationsPtr,\n                scalesPtr,\n                colorsPtr,\n                selectionPtr,\n                renderedPtr,\n                dataPtr,\n                worldPositionsPtr,\n                worldRotationsPtr,\n                worldScalesPtr,\n            );\n\n            const outData = new Uint32Array(wasmModule.HEAPU32.buffer, dataPtr, splat.data.renderedSplats * 8);\n            const worldPositions = new Float32Array(\n                wasmModule.HEAPF32.buffer,\n                worldPositionsPtr,\n                splat.splatCount * 3,\n            );\n            const worldRotations = new Float32Array(\n                wasmModule.HEAPF32.buffer,\n                worldRotationsPtr,\n                splat.splatCount * 4,\n            );\n            const worldScales = new Float32Array(wasmModule.HEAPF32.buffer, worldScalesPtr, splat.splatCount * 3);\n\n            const splatIndex = this._splatIndices.get(splat) as number;\n            const offset = this._offsets.get(splat) as number;\n            for (let i = 0; i < splat.splatCount; i++) {\n                this._transformIndices[offset + i] = splatIndex;\n            }\n            this._data.set(outData, offset * 8);\n            this._positions.set(worldPositions, offset * 3);\n            this._rotations.set(worldRotations, offset * 4);\n            this._scales.set(worldScales, offset * 3);\n\n            wasmModule._free(positionsPtr);\n            wasmModule._free(rotationsPtr);\n            wasmModule._free(scalesPtr);\n            wasmModule._free(colorsPtr);\n            wasmModule._free(selectionPtr);\n            wasmModule._free(renderedPtr);\n            wasmModule._free(dataPtr);\n            wasmModule._free(worldPositionsPtr);\n            wasmModule._free(worldRotationsPtr);\n            wasmModule._free(worldScalesPtr);\n            \n\n            this.dataChanged = true;\n            this.colorTransformsChanged = true;\n        };\n\n        const build = (splat: Splat) => {\n            if (splat.positionChanged || splat.rotationChanged || splat.scaleChanged || splat.selectedChanged) {\n                updateTransform(splat);\n            }\n            \n            if(splat.renderNumberChanged) {\n                updateRenderData(splat);\n                splat.renderNumberChanged = false;\n            }\n\n            if (splat.colorTransformChanged) {\n                updateColorTransforms();\n            }\n            \n            if (!splat.data.changed || splat.data.detached || splat.renderNumberChanged) return;\n\n            splat.data.calculateRenderedTransforms();\n            \n            const serializedSplat = {\n                position: new Float32Array(splat.position.flat()),\n                rotation: new Float32Array(splat.rotation.flat()),\n                scale: new Float32Array(splat.scale.flat()),\n                selected: splat.selected,\n                vertexCount: splat.splatCount,\n                positions: splat.Positions,\n                rotations: splat.Rotations,\n                scales: splat.Scales,\n                colors: splat.Colors,\n                selection: splat.Selections,\n                rendered: splat.Rendered,\n                offset: this._offsets.get(splat) as number,\n            };\n            \n            this._worker.postMessage(\n                {\n                    splat: serializedSplat,\n                },\n                [\n                    serializedSplat.position.buffer,\n                    serializedSplat.rotation.buffer,\n                    serializedSplat.scale.buffer,\n                    serializedSplat.positions.buffer,\n                    serializedSplat.rotations.buffer,\n                    serializedSplat.scales.buffer,\n                    serializedSplat.colors.buffer,\n                    serializedSplat.selection.buffer,\n                    serializedSplat.rendered.buffer,\n                ],\n            );\n\n            this._updating.add(splat);\n\n            splat.data.detached = true;\n        };\n\n        this.getSplat = (index: number) => {\n            let splat = null;\n            for (const [key, value] of this._offsets) {\n                if (index >= value) {\n                    splat = key;\n                } else {\n                    break;\n                }\n            }\n            return splat;\n        };\n\n        this.getLocalIndex = (splat: Splat, index: number) => {\n            const offset = this._offsets.get(splat) as number;\n            return index - offset;\n        };\n\n        this.markDirty = (splat: Splat) => {\n            this._dirty.add(splat);\n        };\n\n        this.rebuild = () => {\n            for (const splat of this._dirty) {\n                build(splat);\n            }\n\n            this._dirty.clear();\n        };\n\n        this.dispose = () => {\n            this._worker.terminate();\n        };\n\n        for (const splat of this._splatIndices.keys()) {\n            buildImmediate(splat);\n        }\n\n        updateColorTransforms();\n    }\n    \n    get offsets() {\n        return this._offsets;\n    }\n\n    get singleOffsets() {\n        return this._singleOffsets;\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    get width() {\n        return this._width;\n    }\n\n    get height() {\n        return this._height;\n    }\n\n    get transforms() {\n        return this._transforms;\n    }\n\n    get transformsWidth() {\n        return this._transformsWidth;\n    }\n\n    get transformsHeight() {\n        return this._transformsHeight;\n    }\n\n    get transformIndices() {\n        return this._transformIndices;\n    }\n\n    get transformIndicesWidth() {\n        return this._transformIndicesWidth;\n    }\n\n    get transformIndicesHeight() {\n        return this._transformIndicesHeight;\n    }\n\n    get colorTransforms() {\n        return this._colorTransforms;\n    }\n\n    get colorTransformsWidth() {\n        return this._colorTransformsWidth;\n    }\n\n    get colorTransformsHeight() {\n        return this._colorTransformsHeight;\n    }\n\n    get colorTransformIndices() {\n        return this._colorTransformIndices;\n    }\n\n    get colorTransformIndicesWidth() {\n        return this._colorTransformIndicesWidth;\n    }\n\n    get colorTransformIndicesHeight() {\n        return this._colorTransformIndicesHeight;\n    }\n\n    get positions() {\n        return this._positions;\n    }\n\n    get rotations() {\n        return this._rotations;\n    }\n\n    get scales() {\n        return this._scales;\n    }\n\n    get vertexCount() {\n        return this._renderedSplats;\n    }\n\n    get needsRebuild() {\n        return this._dirty.size > 0;\n    }\n\n    get updating() {\n        return this._updating.size > 0;\n    }\n}\n\nexport { RenderData };\n","class Color32 {\n    public readonly r: number;\n    public readonly g: number;\n    public readonly b: number;\n    public readonly a: number;\n\n    constructor(r: number = 0, g: number = 0, b: number = 0, a: number = 255) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    flat(): number[] {\n        return [this.r, this.g, this.b, this.a];\n    }\n\n    flatNorm(): number[] {\n        return [this.r / 255, this.g / 255, this.b / 255, this.a / 255];\n    }\n\n    toHexString(): string {\n        return (\n            \"#\" +\n            this.flat()\n                .map((x) => x.toString(16).padStart(2, \"0\"))\n                .join(\"\")\n        );\n    }\n\n    toString(): string {\n        return `[${this.flat().join(\", \")}]`;\n    }\n}\n\nexport { Color32 };\n","import SortWorker from \"web-worker:../utils/SortWorker.ts\";\n\nimport { ShaderProgram } from \"./ShaderProgram\";\nimport { ShaderPass } from \"../passes/ShaderPass\";\nimport { RenderData } from \"../utils/RenderData\";\nimport { Color32 } from \"../../../math/Color32\";\nimport {\n    ObjectAddedEvent,\n    ObjectChangedEvent,\n    ObjectRemovedEvent,\n    RenderedSplatsChangedEvent\n} from \"../../../events/Events\";\nimport { Splat } from \"../../../splats/Splat\";\nimport { WebGLRenderer } from \"../../WebGLRenderer\";\nimport { Scene } from \"../../../core/Scene\"\n\nconst vertexShaderSource = /* glsl */ `#version 300 es\nprecision highp float;\nprecision highp int;\n\nuniform highp usampler2D u_texture;\nuniform highp sampler2D u_transforms;\nuniform highp usampler2D u_transformIndices;\nuniform highp sampler2D u_colorTransforms;\nuniform highp usampler2D u_colorTransformIndices;\nuniform mat4 projection, view;\nuniform vec2 focal;\nuniform vec2 viewport;\n\nuniform bool useDepthFade;\nuniform float depthFade;\n\nin vec2 position;\nin int index;\n\nout vec4 vColor;\nout vec2 vPosition;\nout float vSize;\nout float vSelected;\n\nvoid main () {\n    uvec4 cen = texelFetch(u_texture, ivec2((uint(index) & 0x3ffu) << 1, uint(index) >> 10), 0);\n    float selected = float((cen.w >> 24) & 0xffu);\n\n    uint transformIndex = texelFetch(u_transformIndices, ivec2(uint(index) & 0x3ffu, uint(index) >> 10), 0).x;\n    mat4 transform = mat4(\n        texelFetch(u_transforms, ivec2(0, transformIndex), 0),\n        texelFetch(u_transforms, ivec2(1, transformIndex), 0),\n        texelFetch(u_transforms, ivec2(2, transformIndex), 0),\n        texelFetch(u_transforms, ivec2(3, transformIndex), 0)\n    );\n\n    if (selected < 0.5) {\n        selected = texelFetch(u_transforms, ivec2(4, transformIndex), 0).x;\n    }\n\n    mat4 viewTransform = view * transform;\n\n    vec4 cam = viewTransform * vec4(uintBitsToFloat(cen.xyz), 1);\n    vec4 pos2d = projection * cam;\n\n    float clip = 1.2 * pos2d.w;\n    if (pos2d.z < -pos2d.w || pos2d.z > pos2d.w || pos2d.x < -clip || pos2d.x > clip || pos2d.y < -clip || pos2d.y > clip) {\n        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);\n        return;\n    }\n\n    uvec4 cov = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 1) | 1u, uint(index) >> 10), 0);\n    vec2 u1 = unpackHalf2x16(cov.x), u2 = unpackHalf2x16(cov.y), u3 = unpackHalf2x16(cov.z);\n    mat3 Vrk = mat3(u1.x, u1.y, u2.x, u1.y, u2.y, u3.x, u2.x, u3.x, u3.y);\n\n    mat3 J = mat3(\n        focal.x / cam.z, 0., -(focal.x * cam.x) / (cam.z * cam.z), \n        0., -focal.y / cam.z, (focal.y * cam.y) / (cam.z * cam.z), \n        0., 0., 0.\n    );\n\n    mat3 T = transpose(mat3(viewTransform)) * J;\n    mat3 cov2d = transpose(T) * Vrk * T;\n\n    //ref: https://github.com/graphdeco-inria/diff-gaussian-rasterization/blob/main/cuda_rasterizer/forward.cu#L110-L111\n    cov2d[0][0] += 0.3;\n    cov2d[1][1] += 0.3;\n\n    float mid = (cov2d[0][0] + cov2d[1][1]) / 2.0;\n    float radius = length(vec2((cov2d[0][0] - cov2d[1][1]) / 2.0, cov2d[0][1]));\n    float lambda1 = mid + radius, lambda2 = mid - radius;\n\n    if (lambda2 < 0.0) return;\n    vec2 diagonalVector = normalize(vec2(cov2d[0][1], lambda1 - cov2d[0][0]));\n    vec2 majorAxis = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;\n    vec2 minorAxis = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);\n\n    uint colorTransformIndex = texelFetch(u_colorTransformIndices, ivec2(uint(index) & 0x3ffu, uint(index) >> 10), 0).x;\n    mat4 colorTransform = mat4(\n        texelFetch(u_colorTransforms, ivec2(0, colorTransformIndex), 0),\n        texelFetch(u_colorTransforms, ivec2(1, colorTransformIndex), 0),\n        texelFetch(u_colorTransforms, ivec2(2, colorTransformIndex), 0),\n        texelFetch(u_colorTransforms, ivec2(3, colorTransformIndex), 0)\n    );\n\n    vec4 color = vec4((cov.w) & 0xffu, (cov.w >> 8) & 0xffu, (cov.w >> 16) & 0xffu, (cov.w >> 24) & 0xffu) / 255.0;\n    vColor = colorTransform * color;\n\n    vPosition = position;\n    vSize = length(majorAxis);\n    vSelected = selected;\n\n    float scalingFactor = 1.0;\n\n    if (useDepthFade) {\n        float depthNorm = (pos2d.z / pos2d.w + 1.0) / 2.0;\n        float near = 0.1; float far = 100.0;\n        float normalizedDepth = (2.0 * near) / (far + near - depthNorm * (far - near));\n        float start = max(normalizedDepth - 0.1, 0.0);\n        float end = min(normalizedDepth + 0.1, 1.0);\n        scalingFactor = clamp((depthFade - start) / (end - start), 0.0, 1.0);\n    }\n\n    vec2 vCenter = vec2(pos2d) / pos2d.w;\n    gl_Position = vec4(\n        vCenter \n        + position.x * majorAxis * scalingFactor / viewport\n        + position.y * minorAxis * scalingFactor / viewport, 0.0, 1.0);\n}\n`;\n\nconst fragmentShaderSource = /* glsl */ `#version 300 es\nprecision highp float;\n\nuniform float outlineThickness;\nuniform vec4 outlineColor;\n\nin vec4 vColor;\nin vec2 vPosition;\nin float vSize;\nin float vSelected;\n\nout vec4 fragColor;\n\nvoid main () {\n    float A = -dot(vPosition, vPosition);\n\n    if (A < -4.0) discard;\n\n    if (vSelected < 0.5) {\n        float B = exp(A) * vColor.a;\n        fragColor = vec4(B * vColor.rgb, B);\n        return;\n    }\n\n    float outlineThreshold = -4.0 + (outlineThickness / vSize);\n\n    if (A < outlineThreshold) {\n        fragColor = outlineColor;\n    } \n    else {\n        float B = exp(A) * vColor.a;\n        fragColor = vec4(B * vColor.rgb, B);\n    }\n}\n`;\n\nclass RenderProgram extends ShaderProgram {\n    private _outlineThickness: number = 10.0;\n    private _outlineColor: Color32 = new Color32(255, 165, 0, 255);\n    private _renderData: RenderData | null = null;\n    private _depthIndex: Uint32Array = new Uint32Array();\n    private _splatTexture: WebGLTexture | null = null;\n    private _worker: Worker | null = null;\n\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n    private _setOutlineThickness: (value: number) => void;\n    private _setOutlineColor: (value: Color32) => void;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[]) {\n        super(renderer, passes);\n\n        const canvas = renderer.canvas;\n        const gl = renderer.gl;\n\n        let u_projection: WebGLUniformLocation;\n        let u_viewport: WebGLUniformLocation;\n        let u_focal: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_texture: WebGLUniformLocation;\n        let u_transforms: WebGLUniformLocation;\n        let u_transformIndices: WebGLUniformLocation;\n        let u_colorTransforms: WebGLUniformLocation;\n        let u_colorTransformIndices: WebGLUniformLocation;\n\n        let u_outlineThickness: WebGLUniformLocation;\n        let u_outlineColor: WebGLUniformLocation;\n\n        let positionAttribute: number;\n        let indexAttribute: number;\n\n        let transformsTexture: WebGLTexture;\n        let transformIndicesTexture: WebGLTexture;\n\n        let colorTransformsTexture: WebGLTexture;\n        let colorTransformIndicesTexture: WebGLTexture;\n\n        let vertexBuffer: WebGLBuffer;\n        let indexBuffer: WebGLBuffer;\n\n        this._resize = () => {\n            if (!this._camera) return;\n\n            this._camera.data.setSize(canvas.width, canvas.height);\n            this._camera.update();\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n\n            u_viewport = gl.getUniformLocation(this.program, \"viewport\") as WebGLUniformLocation;\n            gl.uniform2fv(u_viewport, new Float32Array([canvas.width, canvas.height]));\n        };\n\n        const createWorker = () => {\n            this._worker = new SortWorker();\n            this._worker.onmessage = (e) => {\n                if (e.data.depthIndex) {\n                    const { depthIndex } = e.data;\n                    this._depthIndex = depthIndex;\n                    gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n                    gl.bufferData(gl.ARRAY_BUFFER, depthIndex, gl.STATIC_DRAW);\n                }\n            };\n        };\n\n        this._initialize = () => {\n            if (!this._scene || !this._camera) {\n                console.error(\"Cannot render without scene and camera\");\n                return;\n            }\n\n            this._resize();\n            \n            this._scene.addEventListener(\"objectAdded\", handleObjectAdded);\n            this._scene.addEventListener(\"objectRemoved\", handleObjectRemoved);\n            for (const object of this._scene.objects) {\n                if (object instanceof Splat) {\n                    object.addEventListener(\"objectChanged\", handleObjectChanged);\n                    object.addEventListener(\"renderedSplatsChanged\", handleRenderedSplatsChanged);\n                }\n            }\n\n            this._renderData = new RenderData(this._scene);\n\n            u_focal = gl.getUniformLocation(this.program, \"focal\") as WebGLUniformLocation;\n            gl.uniform2fv(u_focal, new Float32Array([this._camera.data.fx, this._camera.data.fy]));\n\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            u_outlineThickness = gl.getUniformLocation(this.program, \"outlineThickness\") as WebGLUniformLocation;\n            gl.uniform1f(u_outlineThickness, this.outlineThickness);\n\n            u_outlineColor = gl.getUniformLocation(this.program, \"outlineColor\") as WebGLUniformLocation;\n            gl.uniform4fv(u_outlineColor, new Float32Array(this.outlineColor.flatNorm()));\n\n            this._splatTexture = gl.createTexture() as WebGLTexture;\n            u_texture = gl.getUniformLocation(this.program, \"u_texture\") as WebGLUniformLocation;\n            gl.uniform1i(u_texture, 0);\n\n            transformsTexture = gl.createTexture() as WebGLTexture;\n            u_transforms = gl.getUniformLocation(this.program, \"u_transforms\") as WebGLUniformLocation;\n            gl.uniform1i(u_transforms, 1);\n\n            transformIndicesTexture = gl.createTexture() as WebGLTexture;\n            u_transformIndices = gl.getUniformLocation(this.program, \"u_transformIndices\") as WebGLUniformLocation;\n            gl.uniform1i(u_transformIndices, 2);\n\n            colorTransformsTexture = gl.createTexture() as WebGLTexture;\n            u_colorTransforms = gl.getUniformLocation(this.program, \"u_colorTransforms\") as WebGLUniformLocation;\n            gl.uniform1i(u_colorTransforms, 3);\n\n            colorTransformIndicesTexture = gl.createTexture() as WebGLTexture;\n            u_colorTransformIndices = gl.getUniformLocation(\n                this.program,\n                \"u_colorTransformIndices\",\n            ) as WebGLUniformLocation;\n            gl.uniform1i(u_colorTransformIndices, 4);\n\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-2, -2, 2, -2, 2, 2, -2, 2]), gl.STATIC_DRAW);\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n            gl.vertexAttribPointer(positionAttribute, 2, gl.FLOAT, false, 0, 0);\n\n            indexBuffer = gl.createBuffer() as WebGLBuffer;\n            indexAttribute = gl.getAttribLocation(this.program, \"index\");\n            gl.enableVertexAttribArray(indexAttribute);\n            gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n\n            createWorker();\n        };\n\n        const handleObjectAdded = (event: Event) => {\n            const e = event as ObjectAddedEvent;\n\n            if (e.object instanceof Splat) {\n                e.object.addEventListener(\"objectChanged\", handleObjectChanged);\n            }\n\n            resetSplatData();\n        };\n\n        const handleObjectRemoved = (event: Event) => {\n            const e = event as ObjectRemovedEvent;\n\n            if (e.object instanceof Splat) {\n                e.object.removeEventListener(\"objectChanged\", handleObjectChanged);\n            }\n\n            resetSplatData();\n        };\n\n        const handleRenderedSplatsChanged = (event: Event) => {\n            const e = event as RenderedSplatsChangedEvent;\n            \n            resetSplatData();\n        };\n\n        const handleObjectChanged = (event: Event) => {\n            const e = event as ObjectChangedEvent;\n            \n            if (e.object instanceof Splat && this._renderData) {\n                this._renderData.markDirty(e.object);\n            }\n        };\n\n        const resetSplatData = () => {\n            this._renderData?.dispose();\n            this._renderData = new RenderData(this._scene as Scene);\n\n            this._worker?.terminate();\n            createWorker();\n        };\n\n        this._render = () => {\n            if (!this._scene || !this._camera || !this.renderData) {\n                console.error(\"Cannot render without scene and camera\");\n                return;\n            }\n\n            if (this.renderData.needsRebuild) {\n                this.renderData.rebuild();\n            }\n\n            if (\n                this.renderData.dataChanged ||\n                this.renderData.transformsChanged ||\n                this.renderData.colorTransformsChanged\n            ) {\n                \n                if (this.renderData.dataChanged) {\n                    gl.activeTexture(gl.TEXTURE0);\n                    gl.bindTexture(gl.TEXTURE_2D, this.splatTexture);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                    gl.texImage2D(\n                        gl.TEXTURE_2D,\n                        0,\n                        gl.RGBA32UI,\n                        this.renderData.width,\n                        this.renderData.height,\n                        0,\n                        gl.RGBA_INTEGER,\n                        gl.UNSIGNED_INT,\n                        this.renderData.data,\n                    );\n                }\n\n                if (this.renderData.transformsChanged) {\n                    gl.activeTexture(gl.TEXTURE1);\n                    gl.bindTexture(gl.TEXTURE_2D, transformsTexture);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                    gl.texImage2D(\n                        gl.TEXTURE_2D,\n                        0,\n                        gl.RGBA32F,\n                        this.renderData.transformsWidth,\n                        this.renderData.transformsHeight,\n                        0,\n                        gl.RGBA,\n                        gl.FLOAT,\n                        this.renderData.transforms,\n                    );\n\n                    gl.activeTexture(gl.TEXTURE2);\n                    gl.bindTexture(gl.TEXTURE_2D, transformIndicesTexture);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                    gl.texImage2D(\n                        gl.TEXTURE_2D,\n                        0,\n                        gl.R32UI,\n                        this.renderData.transformIndicesWidth,\n                        this.renderData.transformIndicesHeight,\n                        0,\n                        gl.RED_INTEGER,\n                        gl.UNSIGNED_INT,\n                        this.renderData.transformIndices,\n                    );\n                }\n\n                if (this.renderData.colorTransformsChanged) {\n                    gl.activeTexture(gl.TEXTURE3);\n                    gl.bindTexture(gl.TEXTURE_2D, colorTransformsTexture);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                    gl.texImage2D(\n                        gl.TEXTURE_2D,\n                        0,\n                        gl.RGBA32F,\n                        this.renderData.colorTransformsWidth,\n                        this.renderData.colorTransformsHeight,\n                        0,\n                        gl.RGBA,\n                        gl.FLOAT,\n                        this.renderData.colorTransforms,\n                    );\n\n                    gl.activeTexture(gl.TEXTURE4);\n                    gl.bindTexture(gl.TEXTURE_2D, colorTransformIndicesTexture);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                    gl.texImage2D(\n                        gl.TEXTURE_2D,\n                        0,\n                        gl.R32UI,\n                        this.renderData.colorTransformIndicesWidth,\n                        this.renderData.colorTransformIndicesHeight,\n                        0,\n                        gl.RED_INTEGER,\n                        gl.UNSIGNED_INT,\n                        this.renderData.colorTransformIndices,\n                    );\n                }\n\n                const detachedPositions = new Float32Array(this.renderData.positions.slice().buffer);\n                const detachedTransforms = new Float32Array(this.renderData.transforms.slice().buffer);\n                const detachedTransformIndices = new Uint32Array(this.renderData.transformIndices.slice().buffer);\n                this._worker?.postMessage(\n                    {\n                        sortData: {\n                            positions: detachedPositions,\n                            transforms: detachedTransforms,\n                            transformIndices: detachedTransformIndices,\n                            vertexCount: this.renderData.vertexCount,\n                        },\n                    },\n                    [detachedPositions.buffer, detachedTransforms.buffer, detachedTransformIndices.buffer],\n                );\n\n                this.renderData.dataChanged = false;\n                this.renderData.transformsChanged = false;\n                this.renderData.colorTransformsChanged = false;\n                // console.log(\"Transform Sort\");\n            }\n\n            this._camera.update();\n            // console.log(\"Camera Sort\");\n            this._worker?.postMessage({ viewProj: this._camera.data.viewProj.buffer });\n\n            gl.viewport(0, 0, canvas.width, canvas.height);\n            gl.clearColor(0, 0, 0, 0);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n\n            gl.disable(gl.DEPTH_TEST);\n            gl.enable(gl.BLEND);\n            gl.blendFuncSeparate(gl.ONE_MINUS_DST_ALPHA, gl.ONE, gl.ONE_MINUS_DST_ALPHA, gl.ONE);\n            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.vertexAttribPointer(positionAttribute, 2, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this.depthIndex, gl.STATIC_DRAW);\n            gl.vertexAttribIPointer(indexAttribute, 1, gl.INT, 0, 0);\n            gl.vertexAttribDivisor(indexAttribute, 1);\n\n            gl.drawArraysInstanced(gl.TRIANGLE_FAN, 0, 4, this.depthIndex.length);\n        };\n\n        this._dispose = () => {\n            if (!this._scene || !this._camera || !this.renderData) {\n                console.error(\"Cannot dispose without scene and camera\");\n                return;\n            }\n\n            this._scene.removeEventListener(\"objectAdded\", handleObjectAdded);\n            this._scene.removeEventListener(\"objectRemoved\", handleObjectRemoved);\n            for (const object of this._scene.objects) {\n                if (object instanceof Splat) {\n                    object.removeEventListener(\"objectChanged\", handleObjectChanged);\n                    object.removeEventListener(\"renderedSplatsChanged\", handleObjectChanged);\n                }\n            }\n\n            this._worker?.terminate();\n            this.renderData.dispose();\n\n            gl.deleteTexture(this.splatTexture);\n            gl.deleteTexture(transformsTexture);\n            gl.deleteTexture(transformIndicesTexture);\n\n            gl.deleteBuffer(indexBuffer);\n            gl.deleteBuffer(vertexBuffer);\n        };\n\n        this._setOutlineThickness = (value: number) => {\n            this._outlineThickness = value;\n            if (this._initialized) {\n                gl.uniform1f(u_outlineThickness, value);\n            }\n        };\n\n        this._setOutlineColor = (value: Color32) => {\n            this._outlineColor = value;\n            if (this._initialized) {\n                gl.uniform4fv(u_outlineColor, new Float32Array(value.flatNorm()));\n            }\n        };\n    }\n\n    get renderData() {\n        return this._renderData;\n    }\n\n    get depthIndex() {\n        return this._depthIndex;\n    }\n\n    get splatTexture() {\n        return this._splatTexture;\n    }\n\n    get outlineThickness() {\n        return this._outlineThickness;\n    }\n\n    set outlineThickness(value: number) {\n        this._setOutlineThickness(value);\n    }\n\n    get outlineColor() {\n        return this._outlineColor;\n    }\n\n    set outlineColor(value: Color32) {\n        this._setOutlineColor(value);\n    }\n\n    get worker() {\n        return this._worker;\n    }\n\n    protected _getVertexSource() {\n        return vertexShaderSource;\n    }\n\n    protected _getFragmentSource() {\n        return fragmentShaderSource;\n    }\n}\n\nexport { RenderProgram };\n","import { RenderProgram } from \"../programs/RenderProgram\";\nimport { ShaderProgram } from \"../programs/ShaderProgram\";\nimport { ShaderPass } from \"./ShaderPass\";\n\nclass FadeInPass implements ShaderPass {\n    initialize: (program: ShaderProgram) => void;\n    render: () => void;\n\n    constructor(speed: number = 1.0) {\n        let value = 0.0;\n        let active = false;\n\n        let renderProgram: RenderProgram;\n        let gl: WebGL2RenderingContext;\n        let u_useDepthFade: WebGLUniformLocation;\n        let u_depthFade: WebGLUniformLocation;\n\n        this.initialize = (program: ShaderProgram) => {\n            if (!(program instanceof RenderProgram)) {\n                throw new Error(\"FadeInPass requires a RenderProgram\");\n            }\n\n            value = program.started ? 1.0 : 0.0;\n            active = true;\n            renderProgram = program;\n            gl = program.renderer.gl;\n\n            u_useDepthFade = gl.getUniformLocation(renderProgram.program, \"useDepthFade\") as WebGLUniformLocation;\n            gl.uniform1i(u_useDepthFade, 1);\n\n            u_depthFade = gl.getUniformLocation(renderProgram.program, \"depthFade\") as WebGLUniformLocation;\n            gl.uniform1f(u_depthFade, value);\n        };\n\n        this.render = () => {\n            if (!active || renderProgram.renderData?.updating) return;\n            gl.useProgram(renderProgram.program);\n            value = Math.min(value + speed * 0.01, 1.0);\n            if (value >= 1.0) {\n                active = false;\n                gl.uniform1i(u_useDepthFade, 0);\n            }\n            gl.uniform1f(u_depthFade, value);\n        };\n    }\n\n    dispose() {}\n}\n\nexport { FadeInPass };\n","import type { Scene } from \"../core/Scene\";\nimport { FadeInPass } from \"./webgl/passes/FadeInPass\";\nimport { Camera } from \"../cameras/Camera\";\nimport { Color32 } from \"../math/Color32\";\nimport { ShaderProgram } from \"./webgl/programs/ShaderProgram\";\nimport { RenderProgram } from \"./webgl/programs/RenderProgram\";\nimport { ShaderPass } from \"./webgl/passes/ShaderPass\";\n\nexport class WebGLRenderer {\n    private _canvas: HTMLCanvasElement;\n    private _gl: WebGL2RenderingContext;\n    private _backgroundColor: Color32 = new Color32();\n    private _renderProgram: RenderProgram;\n    \n    private _customPrograms: ShaderProgram[];\n\n    addProgram: (program: ShaderProgram) => void;\n    removeProgram: (program: ShaderProgram) => void;\n    removeAllPrograms: () => void;\n    resize: () => void;\n    setSize: (width: number, height: number) => void;\n    render: (scene: Scene, camera: Camera) => void;\n    dispose: () => void;\n\n    constructor(optionalCanvas: HTMLCanvasElement | null = null, optionalRenderPasses: ShaderPass[] | null = null) {\n        const canvas: HTMLCanvasElement = optionalCanvas || document.createElement(\"canvas\");\n        if (!optionalCanvas) {\n            canvas.style.display = \"block\";\n            canvas.style.boxSizing = \"border-box\";\n            canvas.style.width = \"100%\";\n            canvas.style.height = \"100%\";\n            canvas.style.margin = \"0\";\n            canvas.style.padding = \"0\";\n            document.body.appendChild(canvas);\n        }\n        canvas.style.background = this._backgroundColor.toHexString();\n        this._canvas = canvas;\n\n        this._gl = canvas.getContext(\"webgl2\", { antialias: false }) as WebGL2RenderingContext;\n\n        const renderPasses = optionalRenderPasses || [];\n        if (!optionalRenderPasses) {\n            renderPasses.push(new FadeInPass());\n        }\n        \n        this._renderProgram = new RenderProgram(this, renderPasses);\n        this._customPrograms = [];\n        const programs = [this._renderProgram] as ShaderProgram[];\n\n        this.resize = () => {\n            const width = canvas.clientWidth;\n            const height = canvas.clientHeight;\n            if (canvas.width !== width || canvas.height !== height) {\n                this.setSize(width, height);\n            }\n        };\n\n        this.setSize = (width: number, height: number) => {\n            canvas.width = width;\n            canvas.height = height;\n            this._gl.viewport(0, 0, canvas.width, canvas.height);\n            for (const program of programs) {\n                program.resize();\n            }\n        };\n\n        this.render = (scene: Scene, camera: Camera) => {\n            for (const program of programs) {\n                program.render(scene, camera);\n            }\n        };\n\n        this.dispose = () => {\n            for (const program of programs) {\n                program.dispose();\n            }\n        };\n\n        this.addProgram = (program: ShaderProgram) => {\n            programs.push(program);\n            this._customPrograms?.push(program);\n        };\n\n        this.removeProgram = (program: ShaderProgram) => {\n            const index = programs.indexOf(program);\n            if (index < 0) {\n                throw new Error(\"Program not found\");\n            }\n            programs.splice(index, 1);\n        };\n\n        this.removeAllPrograms = () => {\n            for(let i = 0; i < this._customPrograms.length; i++) {\n                var program = this._customPrograms.pop();\n                if(program != undefined)\n                    this.removeProgram(program);\n            }\n        };\n\n        this.resize();\n    }\n\n    get canvas() {\n        return this._canvas;\n    }\n\n    get gl() {\n        return this._gl;\n    }\n\n    get renderProgram() {\n        return this._renderProgram;\n    }\n\n    get backgroundColor() {\n        return this._backgroundColor;\n    }\n\n    set backgroundColor(value: Color32) {\n        this._backgroundColor = value;\n        this._canvas.style.background = value.toHexString();\n    }\n}\n","import { Camera } from \"../cameras/Camera\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Vector3 } from \"../math/Vector3\";\n\nclass OrbitControls {\n    public enabled: boolean = true;\n\n    minAngle: number = -90;\n    maxAngle: number = 90;\n    minZoom: number = 0.1;\n    maxZoom: number = 30;\n    orbitSpeed: number = 1;\n    panSpeed: number = 1;\n    zoomSpeed: number = 1;\n    dampening: number = 0.12;\n    \n    setCameraTarget: (newTarget: Vector3) => void = () => {};\n    update: () => void;\n    dispose: () => void;\n\n    constructor(\n        camera: Camera,\n        canvas: HTMLElement,\n        alpha: number = 0.5,\n        beta: number = 0.5,\n        radius: number = 5,\n        enableKeyboardControls: boolean = true,\n        inputTarget: Vector3 = new Vector3(),\n    ) {\n        let target = inputTarget.clone();\n\n        let desiredTarget = target.clone();\n        let desiredAlpha = alpha;\n        let desiredBeta = beta;\n        let desiredRadius = radius;\n\n        let dragging = false;\n        let panning = false;\n        let lastDist = 0;\n        let lastX = 0;\n        let lastY = 0;\n\n        const keys: { [key: string]: boolean } = {};\n\n        let isUpdatingCamera = false;\n\n        const onCameraChange = () => {\n            if (isUpdatingCamera) return;\n\n            const eulerRotation = camera.rotation.toEuler();\n            desiredAlpha = -eulerRotation.y;\n            desiredBeta = -eulerRotation.x;\n\n            const x = camera.position.x - desiredRadius * Math.sin(desiredAlpha) * Math.cos(desiredBeta);\n            const y = camera.position.y + desiredRadius * Math.sin(desiredBeta);\n            const z = camera.position.z + desiredRadius * Math.cos(desiredAlpha) * Math.cos(desiredBeta);\n\n            desiredTarget = new Vector3(x, y, z);\n        };\n\n        camera.addEventListener(\"objectChanged\", onCameraChange);\n\n        this.setCameraTarget = (newTarget: Vector3) => {\n            const dx = newTarget.x - camera.position.x;\n            const dy = newTarget.y - camera.position.y;\n            const dz = newTarget.z - camera.position.z;\n            desiredRadius = Math.sqrt(dx * dx + dy * dy + dz * dz);\n            desiredBeta = Math.atan2(dy, Math.sqrt(dx * dx + dz * dz));\n            desiredAlpha = -Math.atan2(dx, dz);\n            desiredTarget = new Vector3(newTarget.x, newTarget.y, newTarget.z);\n        };\n\n        const computeZoomNorm = () => {\n            return 0.1 + (0.9 * (desiredRadius - this.minZoom)) / (this.maxZoom - this.minZoom);\n        };\n\n        const onKeyDown = (e: KeyboardEvent) => {\n            keys[e.code] = true;\n            // Map arrow keys to WASD keys\n            if (e.code === \"ArrowUp\") keys[\"KeyW\"] = true;\n            if (e.code === \"ArrowDown\") keys[\"KeyS\"] = true;\n            if (e.code === \"ArrowLeft\") keys[\"KeyA\"] = true;\n            if (e.code === \"ArrowRight\") keys[\"KeyD\"] = true;\n        };\n\n        const onKeyUp = (e: KeyboardEvent) => {\n            keys[e.code] = false; // Map arrow keys to WASD keys\n            if (e.code === \"ArrowUp\") keys[\"KeyW\"] = false;\n            if (e.code === \"ArrowDown\") keys[\"KeyS\"] = false;\n            if (e.code === \"ArrowLeft\") keys[\"KeyA\"] = false;\n            if (e.code === \"ArrowRight\") keys[\"KeyD\"] = false;\n        };\n\n        const onMouseDown = (e: MouseEvent) => {\n            preventDefault(e);\n\n            if (!this.enabled) return;\n\n            dragging = true;\n            panning = e.button === 2;\n            lastX = e.clientX;\n            lastY = e.clientY;\n            window.addEventListener(\"mouseup\", onMouseUp);\n        };\n\n        const onMouseUp = (e: MouseEvent) => {\n            preventDefault(e);\n\n            dragging = false;\n            panning = false;\n            window.removeEventListener(\"mouseup\", onMouseUp);\n        };\n\n        const onMouseMove = (e: MouseEvent) => {\n            preventDefault(e);\n\n            if (!this.enabled || !dragging || !camera) return;\n\n            const dx = e.clientX - lastX;\n            const dy = e.clientY - lastY;\n\n            if (panning) {\n                const zoomNorm = computeZoomNorm();\n                const panX = -dx * this.panSpeed * 0.01 * zoomNorm;\n                const panY = -dy * this.panSpeed * 0.01 * zoomNorm;\n                const R = Matrix3.RotationFromQuaternion(camera.rotation).buffer;\n                const right = new Vector3(R[0], R[3], R[6]);\n                const up = new Vector3(R[1], R[4], R[7]);\n                desiredTarget = desiredTarget.add(right.multiply(panX));\n                desiredTarget = desiredTarget.add(up.multiply(panY));\n            } else {\n                desiredAlpha -= dx * this.orbitSpeed * 0.003;\n                desiredBeta += dy * this.orbitSpeed * 0.003;\n                desiredBeta = Math.min(\n                    Math.max(desiredBeta, (this.minAngle * Math.PI) / 180),\n                    (this.maxAngle * Math.PI) / 180,\n                );\n            }\n\n            lastX = e.clientX;\n            lastY = e.clientY;\n        };\n\n        const onWheel = (e: WheelEvent) => {\n            preventDefault(e);\n\n            const zoomNorm = computeZoomNorm();\n            desiredRadius += e.deltaY * this.zoomSpeed * 0.025 * zoomNorm;\n            desiredRadius = Math.min(Math.max(desiredRadius, this.minZoom), this.maxZoom);\n        };\n\n        const onTouchStart = (e: TouchEvent) => {\n            preventDefault(e);\n\n            if (e.touches.length === 1) {\n                dragging = true;\n                panning = false;\n                lastX = e.touches[0].clientX;\n                lastY = e.touches[0].clientY;\n                lastDist = 0;\n            } else if (e.touches.length === 2) {\n                dragging = true;\n                panning = true;\n                lastX = (e.touches[0].clientX + e.touches[1].clientX) / 2;\n                lastY = (e.touches[0].clientY + e.touches[1].clientY) / 2;\n                const distX = e.touches[0].clientX - e.touches[1].clientX;\n                const distY = e.touches[0].clientY - e.touches[1].clientY;\n                lastDist = Math.sqrt(distX * distX + distY * distY);\n            }\n        };\n\n        const onTouchEnd = (e: TouchEvent) => {\n            preventDefault(e);\n\n            dragging = false;\n            panning = false;\n        };\n\n        const onTouchMove = (e: TouchEvent) => {\n            preventDefault(e);\n\n            if (!dragging || !camera) return;\n\n            if (panning) {\n                const zoomNorm = computeZoomNorm();\n\n                const distX = e.touches[0].clientX - e.touches[1].clientX;\n                const distY = e.touches[0].clientY - e.touches[1].clientY;\n                const dist = Math.sqrt(distX * distX + distY * distY);\n                const delta = lastDist - dist;\n                desiredRadius += delta * this.zoomSpeed * 0.1 * zoomNorm;\n                desiredRadius = Math.min(Math.max(desiredRadius, this.minZoom), this.maxZoom);\n                lastDist = dist;\n\n                const touchX = (e.touches[0].clientX + e.touches[1].clientX) / 2;\n                const touchY = (e.touches[0].clientY + e.touches[1].clientY) / 2;\n                const dx = touchX - lastX;\n                const dy = touchY - lastY;\n                const R = Matrix3.RotationFromQuaternion(camera.rotation).buffer;\n                const right = new Vector3(R[0], R[3], R[6]);\n                const up = new Vector3(R[1], R[4], R[7]);\n                desiredTarget = desiredTarget.add(right.multiply(-dx * this.panSpeed * 0.025 * zoomNorm));\n                desiredTarget = desiredTarget.add(up.multiply(-dy * this.panSpeed * 0.025 * zoomNorm));\n                lastX = touchX;\n                lastY = touchY;\n            } else {\n                const dx = e.touches[0].clientX - lastX;\n                const dy = e.touches[0].clientY - lastY;\n\n                desiredAlpha -= dx * this.orbitSpeed * 0.003;\n                desiredBeta += dy * this.orbitSpeed * 0.003;\n                desiredBeta = Math.min(\n                    Math.max(desiredBeta, (this.minAngle * Math.PI) / 180),\n                    (this.maxAngle * Math.PI) / 180,\n                );\n\n                lastX = e.touches[0].clientX;\n                lastY = e.touches[0].clientY;\n            }\n        };\n\n        const lerp = (a: number, b: number, t: number) => {\n            return (1 - t) * a + t * b;\n        };\n\n        this.update = () => {\n            isUpdatingCamera = true;\n\n            alpha = lerp(alpha, desiredAlpha, this.dampening);\n            beta = lerp(beta, desiredBeta, this.dampening);\n            radius = lerp(radius, desiredRadius, this.dampening);\n            target = target.lerp(desiredTarget, this.dampening);\n\n            const x = target.x + radius * Math.sin(alpha) * Math.cos(beta);\n            const y = target.y - radius * Math.sin(beta);\n            const z = target.z - radius * Math.cos(alpha) * Math.cos(beta);\n            camera.position = new Vector3(x, y, z);\n\n            const direction = target.subtract(camera.position).normalize();\n            const rx = Math.asin(-direction.y);\n            const ry = Math.atan2(direction.x, direction.z);\n            camera.rotation = Quaternion.FromEuler(new Vector3(rx, ry, 0));\n\n            const moveSpeed = 0.025;\n            const rotateSpeed = 0.01;\n\n            const R = Matrix3.RotationFromQuaternion(camera.rotation).buffer;\n            const forward = new Vector3(-R[2], -R[5], -R[8]);\n            const right = new Vector3(R[0], R[3], R[6]);\n\n            if (keys[\"KeyS\"]) desiredTarget = desiredTarget.add(forward.multiply(moveSpeed));\n            if (keys[\"KeyW\"]) desiredTarget = desiredTarget.subtract(forward.multiply(moveSpeed));\n            if (keys[\"KeyA\"]) desiredTarget = desiredTarget.subtract(right.multiply(moveSpeed));\n            if (keys[\"KeyD\"]) desiredTarget = desiredTarget.add(right.multiply(moveSpeed));\n\n            // Add rotation with 'e' and 'q' for horizontal rotation\n            if (keys[\"KeyE\"]) desiredAlpha += rotateSpeed;\n            if (keys[\"KeyQ\"]) desiredAlpha -= rotateSpeed;\n\n            // Add rotation with 'r' and 'f' for vertical rotation\n            if (keys[\"KeyR\"]) desiredBeta += rotateSpeed;\n            if (keys[\"KeyF\"]) desiredBeta -= rotateSpeed;\n\n            isUpdatingCamera = false;\n        };\n\n        const preventDefault = (e: Event) => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n\n        this.dispose = () => {\n            canvas.removeEventListener(\"dragenter\", preventDefault);\n            canvas.removeEventListener(\"dragover\", preventDefault);\n            canvas.removeEventListener(\"dragleave\", preventDefault);\n            canvas.removeEventListener(\"contextmenu\", preventDefault);\n\n            canvas.removeEventListener(\"mousedown\", onMouseDown);\n            canvas.removeEventListener(\"mousemove\", onMouseMove);\n            canvas.removeEventListener(\"wheel\", onWheel);\n\n            canvas.removeEventListener(\"touchstart\", onTouchStart);\n            canvas.removeEventListener(\"touchend\", onTouchEnd);\n            canvas.removeEventListener(\"touchmove\", onTouchMove);\n\n            if (enableKeyboardControls) {\n                window.removeEventListener(\"keydown\", onKeyDown);\n                window.removeEventListener(\"keyup\", onKeyUp);\n            }\n        };\n\n        if (enableKeyboardControls) {\n            window.addEventListener(\"keydown\", onKeyDown);\n            window.addEventListener(\"keyup\", onKeyUp);\n        }\n\n        canvas.addEventListener(\"dragenter\", preventDefault);\n        canvas.addEventListener(\"dragover\", preventDefault);\n        canvas.addEventListener(\"dragleave\", preventDefault);\n        canvas.addEventListener(\"contextmenu\", preventDefault);\n\n        canvas.addEventListener(\"mousedown\", onMouseDown);\n        canvas.addEventListener(\"mousemove\", onMouseMove);\n        canvas.addEventListener(\"wheel\", onWheel);\n\n        canvas.addEventListener(\"touchstart\", onTouchStart);\n        canvas.addEventListener(\"touchend\", onTouchEnd);\n        canvas.addEventListener(\"touchmove\", onTouchMove);\n\n        this.update();\n    }\n}\n\nexport { OrbitControls };\n","import { Camera } from \"../cameras/Camera\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Vector3 } from \"../math/Vector3\";\n\nclass FPSControls {\n    moveSpeed: number = 1.5;\n    lookSpeed: number = 0.7;\n    dampening: number = 0.5;\n    update: () => void;\n    dispose: () => void;\n\n    constructor(camera: Camera, canvas: HTMLCanvasElement) {\n        const keys: { [key: string]: boolean } = {};\n        let pitch = camera.rotation.toEuler().x;\n        let yaw = camera.rotation.toEuler().y;\n        let targetPosition = camera.position;\n        let pointerLock = false;\n\n        const onMouseDown = () => {\n            canvas.requestPointerLock();\n        };\n\n        const onPointerLockChange = () => {\n            pointerLock = document.pointerLockElement === canvas;\n            if (pointerLock) {\n                canvas.addEventListener(\"mousemove\", onMouseMove);\n            } else {\n                canvas.removeEventListener(\"mousemove\", onMouseMove);\n            }\n        };\n\n        const onMouseMove = (e: MouseEvent) => {\n            const mouseX = e.movementX;\n            const mouseY = e.movementY;\n\n            yaw += mouseX * this.lookSpeed * 0.001;\n            pitch -= mouseY * this.lookSpeed * 0.001;\n            pitch = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, pitch));\n        };\n\n        const onKeyDown = (e: KeyboardEvent) => {\n            keys[e.code] = true;\n            // Map arrow keys to WASD keys\n            if (e.code === \"ArrowUp\") keys[\"KeyW\"] = true;\n            if (e.code === \"ArrowDown\") keys[\"KeyS\"] = true;\n            if (e.code === \"ArrowLeft\") keys[\"KeyA\"] = true;\n            if (e.code === \"ArrowRight\") keys[\"KeyD\"] = true;\n        };\n\n        const onKeyUp = (e: KeyboardEvent) => {\n            keys[e.code] = false;\n            // Map arrow keys to WASD keys\n            if (e.code === \"ArrowUp\") keys[\"KeyW\"] = false;\n            if (e.code === \"ArrowDown\") keys[\"KeyS\"] = false;\n            if (e.code === \"ArrowLeft\") keys[\"KeyA\"] = false;\n            if (e.code === \"ArrowRight\") keys[\"KeyD\"] = false;\n            if (e.code === \"Escape\") document.exitPointerLock();\n        };\n\n        this.update = () => {\n            const R = Matrix3.RotationFromQuaternion(camera.rotation).buffer;\n            const forward = new Vector3(-R[2], -R[5], -R[8]);\n            const right = new Vector3(R[0], R[3], R[6]);\n            let move = new Vector3(0, 0, 0);\n            if (keys[\"KeyS\"]) {\n                move = move.add(forward);\n            }\n            if (keys[\"KeyW\"]) {\n                move = move.subtract(forward);\n            }\n            if (keys[\"KeyA\"]) {\n                move = move.subtract(right);\n            }\n            if (keys[\"KeyD\"]) {\n                move = move.add(right);\n            }\n            move = new Vector3(move.x, 0, move.z);\n            if (move.magnitude() > 0) {\n                move = move.normalize();\n            }\n\n            targetPosition = targetPosition.add(move.multiply(this.moveSpeed * 0.01));\n            camera.position = camera.position.add(targetPosition.subtract(camera.position).multiply(this.dampening));\n\n            camera.rotation = Quaternion.FromEuler(new Vector3(pitch, yaw, 0));\n        };\n\n        const preventDefault = (e: Event) => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n\n        this.dispose = () => {\n            canvas.removeEventListener(\"dragenter\", preventDefault);\n            canvas.removeEventListener(\"dragover\", preventDefault);\n            canvas.removeEventListener(\"dragleave\", preventDefault);\n            canvas.removeEventListener(\"contextmenu\", preventDefault);\n            canvas.removeEventListener(\"mousedown\", onMouseDown);\n\n            document.removeEventListener(\"pointerlockchange\", onPointerLockChange);\n\n            window.removeEventListener(\"keydown\", onKeyDown);\n            window.removeEventListener(\"keyup\", onKeyUp);\n        };\n\n        window.addEventListener(\"keydown\", onKeyDown);\n        window.addEventListener(\"keyup\", onKeyUp);\n\n        canvas.addEventListener(\"dragenter\", preventDefault);\n        canvas.addEventListener(\"dragover\", preventDefault);\n        canvas.addEventListener(\"dragleave\", preventDefault);\n        canvas.addEventListener(\"contextmenu\", preventDefault);\n        canvas.addEventListener(\"mousedown\", onMouseDown);\n\n        document.addEventListener(\"pointerlockchange\", onPointerLockChange);\n\n        this.update();\n    }\n}\n\nexport { FPSControls };\n","import { Vector3 } from \"./Vector3\";\n\nclass Plane {\n    public readonly normal: Vector3;\n    public readonly point: Vector3;\n    public constant: number;\n    \n    constructor(normal: Vector3 = new Vector3(1, 0, 0), point: Vector3 = new Vector3(0,0,0), constant:number = 0) {\n        this.normal = normal;\n        this.point = point;\n        this.constant = constant;\n    }\n\n    setFromCoplanarPoints(a: Vector3, b: Vector3, c: Vector3): this {\n        const v1 = new Vector3().subVectors(c, b);\n        const v2 = new Vector3().subVectors(a, b);\n        const normal = new Vector3().crossVectors(v1, v2).normalize();\n        this.normal.set(normal.x, normal.y, normal.z);\n        this.constant = this.normal.dot(b);\n        return this;\n    }\n\n\n    setComponents(x: number, y:number, z:number, w:number): this {\n        this.normal.set(x, y, z);\n        this.constant = w;\n        return this;\n    }\n    intersect(origin: Vector3, direction: Vector3): Vector3 | null {\n        const denominator = this.normal.dot(direction);\n\n        if (Math.abs(denominator) < 0.0001) {\n            return null;\n        }\n\n        const t = this.normal.dot(this.point.subtract(origin)) / denominator;\n\n        if (t < 0) {\n            return null;\n        }\n\n        return origin.add(direction.multiply(t));\n    }\n\n    normalize(): this {\n        \n        const inverseNormalLength = 1.0 / this.normal.magnitude();\n        this.normal.multiply(inverseNormalLength);\n        this.constant *= inverseNormalLength;\n        return this;\n    }\n\n    distanceToPoint(point: Vector3): number {\n        return this.normal.dot(point) - this.constant;\n    }\n\n    clone(): Plane {\n        return new Plane().copy(this);\n    }\n\n    copy(plane: Plane): this {\n        this.normal.copy(plane.normal);\n        this.constant = plane.constant;\n        return this;\n    }\n}\n\nexport { Plane };\n","import { ShaderProgram } from \"../programs/ShaderProgram\";\n\nclass ShaderPass {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    initialize(program: ShaderProgram) {}\n    render() {}\n    dispose() {}\n}\n\nexport { ShaderPass };\n","import { Splatv } from \"../../../splats/Splatv\";\nimport { SplatvData } from \"../../../splats/SplatvData\";\nimport { WebGLRenderer } from \"../../WebGLRenderer\";\nimport { ShaderPass } from \"../passes/ShaderPass\";\nimport { ShaderProgram } from \"./ShaderProgram\";\nimport { ObjectAddedEvent, ObjectChangedEvent, ObjectRemovedEvent } from \"../../../events/Events\";\nimport { Matrix4 } from \"../../../math/Matrix4\";\n\nconst vertexShaderSource = /* glsl */ `#version 300 es\nprecision highp float;\nprecision highp int;\n  \nuniform highp usampler2D u_texture;\nuniform mat4 projection, view;\nuniform vec2 focal;\nuniform vec2 viewport;\nuniform float time;\n  \nin vec2 position;\nin int index;\n  \nout vec4 vColor;\nout vec2 vPosition;\n  \nvoid main () {\n    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);\n\n    uvec4 motion1 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2) | 3u, uint(index) >> 10), 0);\n    vec2 trbf = unpackHalf2x16(motion1.w);\n    float dt = time - trbf.x;\n\n    float topacity = exp(-1.0 * pow(dt / trbf.y, 2.0));\n    if(topacity < 0.02) return;\n\n    uvec4 motion0 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2) | 2u, uint(index) >> 10), 0);\n    uvec4 static0 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2), uint(index) >> 10), 0);\n\n    vec2 m0 = unpackHalf2x16(motion0.x), m1 = unpackHalf2x16(motion0.y), m2 = unpackHalf2x16(motion0.z), \n         m3 = unpackHalf2x16(motion0.w), m4 = unpackHalf2x16(motion1.x); \n      \n    vec4 trot = vec4(unpackHalf2x16(motion1.y).xy, unpackHalf2x16(motion1.z).xy) * dt;\n    vec3 tpos = (vec3(m0.xy, m1.x) * dt + vec3(m1.y, m2.xy) * dt*dt + vec3(m3.xy, m4.x) * dt*dt*dt);\n      \n    vec4 cam = view * vec4(uintBitsToFloat(static0.xyz) + tpos, 1);\n    vec4 pos = projection * cam;\n  \n    float clip = 1.2 * pos.w;\n    if (pos.z < -clip || pos.x < -clip || pos.x > clip || pos.y < -clip || pos.y > clip) return;\n    uvec4 static1 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2) | 1u, uint(index) >> 10), 0);\n\n    vec4 rot = vec4(unpackHalf2x16(static0.w).xy, unpackHalf2x16(static1.x).xy) + trot;\n    vec3 scale = vec3(unpackHalf2x16(static1.y).xy, unpackHalf2x16(static1.z).x);\n    rot /= sqrt(dot(rot, rot));\n  \n    mat3 S = mat3(scale.x, 0.0, 0.0, 0.0, scale.y, 0.0, 0.0, 0.0, scale.z);\n    mat3 R = mat3(\n        1.0 - 2.0 * (rot.z * rot.z + rot.w * rot.w), 2.0 * (rot.y * rot.z - rot.x * rot.w), 2.0 * (rot.y * rot.w + rot.x * rot.z),\n        2.0 * (rot.y * rot.z + rot.x * rot.w), 1.0 - 2.0 * (rot.y * rot.y + rot.w * rot.w), 2.0 * (rot.z * rot.w - rot.x * rot.y),\n        2.0 * (rot.y * rot.w - rot.x * rot.z), 2.0 * (rot.z * rot.w + rot.x * rot.y), 1.0 - 2.0 * (rot.y * rot.y + rot.z * rot.z));\n    mat3 M = S * R;\n    mat3 Vrk = 4.0 * transpose(M) * M;\n    mat3 J = mat3(\n        focal.x / cam.z, 0., -(focal.x * cam.x) / (cam.z * cam.z), \n        0., -focal.y / cam.z, (focal.y * cam.y) / (cam.z * cam.z), \n        0., 0., 0.\n    );\n  \n    mat3 T = transpose(mat3(view)) * J;\n    mat3 cov2d = transpose(T) * Vrk * T;\n  \n    float mid = (cov2d[0][0] + cov2d[1][1]) / 2.0;\n    float radius = length(vec2((cov2d[0][0] - cov2d[1][1]) / 2.0, cov2d[0][1]));\n    float lambda1 = mid + radius, lambda2 = mid - radius;\n  \n    if(lambda2 < 0.0) return;\n    vec2 diagonalVector = normalize(vec2(cov2d[0][1], lambda1 - cov2d[0][0]));\n    vec2 majorAxis = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;\n    vec2 minorAxis = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);\n      \n    uint rgba = static1.w;\n    vColor = \n        clamp(pos.z/pos.w+1.0, 0.0, 1.0) * \n        vec4(1.0, 1.0, 1.0, topacity) *\n        vec4(\n            (rgba) & 0xffu, \n            (rgba >> 8) & 0xffu, \n            (rgba >> 16) & 0xffu, \n            (rgba >> 24) & 0xffu) / 255.0;\n\n    vec2 vCenter = vec2(pos) / pos.w;\n    gl_Position = vec4(\n        vCenter \n        + position.x * majorAxis / viewport \n        + position.y * minorAxis / viewport, 0.0, 1.0);\n\n    vPosition = position;\n}\n`;\n\nconst fragmentShaderSource = /* glsl */ `#version 300 es\nprecision highp float;\n  \nin vec4 vColor;\nin vec2 vPosition;\n\nout vec4 fragColor;\n\nvoid main () {\n    float A = -dot(vPosition, vPosition);\n    if (A < -4.0) discard;\n    float B = exp(A) * vColor.a;\n    fragColor = vec4(B * vColor.rgb, B);\n}\n`;\n\nclass VideoRenderProgram extends ShaderProgram {\n    private _renderData: SplatvData | null = null;\n    private _depthIndex: Uint32Array = new Uint32Array();\n    private _splatTexture: WebGLTexture | null = null;\n\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[] = []) {\n        super(renderer, passes);\n\n        const canvas = renderer.canvas;\n        const gl = renderer.gl;\n\n        let worker: Worker;\n\n        let u_projection: WebGLUniformLocation;\n        let u_viewport: WebGLUniformLocation;\n        let u_focal: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_texture: WebGLUniformLocation;\n        let u_time: WebGLUniformLocation;\n\n        let positionAttribute: number;\n        let indexAttribute: number;\n\n        let vertexBuffer: WebGLBuffer;\n        let indexBuffer: WebGLBuffer;\n\n        this._resize = () => {\n            if (!this._camera) return;\n\n            this._camera.data.setSize(canvas.width, canvas.height);\n            this._camera.update();\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n\n            u_viewport = gl.getUniformLocation(this.program, \"viewport\") as WebGLUniformLocation;\n            gl.uniform2fv(u_viewport, new Float32Array([canvas.width, canvas.height]));\n        };\n\n        const setupWorker = () => {\n            if (renderer.renderProgram.worker === null) {\n                console.error(\"Render program is not initialized. Cannot render without worker\");\n                return;\n            }\n            worker = renderer.renderProgram.worker;\n            worker.onmessage = (e) => {\n                if (e.data.depthIndex) {\n                    const { depthIndex } = e.data;\n                    this._depthIndex = depthIndex;\n                    gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n                    gl.bufferData(gl.ARRAY_BUFFER, depthIndex, gl.STATIC_DRAW);\n                }\n            };\n        };\n\n        this._initialize = () => {\n            if (!this._scene || !this._camera) {\n                console.error(\"Cannot render without scene and camera\");\n                return;\n            }\n\n            this._resize();\n\n            this._scene.addEventListener(\"objectAdded\", handleObjectAdded);\n            this._scene.addEventListener(\"objectRemoved\", handleObjectRemoved);\n            for (const object of this._scene.objects) {\n                if (object instanceof Splatv) {\n                    if (this._renderData === null) {\n                        this._renderData = object.data;\n                        object.addEventListener(\"objectChanged\", handleObjectChanged);\n                    } else {\n                        console.warn(\"Multiple Splatv objects are not currently supported\");\n                    }\n                }\n            }\n\n            if (this._renderData === null) {\n                console.error(\"Cannot render without Splatv object\");\n                return;\n            }\n\n            u_focal = gl.getUniformLocation(this.program, \"focal\") as WebGLUniformLocation;\n            gl.uniform2fv(u_focal, new Float32Array([this._camera.data.fx, this._camera.data.fy]));\n\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            this._splatTexture = gl.createTexture() as WebGLTexture;\n            u_texture = gl.getUniformLocation(this.program, \"u_texture\") as WebGLUniformLocation;\n            gl.uniform1i(u_texture, 0);\n\n            u_time = gl.getUniformLocation(this.program, \"time\") as WebGLUniformLocation;\n            gl.uniform1f(u_time, Math.sin(Date.now() / 1000) / 2 + 1 / 2);\n\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-2, -2, 2, -2, 2, 2, -2, 2]), gl.STATIC_DRAW);\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n            gl.vertexAttribPointer(positionAttribute, 2, gl.FLOAT, false, 0, 0);\n\n            indexBuffer = gl.createBuffer() as WebGLBuffer;\n            indexAttribute = gl.getAttribLocation(this.program, \"index\");\n            gl.enableVertexAttribArray(indexAttribute);\n            gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n\n            setupWorker();\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, this._splatTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            gl.texImage2D(\n                gl.TEXTURE_2D,\n                0,\n                gl.RGBA32UI,\n                this._renderData.width,\n                this._renderData.height,\n                0,\n                gl.RGBA_INTEGER,\n                gl.UNSIGNED_INT,\n                this._renderData.data,\n            );\n\n            const positions = this._renderData.positions;\n            const dummyTransforms = new Float32Array(new Matrix4().buffer);\n            const dummyTransformIndices = new Uint32Array(this._renderData.vertexCount);\n            dummyTransformIndices.fill(0);\n            worker.postMessage(\n                {\n                    sortData: {\n                        positions: positions,\n                        transforms: dummyTransforms,\n                        transformIndices: dummyTransformIndices,\n                        vertexCount: this._renderData.vertexCount,\n                    },\n                },\n                [positions.buffer, dummyTransforms.buffer, dummyTransformIndices.buffer],\n            );\n        };\n\n        const handleObjectAdded = (event: Event) => {\n            const e = event as ObjectAddedEvent;\n\n            if (e.object instanceof Splatv) {\n                if (this._renderData === null) {\n                    this._renderData = e.object.data;\n                    e.object.addEventListener(\"objectChanged\", handleObjectChanged);\n                } else {\n                    console.warn(\"Splatv not supported by default RenderProgram. Use VideoRenderProgram instead.\");\n                }\n            }\n\n            this.dispose();\n        };\n\n        const handleObjectRemoved = (event: Event) => {\n            const e = event as ObjectRemovedEvent;\n\n            if (e.object instanceof Splatv) {\n                if (this._renderData === e.object.data) {\n                    this._renderData = null;\n                    e.object.removeEventListener(\"objectChanged\", handleObjectChanged);\n                }\n            }\n\n            this.dispose();\n        };\n\n        const handleObjectChanged = (event: Event) => {\n            const e = event as ObjectChangedEvent;\n\n            if (e.object instanceof Splatv && this._renderData === e.object.data) {\n                this.dispose();\n            }\n        };\n\n        this._render = () => {\n            if (!this._scene || !this._camera) {\n                console.error(\"Cannot render without scene and camera\");\n                return;\n            }\n\n            if (!this._renderData) {\n                console.warn(\"Cannot render without Splatv object\");\n                return;\n            }\n\n            this._camera.update();\n            worker.postMessage({ viewProj: this._camera.data.viewProj.buffer });\n\n            gl.viewport(0, 0, canvas.width, canvas.height);\n            gl.clearColor(0, 0, 0, 0);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n\n            gl.disable(gl.DEPTH_TEST);\n            gl.enable(gl.BLEND);\n            gl.blendFuncSeparate(gl.ONE_MINUS_DST_ALPHA, gl.ONE, gl.ONE_MINUS_DST_ALPHA, gl.ONE);\n            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n            gl.uniform1f(u_time, Math.sin(Date.now() / 1000) / 2 + 1 / 2);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.vertexAttribPointer(positionAttribute, 2, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this._depthIndex, gl.STATIC_DRAW);\n            gl.vertexAttribIPointer(indexAttribute, 1, gl.INT, 0, 0);\n            gl.vertexAttribDivisor(indexAttribute, 1);\n\n            gl.drawArraysInstanced(gl.TRIANGLE_FAN, 0, 4, this._renderData.vertexCount);\n        };\n\n        this._dispose = () => {\n            if (!this._scene || !this._camera) {\n                console.error(\"Cannot dispose without scene and camera\");\n                return;\n            }\n\n            this._scene.removeEventListener(\"objectAdded\", handleObjectAdded);\n            this._scene.removeEventListener(\"objectRemoved\", handleObjectRemoved);\n            for (const object of this._scene.objects) {\n                if (object instanceof Splatv) {\n                    if (this._renderData === object.data) {\n                        this._renderData = null;\n                        object.removeEventListener(\"objectChanged\", handleObjectChanged);\n                    }\n                }\n            }\n\n            worker?.terminate();\n\n            gl.deleteTexture(this._splatTexture);\n\n            gl.deleteBuffer(indexBuffer);\n            gl.deleteBuffer(vertexBuffer);\n        };\n    }\n\n    get renderData(): SplatvData | null {\n        return this._renderData;\n    }\n\n    protected _getVertexSource(): string {\n        return vertexShaderSource;\n    }\n\n    protected _getFragmentSource(): string {\n        return fragmentShaderSource;\n    }\n}\n\nexport { VideoRenderProgram };\n","import { Box3 } from \"./Box3\";\nimport { Vector3 } from \"./Vector3\";\n\nclass BVHNode {\n    public left: BVHNode | null = null;\n    public right: BVHNode | null = null;\n    public pointIndices: number[] = [];\n\n    constructor(\n        public bounds: Box3,\n        public boxes: Box3[],\n        pointIndices: number[],\n    ) {\n        if (pointIndices.length > 1) {\n            this.split(bounds, boxes, pointIndices);\n        } else if (pointIndices.length > 0) {\n            this.pointIndices = pointIndices;\n        }\n    }\n    \n    private split(bounds: Box3, boxes: Box3[], pointIndices: number[]) {\n        const axis = bounds.size().maxComponent();\n        pointIndices.sort((a, b) => boxes[a].center().getComponent(axis) - boxes[b].center().getComponent(axis));\n\n        const mid = Math.floor(pointIndices.length / 2);\n        const leftIndices = pointIndices.slice(0, mid);\n        const rightIndices = pointIndices.slice(mid);\n\n        this.left = new BVHNode(bounds, boxes, leftIndices);\n        this.right = new BVHNode(bounds, boxes, rightIndices);\n    }\n\n    public queryRange(range: Box3): number[] {\n        if (!this.bounds.intersects(range)) {\n            return [];\n        } else if (this.left !== null && this.right !== null) {\n            return this.left.queryRange(range).concat(this.right.queryRange(range));\n        } else {\n            return this.pointIndices.filter((index) => range.intersects(this.boxes[index]));\n        }\n    }\n}\n\nclass BVH {\n    public root: BVHNode;\n\n    constructor(bounds: Box3, boxes: Box3[]) {\n        const pointIndices = boxes.map((_, index) => index);\n        this.root = new BVHNode(bounds, boxes, pointIndices);\n    }\n\n    public queryRange(range: Box3) {\n        return this.root.queryRange(range);\n    }\n}\n\nexport { BVH };\n","import { Camera } from \"../../../cameras/Camera\";\nimport { Vector3 } from \"../../../math/Vector3\";\nimport { Splat } from \"../../../splats/Splat\";\nimport { RenderProgram } from \"../programs/RenderProgram\";\nimport { Box3 } from \"../../../math/Box3\";\nimport { BVH } from \"../../../math/BVH\";\nimport { RenderData } from \"./RenderData\";\nimport {SingleSplat} from \"../../../splats/SingleSplat\";\n\nclass IntersectionTester {\n    testPoint: (x: number, y: number) => Splat | null;\n    testPointSingleSplats: (x: number, y: number) => SingleSplat[] | null;\n    testLayer: (value: number, positiveDirection: boolean, axis: string) => SingleSplat[] | null;\n\n    constructor(renderProgram: RenderProgram, maxDistance: number = 100, resolution: number = 1.0) {\n        let vertexCount = 0;\n        let bvh: BVH | null = null;\n\n        let singleSplatbvh: BVH | null = null;\n        let lookup: Splat[] = [];\n        let singleSplatLookup: SingleSplat[] = [];\n\n        const build = () => {\n            if(renderProgram.renderData === null) {\n                console.error(\"IntersectionTester cannot be called before renderProgram has been initialized\");\n                return;\n            }\n            const startTimeSplat = performance.now();\n            \n            lookup = [];\n            const renderData = renderProgram.renderData as RenderData;\n            const boxes = new Array<Box3>(renderData.offsets.size);\n            let i = 0;\n            const bounds = new Box3(\n                new Vector3(Infinity, Infinity, Infinity),\n                new Vector3(-Infinity, -Infinity, -Infinity),\n            );\n            for (const splat of renderData.offsets.keys()) {\n                const splatBounds = splat.bounds;\n                boxes[i++] = splatBounds;\n                bounds.expand(splatBounds.min);\n                bounds.expand(splatBounds.max);\n                lookup.push(splat);\n            }\n            bounds.permute();\n            bvh = new BVH(bounds, boxes);\n\n            const endTimeSplat = performance.now();\n            const duration = endTimeSplat - startTimeSplat; \n            console.log(`creating BVH with SPLAT:  ${duration/1000} s (${duration} ms).`);\n\n            const startTimeSingleSplat = performance.now();\n            singleSplatLookup = [];\n            const singleSplatBoxes = new Array<Box3>(renderData.singleOffsets.size);\n            let j = 0;\n            const singleSplatbounds = new Box3(\n                new Vector3(Infinity, Infinity, Infinity),\n                new Vector3(-Infinity, -Infinity, -Infinity),\n            );\n            for (const singleSplat of renderData.singleOffsets.keys()) {\n                const splatBounds = singleSplat.bounds;\n                singleSplatBoxes[j++] = splatBounds;\n                singleSplatbounds.expand(splatBounds.min);\n                singleSplatbounds.expand(splatBounds.max);\n                singleSplatLookup.push(singleSplat);\n            }\n            singleSplatbounds.permute();\n            singleSplatbvh = new BVH(singleSplatbounds, singleSplatBoxes);\n\n            const endTimeSingleSplat = performance.now();\n            const durationSingleSplat = endTimeSingleSplat - startTimeSingleSplat;\n            console.log(`creating BVH with SPLAT:  ${durationSingleSplat/1000} s (${durationSingleSplat} ms).`);\n            \n            console.log(\"Got \" + boxes.length + \" boxes for Splat!\")\n            console.log(\"Got \" + singleSplatBoxes.length + \" boxes for Single Splats!\")\n            \n            vertexCount = renderData.vertexCount;\n        };\n        \n        this.testLayer = (value: number, positiveDirection: boolean, axis: string) => {\n            const renderData = renderProgram.renderData as RenderData;\n            singleSplatLookup = [];\n            \n            for (const singleSplat of renderData.singleOffsets.keys()) {\n                const splatBounds = singleSplat.bounds;\n                if(axis === \"x\") {\n                    if(positiveDirection) {\n                        if(splatBounds.center().x >= value) {\n                            singleSplatLookup.push(singleSplat)\n                        }\n                    } else {\n                        if(splatBounds.center().x < value) {\n                            singleSplatLookup.push(singleSplat)\n                        }\n                    }\n                } else if(axis === \"y\") {\n                    if(positiveDirection) {\n                        if(splatBounds.center().y >= value) {\n                            singleSplatLookup.push(singleSplat)\n                        }\n                    } else {\n                        if(splatBounds.center().y < value) {\n                            singleSplatLookup.push(singleSplat)\n                        }\n                    }\n                } else if(axis === \"z\") {\n                    if(positiveDirection) {\n                        if(splatBounds.center().z >= value) {\n                            singleSplatLookup.push(singleSplat)\n                        }\n                    } else {\n                        if(splatBounds.center().z < value) {\n                            singleSplatLookup.push(singleSplat)\n                        }\n                    }\n                }\n            }\n            return singleSplatLookup;\n        }\n\n        this.testPoint = (x: number, y: number) => {\n            if (renderProgram.renderData === null || renderProgram.camera === null) {\n                console.error(\"IntersectionTester cannot be called before renderProgram has been initialized\");\n                return null;\n            }\n\n            build();\n\n            if (bvh === null) {\n                console.error(\"Failed to build octree for IntersectionTester\");\n                return null;\n            }\n\n            const renderData = renderProgram.renderData as RenderData;\n            const camera = renderProgram.camera as Camera;\n\n            if (vertexCount !== renderData.vertexCount) {\n                console.warn(\"IntersectionTester has not been rebuilt since the last render\");\n            }\n\n            const ray = camera.screenPointToRay(x, y);\n            for (let x = 0; x < maxDistance; x += resolution) {\n                const point = camera.position.add(ray.multiply(x));\n                const minPoint = new Vector3(\n                    point.x - resolution / 2,\n                    point.y - resolution / 2,\n                    point.z - resolution / 2,\n                );\n                const maxPoint = new Vector3(\n                    point.x + resolution / 2,\n                    point.y + resolution / 2,\n                    point.z + resolution / 2,\n                );\n                const queryBox = new Box3(minPoint, maxPoint);\n                const points = bvh.queryRange(queryBox);\n                if (points.length > 0) {\n                    return lookup[points[0]];\n                }\n            }\n\n            return null;\n        };\n\n        \n        this.testPointSingleSplats = (x: number, y: number) => {\n            if (renderProgram.renderData === null || renderProgram.camera === null) {\n                console.error(\"IntersectionTester cannot be called before renderProgram has been initialized\");\n                return null;\n            }\n\n            const renderData = renderProgram.renderData as RenderData;\n            const camera = renderProgram.camera as Camera;\n\n            singleSplatLookup = [];\n            const ray = camera.screenPointToRay(x, y);\n            for (let x = 0; x < maxDistance; x += resolution) {\n                const point = camera.position.add(ray.multiply(x));\n                const minPoint = new Vector3(\n                    point.x - resolution / 2,\n                    point.y - resolution / 2,\n                    point.z - resolution / 2,\n                );\n                const maxPoint = new Vector3(\n                    point.x + resolution / 2,\n                    point.y + resolution / 2,\n                    point.z + resolution / 2,\n                );\n                const queryBox = new Box3(minPoint, maxPoint);\n                \n                for (const singleSplat of renderData.singleOffsets.keys()) {\n                    if(singleSplat.bounds.intersects(queryBox)) {\n                        singleSplatLookup.push(singleSplat)\n                    }\n                }\n            }\n            return singleSplatLookup;\n        };\n    }\n}\n\nexport { IntersectionTester };\n","import { Box3 } from \"./Box3\";\nimport { SingleSplat } from \"../splats/SingleSplat\";\nimport { Vector3 } from \"./Vector3\";\nimport { Ray } from \"./Ray\";\n\nclass BVHNode {\n    public left: BVHNode | null = null;\n    public right: BVHNode | null = null;\n    public bounds: Box3;\n    public objects: SingleSplat[] = [];\n\n    constructor(objects: SingleSplat[] | undefined = undefined) {\n        this.bounds = new Box3(new Vector3(Infinity, Infinity, Infinity), new Vector3(-Infinity, -Infinity, -Infinity));\n        \n        if(objects === undefined)\n            return;\n        \n        objects.forEach(obj => {\n            this.bounds.expand(obj.bounds.min);\n            this.bounds.expand(obj.bounds.max);\n        });\n        if (objects.length <= 2) {\n            this.objects = objects;\n        } else {\n            this.split(objects);\n        }\n    }\n\n    private split(objects: SingleSplat[]): void {\n        const mid = Math.floor(objects.length / 2);\n        objects.sort((a, b) => a.bounds.center().x - b.bounds.center().x); // Simplistic sort by X-axis\n\n        this.left = new BVHNode(objects.slice(0, mid));\n        this.right = new BVHNode(objects.slice(mid));\n    }\n\n    public intersects(ray: Ray, maxDistance: number): SingleSplat[] {\n        if (!ray.intersectsBox(this.bounds, maxDistance)) {\n            return [];\n        }\n        if (this.objects.length > 0) {\n            return this.objects.filter(obj => ray.intersectsBox(obj.bounds, maxDistance));\n        }\n        return [\n            ...(this.left ? this.left.intersects(ray, maxDistance) : []),\n            ...(this.right ? this.right.intersects(ray, maxDistance) : [])\n        ];\n    }\n}\n\nexport { BVHNode }","import { Vector3 } from \"./Vector3\";\nimport { Box3 } from \"./Box3\";\n\nclass Ray {\n    origin: Vector3;\n    direction: Vector3;\n\n    constructor(origin: Vector3, direction: Vector3) {\n        this.origin = origin;\n        this.direction = direction.normalize(); // Stellen Sie sicher, dass die Richtung normalisiert ist\n    }\n\n    /**\n     * Berechnet einen Punkt auf dem Strahl bei einem bestimmten Skalar 't'.\n     * @param t Der Skalarwert, der bestimmt, wie weit entlang des Strahls der Punkt liegt.\n     * @returns Der Punkt auf dem Strahl.\n     */\n    getPoint(t: number): Vector3 {\n        return this.origin.add(this.direction.multiply(t));\n    }\n\n    /**\n     * Prft die Intersektion dieses Strahls mit einer gegebenen Bounding Box.\n     * @param box Die Box, mit der die Intersektion geprft werden soll.\n     * @returns True, wenn der Strahl die Box schneidet, sonst false.\n     */\n    intersectsBox(box: Box3, maxDistance: number = Infinity): boolean {\n        let tmin = (box.min.x - this.origin.x) / this.direction.x;\n        let tmax = (box.max.x - this.origin.x) / this.direction.x;\n\n        if (tmin > tmax) [tmin, tmax] = [tmax, tmin];\n\n        let tymin = (box.min.y - this.origin.y) / this.direction.y;\n        let tymax = (box.max.y - this.origin.y) / this.direction.y;\n\n        if (tymin > tymax) [tymin, tymax] = [tymax, tymin];\n\n        if ((tmin > tymax) || (tymin > tmax))\n            return false;\n\n        if (tymin > tmin) tmin = tymin;\n        if (tymax < tmax) tmax = tymax;\n\n        let tzmin = (box.min.z - this.origin.z) / this.direction.z;\n        let tzmax = (box.max.z - this.origin.z) / this.direction.z;\n\n        if (tzmin > tzmax) [tzmin, tzmax] = [tzmax, tzmin];\n\n        if ((tmin > tzmax) || (tzmin > tmax))\n            return false;\n\n        if (tzmin > tmin) tmin = tzmin;\n        if (tzmax < tmax) tmax = tzmax;\n\n        return (tmin < maxDistance) && (tmax > 0);\n    }\n}\n\nexport { Ray }","import { Camera } from \"./Camera\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { CameraData } from \"./CameraData\";\nimport {Vector4} from \"../math/Vector4\";\nimport {Plane} from \"../math/Plane\";\n\nclass CameraHelper {\n    private _camera:Camera;\n    private _cameraData: CameraData;\n    \n    private _frustumCorners: Vector3[];\n    \n    constructor(camera: Camera) {\n        this._camera = camera;\n        this._cameraData = this._camera.data;\n        this._frustumCorners = [];\n    }\n    \n    public calculateFrustum(): Vector3[] {\n        \n        const near = this._cameraData.near;\n        const far = this._cameraData.far;\n        const fovX = this._cameraData.fx;\n        const fovY = this._cameraData.fy;\n        \n        const halfHeightNear = Math.tan(fovY / 2) * near;\n        const halfWidthNear = Math.tan(fovX / 2) * near;\n        \n        const halfHeightFar = Math.tan(fovY / 2) * far;\n        const halfWidthFar = Math.tan(fovX / 2) * far;\n        \n        const nearTopLeft = new Vector3(-halfWidthNear, halfHeightNear, -near);\n        const nearTopRight = new Vector3(halfWidthNear, halfHeightNear, -near);\n        const nearBottomLeft = new Vector3(-halfWidthNear, -halfHeightNear, -near);\n        const nearBottomRight = new Vector3(halfWidthNear, -halfHeightNear, -near);\n\n        const farTopLeft = new Vector3(-halfWidthFar, halfHeightFar, far);\n        const farTopRight = new Vector3(halfWidthFar, halfHeightFar, far);\n        const farBottomLeft = new Vector3(-halfWidthFar, -halfHeightFar, far);\n        const farBottomRight = new Vector3(halfWidthFar, -halfHeightFar, far);\n\n        this._frustumCorners.push(\n            this.cameraToWorldCoords(nearTopLeft),\n            this.cameraToWorldCoords(nearTopRight),\n            this.cameraToWorldCoords(nearBottomLeft),\n            this.cameraToWorldCoords(nearBottomRight),\n            this.cameraToWorldCoords(farTopLeft),\n            this.cameraToWorldCoords(farTopRight),\n            this.cameraToWorldCoords(farBottomLeft),\n            this.cameraToWorldCoords(farBottomRight)\n        );\n\n        return this._frustumCorners;\n    }\n    \n    public cameraToWorldCoords(cameraCoords: Vector3): Vector3 {\n        const cameraSpaceCoords = new Vector4(cameraCoords.x, cameraCoords.y, cameraCoords.z, 1);\n        \n        const inverseViewMatrix = this._cameraData.viewMatrix.invert();\n        const worldSpaceCoords = cameraSpaceCoords.multiply(inverseViewMatrix);\n        \n        const worldSpacePosition = new Vector3(\n            worldSpaceCoords.x / worldSpaceCoords.w,\n            worldSpaceCoords.y / worldSpaceCoords.w,\n            worldSpaceCoords.z / worldSpaceCoords.w,\n        );\n        \n        return worldSpacePosition;\n    }\n\n    public pointInFrustum(point: Vector3): boolean {\n        const planes = [\n            this.createPlane(this._frustumCorners[0], this._frustumCorners[1], this._frustumCorners[2]), // Near plane\n            this.createPlane(this._frustumCorners[4], this._frustumCorners[5], this._frustumCorners[6]), // Far plane\n            \n            this.createPlane(this._frustumCorners[0], this._frustumCorners[2], this._frustumCorners[4]), // left\n            this.createPlane(this._frustumCorners[1], this._frustumCorners[3], this._frustumCorners[5]), // right\n            this.createPlane(this._frustumCorners[0], this._frustumCorners[1], this._frustumCorners[4]), // bottom\n            this.createPlane(this._frustumCorners[2], this._frustumCorners[3], this._frustumCorners[6]), // top\n        ];\n        \n        return  planes[0].distanceToPoint(point) <= 0 && // before near plane\n                planes[1].distanceToPoint(point) >= 0 && // behind far plane\n                planes[2].distanceToPoint(point) <= 0 && // right from left plane\n                planes[3].distanceToPoint(point) >= 0 && // left from right plane\n                planes[4].distanceToPoint(point) >= 0 && // over bottom plane\n                planes[5].distanceToPoint(point) <= 0; // under top plane\n    }\n\n    private createPlane(a: Vector3, b: Vector3, c: Vector3): FrustumPlane {\n        const ab = b.subtract(a);\n        const ac = c.subtract(a);\n        const normal = ab.cross(ac).normalize();\n        const d = -normal.dot(a);\n        return new FrustumPlane(normal, d);\n    }\n}\n\nclass FrustumPlane {\n    normal: Vector3;\n    d: number;\n\n    constructor(normal: Vector3, d: number) {\n        this.normal = normal;\n        this.d = d;\n    }\n\n    distanceToPoint(point: Vector3): number {\n        // Berechnet den Abstand des Punktes von der Ebene\n        return this.normal.dot(point) + this.d;\n    }\n}\n\n\nexport { CameraHelper }","import {WebGLRenderer} from \"../renderers/WebGLRenderer\";\nimport {Vector3} from \"../math/Vector3\";\nimport {CubeVisualisationProgram} from \"../renderers/webgl/programs/individual/CubeVisualisationProgram\";\nimport {ShaderProgram} from \"../renderers/webgl/programs/ShaderProgram\";\n\nclass Utils {\n    \n    public static draw(renderer: WebGLRenderer, point:Vector3, size: number) {\n        let upperLeftCorner = new Float32Array([point.x+(size/2), point.y+(size/2), point.z+(size/2)]);\n        let bottomRightCorner = new Float32Array([point.x-(size/2), point.y-(size/2), point.z-(size/2)]);\n\n        var renderProgram = new CubeVisualisationProgram(renderer, [], [upperLeftCorner, bottomRightCorner]);\n        renderer.addProgram(renderProgram);\n    }\n\n    public static drawCone(renderer: WebGLRenderer, points:Vector3[]) {\n        \n        let vecs: Float32Array[] = []\n        for(let i = 0; i < points.length; i++) {\n            vecs.push(new Float32Array([points[i].x, points[i].y, points[i].z]))\n        }\n        var renderProgram = new CubeVisualisationProgram(renderer, [], vecs);\n        renderer.addProgram(renderProgram);\n    }\n}\n\nexport { Utils }","import { BVHNode } from \"../../../math/BVHNode\";\nimport { SingleSplat } from \"../../../splats/SingleSplat\";\nimport { Camera } from \"../../../cameras/Camera\";\nimport { Ray } from \"../../../math/Ray\"\nimport {BVH} from \"../../../math/BVH\";\nimport {Box3} from \"../../../math/Box3\";\nimport {Vector3} from \"../../../math/Vector3\";\nimport {RenderProgram} from \"../programs/RenderProgram\";\nimport {RenderData} from \"./RenderData\";\nimport {WebGLRenderer} from \"../../WebGLRenderer\";\nimport { CubeVisualisationProgram } from \"../programs/individual/CubeVisualisationProgram\";\nimport {CameraHelper} from \"../../../cameras/CameraHelper\";\nimport {Utils} from \"../../../utils/Utils\";\n\nclass Raycaster {\n    private bvh: BVHNode | undefined;\n    private renderer: WebGLRenderer;\n    private renderProgram: RenderProgram;\n    \n    public testBox: (point1: Float32Array, point2: Float32Array) => SingleSplat[] | null;\n    public testCameraViewFrustum: (camera: Camera) => SingleSplat[] | null;\n\n    constructor(renderer: WebGLRenderer, buildBVH: boolean) {\n        let singleSplatLookup: SingleSplat[] = [];\n        this.renderer = renderer;\n        this.renderProgram = renderer.renderProgram;\n        \n        if(buildBVH) {\n            const renderData = this.renderProgram.renderData as RenderData;\n            for (const singleSplat of renderData.singleOffsets.keys()) {\n                const splatBounds = singleSplat.bounds;\n                singleSplatLookup.push(singleSplat);\n            }\n            this.bvh = new BVHNode(singleSplatLookup);\n        }\n\n        this.testBox = (point1: Float32Array, point2: Float32Array) => {\n            const renderData = this.renderProgram.renderData as RenderData;\n            \n            if(renderData === undefined)\n                return null;\n\n            singleSplatLookup = [];\n            \n            const [x1, y1, z1] = point1;\n            const [x2, y2, z2] = point2;\n            const minPoint = new Vector3(x1, y1, z1);\n            const maxPoint = new Vector3(x2, y2, z2);\n            \n            const queryBox = new Box3(maxPoint, minPoint);\n            queryBox.permute();\n            \n            \n            for (const singleSplat of renderData.singleOffsets.keys()) {\n                if(queryBox.contains(singleSplat.bounds.center())) {\n                    \n                    singleSplatLookup.push(singleSplat)\n                }\n            }\n\n            return singleSplatLookup;\n        }\n\n        this.testCameraViewFrustum = (camera: Camera, showFrustum: boolean = false, showForSeconds: number = -1) => {\n            this.renderer.removeAllPrograms();\n            const renderData = this.renderProgram.renderData as RenderData;\n            let camHelper: CameraHelper = new CameraHelper(camera);\n            let corners: Vector3[] = camHelper.calculateFrustum();\n            \n            singleSplatLookup = [];\n            \n            if(showFrustum) {\n                Utils.drawCone(this.renderer,corners)\n                if(showForSeconds > 0) {\n                    setTimeout(function() {\n                        renderer.removeAllPrograms();\n                    }, showForSeconds * 1000);\n                } \n            }\n\n            for (const singleSplat of renderData.singleOffsets.keys()) {\n                if(camHelper.pointInFrustum(singleSplat.bounds.center())) {\n\n                    singleSplatLookup.push(singleSplat)\n                }\n            }\n\n            return singleSplatLookup;\n        }\n    }\n\n    public testPointSingleSplats(x: number, y: number, camera: Camera, maxDistance: number): SingleSplat[] | null {\n        if(this.bvh === undefined)\n            return null;\n        \n        if (!camera) {\n            console.error(\"Camera is not initialized\");\n            return null;\n        }\n\n        const ray = new Ray(camera.position, camera.screenPointToRay(x, y));\n        return this.bvh.intersects(ray, maxDistance);\n    }\n}\n\nexport { Raycaster }","import { ShaderProgram } from \"../ShaderProgram\";\nimport { WebGLRenderer } from \"../../../WebGLRenderer\";\nimport { ShaderPass } from \"../../passes/ShaderPass\";\n\nconst axisVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = projection * view * vec4(position, 1.0);\n}\n`;\n\nconst axisFragmentShader = /*glsl*/ `#version 300 es\nprecision mediump float;\nuniform vec4 axisColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = axisColor;\n}\n`;\n\nclass AxisProgram extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[]) {\n        super(renderer, passes);\n\n        const gl = renderer.gl;\n\n        let vertexBuffer: WebGLBuffer;\n\n        let positionAttribute: number;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_color: WebGLUniformLocation;\n\n        const xVertices = new Float32Array([-50, 0, 0, 50, 0, 0]);\n        const yVertices = new Float32Array([0, -50, 0, 0, 50, 0]);\n        const zVertices = new Float32Array([0, 0, -50, 0, 0, 50]);\n\n        const xColor = new Float32Array([1, 0, 0, 0.5]);\n        const yColor = new Float32Array([0, 1, 0, 0.5]);\n        const zColor = new Float32Array([0, 0.5, 1, 0.5]);\n\n        this._initialize = () => {\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;;\n            if (!vertexBuffer) {\n                console.error(\"Failed to create the buffer object\");\n                return;\n            }\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            if (positionAttribute < 0) {\n                console.error(\"Failed to get the storage location of position\");\n                return;\n            }\n            gl.enableVertexAttribArray(positionAttribute);\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_color = gl.getUniformLocation(this.program, \"axisColor\") as WebGLUniformLocation;\n\n            if (!u_projection || !u_view || !u_color) {\n                console.error(\"Failed to get the storage location of uniform variables\");\n                return;\n            }\n        };\n\n        const drawAxis = (vertices: Float32Array, color: Float32Array) => {\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.LINES, 0, 2);\n        };\n\n        this._resize = () => {};\n\n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            drawAxis(xVertices, xColor);\n            drawAxis(yVertices, yColor);\n            drawAxis(zVertices, zColor);\n        };\n\n        this._dispose = () => {\n            gl.deleteBuffer(vertexBuffer);\n        };\n    }\n\n    protected _getVertexSource() {\n        return axisVertexShader;\n    }\n\n    protected _getFragmentSource() {\n        return axisFragmentShader;\n    }\n}\n\nexport { AxisProgram };\n","import { ShaderProgram } from \"../ShaderProgram\";\nimport { WebGLRenderer } from \"../../../WebGLRenderer\";\nimport { ShaderPass } from \"../../passes/ShaderPass\";\n\nconst gridVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\nuniform vec2 viewport;\n\nin vec2 position;\n\nvoid main() {\n    int numLines = 100;\n    float lineOffset = float(gl_VertexID / 4 - numLines / 2);\n    vec4 worldPosition;\n\n    if (gl_VertexID % 4 == 0) {\n        worldPosition = view * vec4(-50, 0.0, lineOffset, 1.0);\n    } else if (gl_VertexID % 4 == 1) {\n        worldPosition = view * vec4(50, 0.0, lineOffset, 1.0);\n    } else if (gl_VertexID % 4 == 2) {\n        worldPosition = view * vec4(lineOffset, 0.0, -50, 1.0);\n    } else {\n        worldPosition = view * vec4(lineOffset, 0.0, 50, 1.0);\n    }\n\n    gl_Position = projection * worldPosition;\n}\n`;\n\nconst gridFragmentShader = /*glsl*/ `#version 300 es\n    precision mediump float;\n    out vec4 outColor;\n\n    void main() {\n        outColor = vec4(1.0, 1.0, 1.0, 0.1);\n    }\n`;\n\nclass GridProgram extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[]) {\n        super(renderer, passes);\n\n        const gl = renderer.gl;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_viewport: WebGLUniformLocation;\n\n        this._initialize = () => {\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_viewport = gl.getUniformLocation(this.program, \"viewport\") as WebGLUniformLocation;\n        };\n\n        this._resize = () => {\n            gl.uniform2fv(u_viewport, new Float32Array([renderer.canvas.width, renderer.canvas.height]));\n        };\n\n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            gl.drawArrays(gl.LINES, 0, 400);\n        };\n\n        this._dispose = () => {};\n    }\n\n    protected _getVertexSource() {\n        return gridVertexShader;\n    }\n\n    protected _getFragmentSource() {\n        return gridFragmentShader;\n    }\n}\n\nexport { GridProgram };","import { ShaderProgram } from \"../ShaderProgram\";\nimport { WebGLRenderer } from \"../../../WebGLRenderer\";\nimport { ShaderPass } from \"../../passes/ShaderPass\";\nimport { Plane } from \"../../../../math/Plane\";\nimport { Vector3 } from \"../../../../math/Vector3\";\n\nconst planeVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = projection * view * vec4(position, 1.0);\n}\n`;\n\nconst planeFragmentShader = /*glsl*/ `#version 300 es\nprecision mediump float;\nuniform vec4 planeColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = planeColor;\n}\n`;\n\nclass PlaneProgram extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n    protected getPlaneVertices: (size: number) => Float32Array;\n\n    private plane: Plane;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[], plane: Plane) {\n        super(renderer, passes);\n\n        this.plane = plane;\n\n        const gl = renderer.gl;\n\n        let vertexBuffer: WebGLBuffer;\n\n        let positionAttribute: number;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_color: WebGLUniformLocation;\n        \n        const planeColor = new Float32Array([0.5, 0.5, 0.5, 0.5]);\n\n        const normal = this.plane.normal;\n        const constant = this.plane.constant;\n\n        // Create a point on the plane\n        const point = normal.clone().multiply(constant);\n        const xVertices = new Float32Array([point.x, point.y, point.z, point.x + normal.x*3, point.y + normal.y*3, point.z + normal.z*3]);\n        const xColor = new Float32Array([1, 0, 0, 0.5]);\n        \n\n        this._initialize = () => {\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_color = gl.getUniformLocation(this.program, \"planeColor\") as WebGLUniformLocation;\n        };\n\n        const drawAxis = (vertices: Float32Array, color: Float32Array) => {\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.LINES, 0, 2);\n        };\n\n        const drawPlane = () => {\n            const size = 5; // Size of the plane for rendering purposes\n            const vertices = this.getPlaneVertices(size);\n\n            gl.uniform4fv(u_color, planeColor);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\n        };\n\n        this.getPlaneVertices = (size: number) => {\n            const normal = this.plane.normal;\n            const constant = this.plane.constant;\n\n            // Create a point on the plane\n            const point = normal.clone().multiply(constant);\n\n            // Generate two vectors on the plane\n            const right = new Vector3(1, 0, 0);\n            if (Math.abs(normal.dot(right)) > 0.99) {\n                right.set(0, 1, 0);\n            }\n            const up = right.cross(normal).normalize();\n            right.crossVectors(normal, up).normalize();\n\n            const halfSize = size / 2;\n            const vertices = new Float32Array([\n                ...point.clone().add(right.clone().multiply(-halfSize)).add(up.clone().multiply(-halfSize)).toArray(),\n                ...point.clone().add(right.clone().multiply(halfSize)).add(up.clone().multiply(-halfSize)).toArray(),\n                ...point.clone().add(right.clone().multiply(halfSize)).add(up.clone().multiply(halfSize)).toArray(),\n                ...point.clone().add(right.clone().multiply(-halfSize)).add(up.clone().multiply(halfSize)).toArray(),\n            ]);\n            return vertices;\n        };\n\n        this._resize = () => {};\n\n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            const gl = this.renderer.gl;\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            drawPlane();\n            drawAxis(xVertices, xColor)\n        };\n\n        this._dispose = () => {};\n    }\n\n    protected _getVertexSource() {\n        return planeVertexShader;\n    }\n\n    protected _getFragmentSource() {\n        return planeFragmentShader;\n    }\n}\n\nexport { PlaneProgram };\n","import {ShaderProgram} from \"../ShaderProgram\";\nimport {WebGLRenderer} from \"../../../WebGLRenderer\";\nimport {ShaderPass} from \"../../passes/ShaderPass\";\n\nconst axisVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = projection * view * vec4(position, 1.0);\n}\n`;\n\nconst axisFragmentShader = /*glsl*/ `#version 300 es\nprecision mediump float;\nuniform vec4 cubeColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = cubeColor;\n}\n`;\n\nclass MultibleCubesProgram extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[], upperLeftCorners: Float32Array[], bottomRightCorners: Float32Array[], color: Float32Array = new Float32Array([1, 0, 0, 0.2])) {\n        super(renderer, passes);\n\n        const gl = renderer.gl;\n\n        let vertexBuffer: WebGLBuffer;\n\n        let positionAttribute: number;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_color: WebGLUniformLocation;\n\n        let tempAllCorners = [];\n        let tempAllSurface = [];\n        \n        let numberOfCubes = upperLeftCorners.length;\n        \n        for(var i = 0; i < numberOfCubes; i++) {\n            const [x1, y1, z1] = upperLeftCorners[i];\n            const [x2, y2, z2] = bottomRightCorners[i];\n\n\n            const corners = new Float32Array([\n                x1, y1, z1, x2, y1, z1,  // Linie von P1 zu P2\n                x1, y1, z1, x1, y2, z1,  // Linie von P1 zu P3\n                x1, y1, z1, x1, y1, z2,  // Linie von P1 zu P5\n                x2, y1, z1, x2, y2, z1,  // Linie von P2 zu P4\n                x2, y1, z1, x2, y1, z2,  // Linie von P2 zu P6\n                x1, y2, z1, x2, y2, z1,  // Linie von P3 zu P4\n                x1, y2, z1, x1, y2, z2,  // Linie von P3 zu P7\n                x1, y1, z2, x2, y1, z2,  // Linie von P5 zu P6\n                x1, y1, z2, x1, y2, z2,  // Linie von P5 zu P7\n                x2, y2, z1, x2, y2, z2,  // Linie von P4 zu P8\n                x2, y1, z2, x2, y2, z2,  // Linie von P6 zu P8\n                x1, y2, z2, x2, y2, z2   // Linie von P7 zu P8\n            ]);\n            tempAllCorners.push(...corners);\n\n\n            const surface = new Float32Array([\n                x1, y1, z1, x2, y1, z1, x1, y2, z1, x2, y1, z1, x2, y2, z1, x1, y2, z1,\n                x1, y1, z2, x2, y1, z2, x1, y2, z2, x2, y1, z2, x2, y2, z2, x1, y2, z2,\n                x1, y1, z1, x1, y1, z2, x1, y2, z1, x1, y2, z2, x1, y1, z2, x1, y2, z1,\n                x2, y1, z1, x2, y1, z2, x2, y2, z1, x2, y2, z2, x2, y1, z2, x2, y2, z1,\n                x1, y1, z1, x2, y1, z1, x1, y1, z2, x2, y1, z2, x2, y1, z1, x1, y1, z2,\n                x1, y2, z1, x2, y2, z1, x1, y2, z2, x2, y2, z2, x2, y2, z1, x1, y2, z2\n            ])\n            tempAllSurface.push(...surface);\n        }\n\n        let allCorners = new Float32Array(tempAllCorners);\n        let allsurface = new Float32Array(tempAllSurface);\n        \n\n        const colorLines = new Float32Array([0, 0, 0, 1]);\n\n        this._initialize = () => {\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_color = gl.getUniformLocation(this.program, \"cubeColor\") as WebGLUniformLocation;\n        };\n\n        const drawCubeLines = (vertices: Float32Array, color: Float32Array) => {\n            gl.lineWidth(5);\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.LINES, 0, 24 * numberOfCubes);\n        };\n\n        const drawCube = (vertices: Float32Array, color: Float32Array) => {\n            gl.lineWidth(5);\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLES, 0, 36 * numberOfCubes);\n        };\n\n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            drawCubeLines(allCorners, colorLines);\n            drawCube(allsurface, color)\n        };\n\n        this._resize = () => {};\n\n        this._dispose = () => {};\n    }\n\n    protected _getFragmentSource(): string {\n        return axisFragmentShader;\n    }\n\n    protected _getVertexSource(): string {\n        return axisVertexShader;\n    }\n\n}\n\nexport { MultibleCubesProgram }\n","import { ShaderProgram } from \"../ShaderProgram\";\nimport { WebGLRenderer } from \"../../../WebGLRenderer\";\nimport { ShaderPass } from \"../../passes/ShaderPass\";\nimport {NewRay} from \"../../../../math/NewRay\";\n\nconst axisVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = projection * view * vec4(position, 1.0);\n}\n`;\n\nconst axisFragmentShader = /*glsl*/ `#version 300 es\nprecision mediump float;\nuniform vec4 axisColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = axisColor;\n}\n`;\n\nclass RayProgram extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[], ray: NewRay) {\n        super(renderer, passes);\n\n        const gl = renderer.gl;\n\n        let vertexBuffer: WebGLBuffer;\n\n        let positionAttribute: number;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_color: WebGLUniformLocation;\n\n\n        const xVertices = new Float32Array([ray.origin.x, ray.origin.y, ray.origin.z, ray.origin.x + ray.direction.x*10, ray.origin.y + ray.direction.y*10, ray.origin.z + ray.direction.z*10]);\n\n        const xColor = new Float32Array([1, 0, 0, 0.5]);\n\n        this._initialize = () => {\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_color = gl.getUniformLocation(this.program, \"axisColor\") as WebGLUniformLocation;\n        };\n\n        const drawAxis = (vertices: Float32Array, color: Float32Array) => {\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.LINES, 0, 2);\n        };\n\n        this._resize = () => {};\n\n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            drawAxis(xVertices, xColor);\n        };\n\n        this._dispose = () => {};\n    }\n\n    protected _getVertexSource() {\n        return axisVertexShader;\n    }\n\n    protected _getFragmentSource() {\n        return axisFragmentShader;\n    }\n}\n\nexport { RayProgram };\n","import {ShaderProgram} from \"../renderers/webgl/programs/ShaderProgram\";\nimport {WebGLRenderer} from \"../renderers/WebGLRenderer\";\nimport {ShaderPass} from \"../renderers/webgl/passes/ShaderPass\";\nimport {Octree} from \"./Octree\";\n\nconst axisVertexShader = /*glsl*/ `#version 300 es\nuniform mat4 projection, view;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = projection * view * vec4(position, 1.0);\n}\n`;\n\nconst axisFragmentShader = /*glsl*/ `#version 300 es\nprecision mediump float;\nuniform vec4 cubeColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = cubeColor;\n}\n`;\n\nclass OctreeHelper extends ShaderProgram {\n    protected _initialize: () => void;\n    protected _resize: () => void;\n    protected _render: () => void;\n    protected _dispose: () => void;\n\n\n    constructor(renderer: WebGLRenderer, passes: ShaderPass[], octree: Octree, level: number = 0, color: Float32Array = new Float32Array([1, 0, 0, 1])) {\n        super(renderer, passes);\n\n        const gl = renderer.gl;\n\n        let vertexBuffer: WebGLBuffer;\n\n        let positionAttribute: number;\n\n        let u_projection: WebGLUniformLocation;\n        let u_view: WebGLUniformLocation;\n        let u_color: WebGLUniformLocation;\n\n        let tempAllCorners = [];\n        \n        const result = octree?.findNodesByLevel(level) || [];\n        \n        for(let i = 0; i < result.length; i++) {\n            const [x1, y1, z1] = [result[i].min.x, result[i].min.y, result[i].min.z]\n            const [x2, y2, z2] = [result[i].max.x, result[i].max.y, result[i].max.z]\n\n\n            const corners = new Float32Array([\n                x1, y1, z1, x2, y1, z1,  // Linie von P1 zu P2\n                x1, y1, z1, x1, y2, z1,  // Linie von P1 zu P3\n                x1, y1, z1, x1, y1, z2,  // Linie von P1 zu P5\n                x2, y1, z1, x2, y2, z1,  // Linie von P2 zu P4\n                x2, y1, z1, x2, y1, z2,  // Linie von P2 zu P6\n                x1, y2, z1, x2, y2, z1,  // Linie von P3 zu P4\n                x1, y2, z1, x1, y2, z2,  // Linie von P3 zu P7\n                x1, y1, z2, x2, y1, z2,  // Linie von P5 zu P6\n                x1, y1, z2, x1, y2, z2,  // Linie von P5 zu P7\n                x2, y2, z1, x2, y2, z2,  // Linie von P4 zu P8\n                x2, y1, z2, x2, y2, z2,  // Linie von P6 zu P8\n                x1, y2, z2, x2, y2, z2   // Linie von P7 zu P8\n            ]);\n            tempAllCorners.push(...corners);\n        }\n\n        let allCorners = new Float32Array(tempAllCorners);\n\n\n        const colorLines = color;\n\n        this._initialize = () => {\n            vertexBuffer = gl.createBuffer() as WebGLBuffer;\n\n            positionAttribute = gl.getAttribLocation(this.program, \"position\");\n            gl.enableVertexAttribArray(positionAttribute);\n\n            u_projection = gl.getUniformLocation(this.program, \"projection\") as WebGLUniformLocation;\n            u_view = gl.getUniformLocation(this.program, \"view\") as WebGLUniformLocation;\n            u_color = gl.getUniformLocation(this.program, \"cubeColor\") as WebGLUniformLocation;\n        };\n\n        const drawCubeLines = (vertices: Float32Array, color: Float32Array) => {\n            gl.lineWidth(100);\n            gl.uniform4fv(u_color, color);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n            gl.vertexAttribPointer(positionAttribute, 3, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.LINES, 0, 24 * result.length);\n        };\n\n        this._render = () => {\n            if (!this._camera) {\n                throw new Error(\"Camera not set\");\n            }\n\n            gl.enable(gl.BLEND);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            gl.uniformMatrix4fv(u_projection, false, this._camera.data.projectionMatrix.buffer);\n            gl.uniformMatrix4fv(u_view, false, this._camera.data.viewMatrix.buffer);\n\n            drawCubeLines(allCorners, colorLines);\n        };\n\n        this._resize = () => {};\n\n        this._dispose = () => {};\n    }\n\n    protected _getFragmentSource(): string {\n        return axisFragmentShader;\n    }\n\n    protected _getVertexSource(): string {\n        return axisVertexShader;\n    }\n\n}\n\nexport { OctreeHelper }\n","import { Plane } from \"./Plane\";\nimport { Matrix4 } from \"./Matrix4\";\nimport { Box3 } from \"./Box3\";\nimport { Vector3 } from \"./Vector3\";\nimport {WebGLRenderer} from \"../renderers/WebGLRenderer\";\nimport {CubeVisualisationProgram} from \"../renderers/webgl/programs/individual/CubeVisualisationProgram\";\nimport {ShaderProgram} from \"../renderers/webgl/programs/ShaderProgram\";\nimport {PlaneProgram} from \"../renderers/webgl/programs/individual/PlaneProgram\";\nimport {NewRay} from \"./NewRay\";\nimport {Camera} from \"../cameras/Camera\";\n\nconst _vector = new Vector3();\n\nfunction intersectPlanes(p1: Plane, p2: Plane, p3: Plane): Vector3 | null {\n    const n1 = p1.normal;\n    const n2 = p2.normal;\n    const n3 = p3.normal;\n    \n    const det = n1.dot(n2.cross(n3))\n    \n    if(Math.abs(det) < 1e-6) {\n        return null;\n    }\n\n    const c1 = p1.constant;\n    const c2 = p2.constant;\n    const c3 = p3.constant;\n\n    const n2n3 = n2.cross(n3).multiply(c1);\n    const n3n1 = n3.cross(n1).multiply(c2);\n    const n1n2 = n1.cross(n2).multiply(c3);\n\n    const point = new Vector3().addVectors(n2n3, n3n1).add(n1n2).divide(det);\n    return point;\n}\n\nclass Frustum {\n    planes: Plane[];\n    frustumCorners: Vector3[] | undefined;\n    frustumRenderProgram: ShaderProgram | undefined;\n    needsUpdate: boolean;\n\n    margin: number | undefined;\n    marginFrustum: Frustum | undefined;\n\n    constructor(\n        p0: Plane = new Plane(),\n        p1: Plane = new Plane(),\n        p2: Plane = new Plane(),\n        p3: Plane = new Plane(),\n        p4: Plane = new Plane(),\n        p5: Plane = new Plane()\n    ) {\n        this.planes = [p0, p1, p2, p3, p4, p5];\n        this.needsUpdate = true;\n    }\n\n    setFromCube(cube: Box3, camera: Camera) {\n        // 1. Berechne die Eckpunkte des Wrfels\n        const points = cube.getCorners();\n\n        // 2. Projeziere die Eckpunkte aus der Sicht der Kamera\n        const projectedPoints = points.map(point => camera.worldToCameraPoint(point));\n\n        // 3. Definiere die Ebenen des Frustums\n        this.setFromPoints(\n            projectedPoints[0], // Near-Top-Left\n            projectedPoints[1], // Near-Top-Right\n            projectedPoints[2], // Near-Bottom-Left\n            projectedPoints[3], // Near-Bottom-Right\n            projectedPoints[4], // Far-Top-Left\n            projectedPoints[5], // Far-Top-Right\n            projectedPoints[6], // Far-Bottom-Left\n            projectedPoints[7]  // Far-Bottom-Right\n        );\n        \n        this.needsUpdate = true;\n    }\n    \n    \n    setFromPoints(\n        nearTopLeft: Vector3, \n        nearTopRight: Vector3, \n        nearBottomLeft: Vector3, \n        nearBottomRight: Vector3, \n        farTopLeft: Vector3, \n        farTopRight: Vector3, \n        farBottomLeft: Vector3, \n        farBottomRight: Vector3\n    ) {\n        const planes = this.planes;\n\n        // Near Plane\n        planes[0].setFromCoplanarPoints(nearTopLeft, nearTopRight, nearBottomRight).normalize();\n\n        // Far Plane\n        planes[1].setFromCoplanarPoints(farTopRight, farTopLeft, farBottomLeft).normalize();\n\n        // Left Plane\n        planes[2].setFromCoplanarPoints(nearTopLeft, nearBottomLeft, farBottomLeft).normalize();\n\n        // Right Plane\n        planes[3].setFromCoplanarPoints(nearBottomRight, nearTopRight, farTopRight).normalize();\n\n        // Top Plane\n        planes[4].setFromCoplanarPoints(nearTopLeft, farTopLeft, nearTopRight).normalize();\n\n        // Bottom Plane\n        planes[5].setFromCoplanarPoints(nearBottomLeft, nearBottomRight, farBottomRight).normalize();\n\n        this.needsUpdate = true;\n    }\n\n    setFromProjectionMatrix(m: Matrix4) {\n        const planes = this.planes;\n        const me = m.buffer;\n\n        const me0 = me[0], me1 = me[1], me2 = me[2], me3 = me[3];\n        const me4 = me[4], me5 = me[5], me6 = me[6], me7 = me[7];\n        const me8 = me[8], me9 = me[9], me10 = me[10], me11 = me[11];\n        const me12 = me[12], me13 = me[13], me14 = me[14], me15 = me[15];\n\n        planes[0].setComponents(me3 - me0, me7 - me4, me11 - me8, me15 - me12).normalize(); // Linke\n        planes[1].setComponents(me3 + me0, me7 + me4, me11 + me8, me15 + me12).normalize(); // Rechte\n        planes[2].setComponents(me3 + me1, me7 + me5, me11 + me9, me15 + me13).normalize(); // Obere\n        planes[3].setComponents(me3 - me1, me7 - me5, me11 - me9, me15 - me13).normalize(); // Untere\n        planes[4].setComponents(me3 + me2, me7 + me6, me11 + me10, me15 + me14).normalize(); // Nhe\n        planes[5].setComponents(me3 - me2, me7 - me6, me11 - me10, me15 - me14).normalize(); // Ferne\n\n        this.needsUpdate = true;\n    }\n\n\n\n    intersectsBox(box: Box3, renderer: WebGLRenderer | null = null): boolean {\n        const planes = this.planes;\n        \n        for (let i = 0; i < 6; i++) {\n            const plane = planes[i];\n\n            // corner at max distance\n            _vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n            _vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n            _vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n            \n            if (plane.distanceToPoint(_vector) < 0) {\n                \n                if(renderer !== null) {\n                    let planeRenderProgram = new PlaneProgram(renderer, [], plane);\n                    renderer.addProgram(planeRenderProgram);\n\n                    let upperLeftCorner = new Float32Array([_vector.x - 0.01, _vector.y - 0.01, _vector.z - 0.01]);\n                    let bottomRightCorner = new Float32Array([_vector.x + 0.01, _vector.y + 0.01, _vector.z + 0.01]);\n\n                    let renderProgram = new CubeVisualisationProgram(renderer, [], [upperLeftCorner, bottomRightCorner]);\n                    renderer.addProgram(renderProgram);\n                }\n                \n                return false;\n            }\n        }\n        \n        return true;\n    }\n\n    getFrustumPoints(): Vector3[] {\n        if(!this.needsUpdate && this.frustumCorners !== undefined) {\n            return this.frustumCorners;\n        }\n\n        this.frustumCorners = [];\n        const planes = this.planes;\n\n        // Vorderseite\n        this.frustumCorners.push(intersectPlanes(planes[4], planes[0], planes[2])!); // Near-Left-Top\n        this.frustumCorners.push(intersectPlanes(planes[4], planes[1], planes[2])!); // Near-Right-Top\n        this.frustumCorners.push(intersectPlanes(planes[4], planes[0], planes[3])!); // Near-Left-Bottom\n        this.frustumCorners.push(intersectPlanes(planes[4], planes[1], planes[3])!); // Near-Right-Bottom\n\n        // Rckseite (Far)\n        this.frustumCorners.push(intersectPlanes(planes[5], planes[0], planes[2])!); // Far-Left-Top         \n        this.frustumCorners.push(intersectPlanes(planes[5], planes[1], planes[2])!); // Far-Right-Top\n        this.frustumCorners.push(intersectPlanes(planes[5], planes[0], planes[3])!); // Far-Left-Bottom\n        this.frustumCorners.push(intersectPlanes(planes[5], planes[1], planes[3])!); // Far-Right-Bottom\n\n        this.needsUpdate = false;        \n        return this.frustumCorners;\n    }\n    \n    drawFrustum(renderer: WebGLRenderer, visiblePlanes: boolean[] = [true, true, true, true, true, true]) {\n        let points = this.getFrustumPoints();\n        let corners = []\n        for(let i = 0; i < points.length; i++) {\n            corners.push(new Float32Array([points[i].x, points[i].y, points[i].z]))\n        }\n\n        let borderColor = new Float32Array([0.0, 0.0, 0.0, 1.0]);\n        let frustumColor = new Float32Array([1.0, 0.0, 0.0, 0.35]);\n        this.frustumRenderProgram = new CubeVisualisationProgram(renderer, [], corners,frustumColor, borderColor, visiblePlanes);\n        renderer.addProgram(this.frustumRenderProgram);\n    }\n\n    distanceToPoint(point: Vector3): number {\n        let minDistance = Infinity;\n        for (const plane of this.planes) {\n            const distance = plane.distanceToPoint(point);\n            if (distance < minDistance) {\n                minDistance = distance;\n            }\n        }\n        return minDistance;\n    }\n    \n    ereaseFrustum(renderer: WebGLRenderer) {\n        if(this.frustumRenderProgram !== undefined) {\n            renderer.removeProgram(this.frustumRenderProgram);\n        }\n    }\n\n    getRays(): NewRay[] {\n        if (!this.frustumCorners) {\n            this.frustumCorners = this.getFrustumPoints();\n        }\n\n        const rays = [];\n\n        // Calculate rays from near plane corners to far plane corners\n        for (let i = 0; i < 7; i+=2) {\n            const nearCorner = this.frustumCorners[i];\n            const farCorner = this.frustumCorners[i + 1];\n            const direction = farCorner.clone().sub(nearCorner).normalize();\n            rays.push(new NewRay(nearCorner, direction));\n        }\n\n        return rays;\n    }\n    \n    intersectFrustum(otherFrustum: Frustum, renderer: WebGLRenderer | undefined): Box3{\n        const intersectionPoints: Vector3[] = [];\n        \n        intersectionPoints.push(intersectPlanes( this.planes[2], otherFrustum.planes[3], otherFrustum.planes[4])!);\n        intersectionPoints.push(intersectPlanes( this.planes[2], otherFrustum.planes[2], otherFrustum.planes[4])!);\n        intersectionPoints.push(intersectPlanes( this.planes[2], otherFrustum.planes[3], otherFrustum.planes[5])!);\n        intersectionPoints.push(intersectPlanes( this.planes[2], otherFrustum.planes[2], otherFrustum.planes[5])!);\n\n        intersectionPoints.push(intersectPlanes( this.planes[3], otherFrustum.planes[3], otherFrustum.planes[4])!);\n        intersectionPoints.push(intersectPlanes( this.planes[3], otherFrustum.planes[2], otherFrustum.planes[4])!);\n        intersectionPoints.push(intersectPlanes( this.planes[3], otherFrustum.planes[3], otherFrustum.planes[5])!);\n        intersectionPoints.push(intersectPlanes( this.planes[3], otherFrustum.planes[2], otherFrustum.planes[5])!);\n\n        const boundingBox = new Box3(\n            new Vector3(Infinity, Infinity, Infinity),\n            new Vector3(-Infinity, -Infinity, -Infinity),\n        );\n        \n        if(renderer !== undefined) {\n            let a1 = new Float32Array([intersectionPoints[0].x - 0.01, intersectionPoints[0].y - 0.01, intersectionPoints[0].z - 0.01]);\n            let a2 = new Float32Array([intersectionPoints[0].x + 0.01, intersectionPoints[0].y + 0.01, intersectionPoints[0].z + 0.01]);\n\n            let b1 = new Float32Array([intersectionPoints[1].x - 0.01, intersectionPoints[1].y - 0.01, intersectionPoints[1].z - 0.01]);\n            let b2 = new Float32Array([intersectionPoints[1].x + 0.01, intersectionPoints[1].y + 0.01, intersectionPoints[1].z + 0.01]);\n\n            let c1 = new Float32Array([intersectionPoints[2].x - 0.01, intersectionPoints[2].y - 0.01, intersectionPoints[2].z - 0.01]);\n            let c2 = new Float32Array([intersectionPoints[2].x + 0.01, intersectionPoints[2].y + 0.01, intersectionPoints[2].z + 0.01]);\n\n            let d1 = new Float32Array([intersectionPoints[3].x - 0.01, intersectionPoints[3].y - 0.01, intersectionPoints[3].z - 0.01]);\n            let d2 = new Float32Array([intersectionPoints[3].x + 0.01, intersectionPoints[3].y + 0.01, intersectionPoints[3].z + 0.01]);\n\n            let e1 = new Float32Array([intersectionPoints[4].x - 0.01, intersectionPoints[4].y - 0.01, intersectionPoints[4].z - 0.01]);\n            let e2 = new Float32Array([intersectionPoints[4].x + 0.01, intersectionPoints[4].y + 0.01, intersectionPoints[4].z + 0.01]);\n\n            let f1 = new Float32Array([intersectionPoints[5].x - 0.01, intersectionPoints[5].y - 0.01, intersectionPoints[5].z - 0.01]);\n            let f2 = new Float32Array([intersectionPoints[5].x + 0.01, intersectionPoints[5].y + 0.01, intersectionPoints[5].z + 0.01]);\n\n            let g1 = new Float32Array([intersectionPoints[6].x - 0.01, intersectionPoints[6].y - 0.01, intersectionPoints[6].z - 0.01]);\n            let g2 = new Float32Array([intersectionPoints[6].x + 0.01, intersectionPoints[6].y + 0.01, intersectionPoints[6].z + 0.01]);\n\n            let h1 = new Float32Array([intersectionPoints[7].x - 0.01, intersectionPoints[7].y - 0.01, intersectionPoints[7].z - 0.01]);\n            let h2 = new Float32Array([intersectionPoints[7].x + 0.01, intersectionPoints[7].y + 0.01, intersectionPoints[7].z + 0.01]);\n\n            let borderColor = new Float32Array([1.0, 1.0, 1.0, 1.0]);\n            let boxColor = new Float32Array([1.0, 1.0, 1.0, 1.0]);\n\n            let pro = new CubeVisualisationProgram(renderer, [], [a1, a2], boxColor, borderColor);\n            let pro2 = new CubeVisualisationProgram(renderer, [], [b1, b2], boxColor, borderColor);\n            let pro3 = new CubeVisualisationProgram(renderer, [], [c1, c2], boxColor, borderColor);\n            let pro4 = new CubeVisualisationProgram(renderer, [], [d1, d2], boxColor, borderColor);\n            let pro5 = new CubeVisualisationProgram(renderer, [], [e1, e2], boxColor, borderColor);\n            let pro6 = new CubeVisualisationProgram(renderer, [], [f1, f2], boxColor, borderColor);\n            let pro7 = new CubeVisualisationProgram(renderer, [], [g1, g2], boxColor, borderColor);\n            let pro8 = new CubeVisualisationProgram(renderer, [], [h1, h2], boxColor, borderColor);\n            renderer.addProgram(pro);\n            renderer.addProgram(pro2);\n            renderer.addProgram(pro3);\n            renderer.addProgram(pro4);\n            renderer.addProgram(pro5);\n            renderer.addProgram(pro6);\n            renderer.addProgram(pro7);\n            renderer.addProgram(pro8);   \n        }\n        \n        for (const point of intersectionPoints) {\n            boundingBox.expandByPoint(point);\n        }\n        \n        return boundingBox\n    }\n\n    containsPoint(point: Vector3): boolean {\n        for (const plane of this.planes) {\n            if (plane.distanceToPoint(point) < 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    containsBox(box: Box3): boolean {\n        const corners = box.getCorners();\n\n        for (const corner of corners) {\n            if (!this.containsPoint(corner)) {\n                return false;\n            }\n        }\n        \n        return true;\n    }\n}\n\nexport { Frustum }","import { Matrix4 } from \"../math/Matrix4\";\nimport { NewRay } from \"../math/NewRay\";\nimport { Camera } from \"../cameras/Camera\";\nimport {Vector3} from \"../math/Vector3\";\n\nconst _matrix:Matrix4 = new Matrix4();\n\nclass NewRaycaster {\n    public ray: NewRay;\n    \n    public near: number;\n    public far: number;\n    public camera: Camera | null;\n    \n    public params;\n    \n    constructor(origin: Vector3, direction: Vector3, near: number = 0, far: number = Infinity ) {\n        this.ray = new NewRay( origin, direction );\n        \n        this.near = near;\n        this.far = far;\n        this.camera = null;\n        \n        this.params = {\n            Mesh: {},\n            Line: { threshold: 1 },\n            LOD: {},\n            Points: { threshold: 1 },\n            Sprite: {}\n        };\n    }\n\n    set( origin: Vector3, direction: Vector3 ) {\n        this.ray.set( origin, direction );\n    }\n\n    // intersectObject( object: any, recursive = true, intersects = [] ) {\n    //\n    //     intersect( object, this, intersects, recursive );\n    //\n    //     intersects.sort( ascSort );\n    //\n    //     return intersects;\n    //\n    // }\n    //\n    // intersectObjects( objects: any, recursive = true, intersects = [] ) {\n    //\n    //     for ( let i = 0, l = objects.length; i < l; i ++ ) {\n    //\n    //         intersect( objects[ i ], this, intersects, recursive );\n    //\n    //     }\n    //\n    //     intersects.sort( ascSort );\n    //\n    //     return intersects;\n    //\n    // }\n\n}\n\n// function ascSort( a, b ) {\n//\n//     return a.distance - b.distance;\n//\n// }\n//\n// function intersect( object:any, raycaster:Raycaster, intersects, recursive ) {\n//\n//     if ( object.layers.test( raycaster.layers ) ) {\n//\n//         object.raycast( raycaster, intersects );\n//\n//     }\n//\n//     if ( recursive === true ) {\n//\n//         const children = object.children;\n//\n//         for ( let i = 0, l = children.length; i < l; i ++ ) {\n//\n//             intersect( children[ i ], raycaster, intersects, true );\n//\n//         }\n//\n//     }\n// }\n\nexport { NewRaycaster }"],"names":["Vector3","constructor","x","y","z","this","set","undefined","equals","v","addVectors","a","b","add","addScaledVector","s","subVectors","subtract","sub","multiply","buffer","divide","crossVectors","ax","ay","az","bx","by","bz","cross","distanceToSquared","dx","dy","dz","toArray","dot","lerp","t","min","Math","max","getComponent","axis","Error","minComponent","maxComponent","magnitude","sqrt","distanceTo","normalize","length","lengthSq","flat","clone","clamp","copy","toString","join","One","value","Quaternion","w","q","l","w1","x1","y1","z1","w2","x2","y2","z2","inverse","apply","vecQuat","conjugate","rotatedQuat","FromEuler","e","halfX","halfY","halfZ","cy","cos","sy","sin","cp","sp","cz","sz","toEuler","sinr_cosp","cosr_cosp","atan2","sinp","abs","sign","PI","asin","siny_cosp","cosy_cosp","FromMatrix3","matrix","m","trace","FromAxisAngle","angle","halfAngle","LookRotation","direction","forward","rotAngle","acos","rotAxis","EventDispatcher","listeners","Map","addEventListener","type","listener","has","Set","get","removeEventListener","delete","hasEventListener","dispatchEvent","event","Matrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","i","determinant","invert","det","invDet","Compose","position","rotation","scale","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","ObjectAddedEvent","Event","object","super","ObjectRemovedEvent","ObjectChangedEvent","RenderedSplatsChangedEvent","Object3D","positionChanged","rotationChanged","scaleChanged","_position","_rotation","_scale","_transform","_changeEvent","_renderedSplatsChanged","update","applyPosition","applyRotation","applyScale","raiseChangeEvent","_updateMatrix","transform","Matrix3","Eye","Diagonal","RotationFromQuaternion","RotationFromEuler","cx","SplatData","vertexCount","positions","rotations","scales","colors","firstTime","changed","detached","_vertexCount","_positions","Float32Array","_renderedPositions","_rotations","_renderedRotations","_scales","_renderedScales","_colors","Uint8Array","_renderedColors","_selection","_renderedSelection","_rendered","fill","_renderedSplats","resetRendering","calculateRenderedSplats","reduce","count","translate","translation","rotate","R","currentRotation","newRot","serialize","data","RowLength","f_buffer","u_buffer","reattach","selection","rendered","receivedSplats","console","assert","byteLength","newIndex","Deserialize","renderedSplats","renderedPositions","renderedRotations","renderedScales","renderedColors","renderedSelection","calculateRenderedTransforms","tempIndex","forEach","isRendered","positionScaleIndex","rotationColorIndex","SplatvData","width","height","_data","_width","_height","Uint32Array","floor","Converter","SplatToPLY","header","properties","push","property","headerBuffer","TextEncoder","encode","plyRowLength","plyLength","output","DataView","ArrayBuffer","offset","scale_offset","opacity_offset","rot_offset","pos0","pos1","pos2","f_dc_0","SH_C0","f_dc_1","f_dc_2","alpha","opacity","log","scale0","scale1","scale2","rot0","rot1","rot2","rot3","setFloat32","f_dc_offset","ShaderProgram","renderer","passes","_scene","_camera","_started","_initialized","_renderer","gl","_program","createProgram","_passes","vertexShader","createShader","VERTEX_SHADER","shaderSource","_getVertexSource","compileShader","getShaderParameter","COMPILE_STATUS","error","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","_getFragmentSource","attachShader","program","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","resize","useProgram","_resize","initialize","_initialize","pass","render","scene","camera","dispose","_render","_dispose","started","CubeVisualisationProgram","points","color","borderColor","drawPlanes","vertexBuffer","positionAttribute","u_projection","u_view","u_color","corners","surface","numberOfVisiblePlanes","x3","y3","z3","x4","y4","z4","x5","y5","z5","x6","y6","z6","x7","y7","z7","x8","y8","z8","surfaceData","colorLines","createBuffer","getAttribLocation","enableVertexAttribArray","getUniformLocation","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","uniformMatrix4fv","projectionMatrix","viewMatrix","vertices","lineWidth","uniform4fv","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","drawArrays","LINES","drawCubeLines","TRIANGLES","drawCube","Vector4","Box3","contains","point","intersects","box","intersectsBox","intersectsBasedOnCenter","centerA","center","centerB","sizeA","size","sizeB","expand","permute","surfaceArea","depth","drawBox","cornerColor","boxColor","lineColor","boxMin","boxMax","boxRenderProgram","addProgram","ereaseBox","removeProgram","expandByPoint","getCorners","SingleSplat","index","_index","_bounds","Infinity","_defaultColor","subarray","recalculateBounds","pos","Position","scl","Scale","rot","Rotation","Selected","Rendered","Color","colorVector","colorIndex","ResetColor","bounds","PositionVec3","ScaleVec3","setTransparency","setBlending","Constants","BYTE_OFFSET_FLOAT","BYTE_OFFSET_DOUBLE","BYTE_OFFSET_INT","OctreeIterator","root","region","reset","indices","result","done","next","octant","children","child","pop","Symbol","iterator","_vector","NewRay","origin","ray","at","target","intersectPlane","plane","distanceToPlane","denominator","normal","distanceToPoint","constant","lookAt","recast","closestPointToPoint","directionDistance","distanceSqToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","isNaN","Constructor","d","r","flags","octantTable","findNextOctant","currentOctant","tx1","ty1","tz1","exit","raycastOctant","node","tx0","ty0","tz0","c","txm","tym","tzm","f","entry","findEntryOctant","OctreeRaycaster","intersectOctree","octree","dimensions","getDimensions","halfDimensions","getCenter","Number","EPSILON","invDirX","invDirY","invDirZ","getDepth","cull","findNodesByLevel","level","Octree","getIntersectingNodes","raycaster","leaves","layout","Octant","split","mid","combination","PointContainer","distance","RayPointIntersection","distanceToOrigin","distanceToRay","PointData","testPoints","threshold","params","Points","thresholdSq","distanceToRaySq","closestPoint","near","far","p","PointOctant","distanceToCenterSquared","bias","redistribute","pointData","il","j","jl","childData","merge","concat","countPoints","exists","getBias","getMaxPoints","getMaxDepth","remove","parent","last","move","findNearestPoint","maxDistance","skipSelf","bestDistance","sortedChildren","map","sort","intermediateResult","findPoints","radius","rSq","dSq","PointOctree","maxPoints","maxDepth","round","POSITIVE_INFINITY","raycast","octants","Splat","splat","selectedChanged","renderNumberChanged","colorTransformChanged","_splats","_selected","_colorTransforms","_colorTransformsMap","_numberOfSplats","_numberOfRenderedSplats","selected","Array","applySelection","applyRendering","createSplatsData","createOctree","time","singleSplat","Promise","resolve","timeEnd","_octree","positionVector","saveToFile","name","format","document","now","Date","getFullYear","getMonth","getDate","blob","plyData","Blob","link","createElement","download","href","URL","createObjectURL","click","splats","getSplatAtIndex","selectSplat","renderSplat","updateRenderingOfSplats","colorTransforms","colorTransformsMap","splatCount","numberOfRenderedSplats","Positions","Scales","Rotations","Colors","Selections","Splatv","CameraData","_fx","_fy","_near","_far","_projectionMatrix","_viewMatrix","_viewProj","_updateProjectionMatrix","fx","fy","setSize","viewProj","inverseViewMatrix","Camera","worldToScreenPoint","worldPoint","worldSpaceCoords","cameraSpaceCoors","clipSpaceCoords","worldToCameraPoint","cameraSpaceCoords","cameraCoords","screenToWorldPoint","inverseProjectionMatrix","screenPointToRay","Scene","_objects","addObject","objects","removeObject","indexOf","splice","findObject","predicate","findObjectOfType","objectsToRemove","slice","buffers","async","initiateFetchRequest","url","useCache","req","fetch","mode","credentials","cache","status","loadRequestDataIntoBuffer","res","onProgress","headers","reader","body","getReader","contentLength","parseInt","bytesRead","read","loadDataIntoBuffer","chunks","receivedLength","chunk","loadChunkedDataIntoBuffer","Loader","LoadAsync","LoadFromArrayBuffer","LoadFromFileAsync","file","FileReader","onload","onprogress","loaded","total","readAsArrayBuffer","onloadend","arrayBuffer","PLYLoader","_ParsePLYBuffer","inputBuffer","ubuf","headerText","TextDecoder","decode","header_end","header_end_index","exec","rowOffset","offsets","double","int","uint","float","short","ushort","uchar","prop","filter","k","startsWith","_p","dataView","q_polycam","rgba","Uint8ClampedArray","r0","r1","r2","r3","getFloat32","getInt32","exp","temp","SplatvLoader","_ParseSplatvBuffer","splatv","handleChunk","intView","Int32Array","splatChunks","JSON","parse","warn","cameras","cameraData","texwidth","texheight","shift","inputOffset","sizeToRead","loadWasm","moduleArg","readyPromiseResolve","readyPromiseReject","readBinary","Module","readyPromise","reject","moduleOverrides","Object","assign","scriptDirectory","self","location","substr","replace","lastIndexOf","xhr","XMLHttpRequest","open","responseType","send","response","bind","wasmBinary","wasmMemory","err","tryParseAsDataURI","filename","isDataURI","decoded","atob","bytes","charCodeAt","intArrayFromBase64","dataURIPrefix","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAPF32","HEAPF64","ABORT","updateMemoryViews","Int8Array","Int16Array","Uint16Array","Float64Array","wasmBinaryFile","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runDependencies","dependenciesFulfilled","getBinaryPromise","binaryFile","then","binary","getBinarySync","instantiateArrayBuffer","imports","receiver","WebAssembly","instantiate","reason","what","RuntimeError","abort","callRuntimeCallbacks","callbacks","embind_charCodes","BindingError","readLatin1String","ptr","ret","awaitingDependencies","registeredTypes","throwBindingError","message","registerType","rawType","registeredInstance","options","TypeError","hasOwnProperty","ignoreDuplicateRegistrations","cb","sharedRegisterType","emval_freelist","emval_handles","count_emval_handles","Emval","handle","readPointer","pointer","EmValType","fromWireType","rv","__emval_decref","toWireType","destructors","argPackAdvance","readValueFromPointer","destructorFunction","floatReadValueFromPointer","integerReadValueFromPointer","signed","UTF8Decoder","UTF8ToString","maxBytesToRead","heapOrArray","idx","endIdx","endPtr","str","u0","u1","u2","String","fromCharCode","ch","UTF8ArrayToString","UTF16Decoder","UTF16ToString","maxIdx","codeUnit","stringToUTF16","outPtr","maxBytesToWrite","startPtr","numCharsToWrite","lengthBytesUTF16","UTF32ToString","utf32","stringToUTF32","lengthBytesUTF32","len","growMemory","pages","grow","codes","embind_init_charCodes","wasmImports","primitiveType","minRange","maxRange","h","trueValue","falseValue","wt","o","g","bitshift","isUnsignedType","includes","dataTypeIndex","TA","decodeMemoryView","stdStringIsUTF8","payload","decodeStartPtr","currentBytePtr","stringSegment","_free","valueIsOfTypeString","lengthBytesUTF8","base","_malloc","heap","outIdx","u","startIdx","stringToUTF8Array","charCode","charSize","decodeString","encodeString","readCharAt","lengthBytesUTF","isVoid","requestedSize","oldSize","maxHeapSize","multiple","cutDown","overGrownHeapSize","newSize","wasmExports","callback","info","receiveInstance","instance","module","exports","unshift","id","removeRunDependency","catch","createWasm","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a10","a11","calledRun","run","doRun","postRun","preRun","setTimeout","runCaller","RenderData","dataChanged","transformsChanged","colorTransformsChanged","_updating","_dirty","splatIndex","_splatIndices","_singleSplatIndices","_offsets","_singleOffsets","lookup","singlelookup","ceil","_transformsWidth","_transformsHeight","_transforms","_transformIndicesWidth","_transformIndicesHeight","_transformIndices","_colorTransformsWidth","_colorTransformsHeight","_colorTransformIndicesWidth","_colorTransformIndicesHeight","_colorTransformIndices","colorTransformIndices","_worker","DataWorker","updateRenderData","updateTransform","updateColorTransforms","keys","colorTransform","colorTransformIndex","wasmModule","onmessage","renderedFrame","worldPositions","worldRotations","worldScales","initWasm","buildImmediate","waitForWasm","positionsPtr","rotationsPtr","scalesPtr","colorsPtr","selectionPtr","renderedPtr","dataPtr","worldPositionsPtr","worldRotationsPtr","worldScalesPtr","_pack","outData","build","serializedSplat","postMessage","getSplat","key","getLocalIndex","markDirty","rebuild","clear","terminate","singleOffsets","transforms","transformsWidth","transformsHeight","transformIndices","transformIndicesWidth","transformIndicesHeight","colorTransformsWidth","colorTransformsHeight","colorTransformIndicesWidth","colorTransformIndicesHeight","needsRebuild","updating","Color32","flatNorm","toHexString","padStart","RenderProgram","_outlineThickness","_outlineColor","_renderData","_depthIndex","_splatTexture","canvas","u_viewport","u_focal","u_texture","u_transforms","u_transformIndices","u_colorTransforms","u_colorTransformIndices","u_outlineThickness","u_outlineColor","indexAttribute","transformsTexture","transformIndicesTexture","colorTransformsTexture","colorTransformIndicesTexture","indexBuffer","uniform2fv","createWorker","SortWorker","depthIndex","handleObjectAdded","handleObjectRemoved","handleObjectChanged","handleRenderedSplatsChanged","uniform1f","outlineThickness","outlineColor","createTexture","uniform1i","resetSplatData","_a","_b","renderData","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","splatTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA32UI","RGBA_INTEGER","UNSIGNED_INT","TEXTURE1","RGBA32F","RGBA","TEXTURE2","R32UI","RED_INTEGER","TEXTURE3","TEXTURE4","detachedPositions","detachedTransforms","detachedTransformIndices","sortData","viewport","clearColor","COLOR_BUFFER_BIT","disable","DEPTH_TEST","blendFuncSeparate","ONE_MINUS_DST_ALPHA","ONE","blendEquationSeparate","FUNC_ADD","vertexAttribIPointer","INT","vertexAttribDivisor","drawArraysInstanced","TRIANGLE_FAN","deleteTexture","deleteBuffer","_setOutlineThickness","_setOutlineColor","worker","FadeInPass","speed","renderProgram","u_useDepthFade","u_depthFade","active","WebGLRenderer","optionalCanvas","optionalRenderPasses","_backgroundColor","style","display","boxSizing","margin","padding","appendChild","background","_canvas","_gl","getContext","antialias","renderPasses","_renderProgram","_customPrograms","programs","clientWidth","clientHeight","removeAllPrograms","backgroundColor","OrbitControls","beta","enableKeyboardControls","inputTarget","enabled","minAngle","maxAngle","minZoom","maxZoom","orbitSpeed","panSpeed","zoomSpeed","dampening","setCameraTarget","desiredTarget","desiredAlpha","desiredBeta","desiredRadius","dragging","panning","lastDist","lastX","lastY","isUpdatingCamera","eulerRotation","newTarget","computeZoomNorm","onKeyDown","code","onKeyUp","onMouseDown","preventDefault","button","clientX","clientY","window","onMouseUp","onMouseMove","zoomNorm","panX","panY","right","up","onWheel","deltaY","onTouchStart","touches","distX","distY","onTouchEnd","onTouchMove","dist","touchX","touchY","rx","ry","moveSpeed","rotateSpeed","stopPropagation","FPSControls","lookSpeed","pitch","yaw","targetPosition","pointerLock","requestPointerLock","onPointerLockChange","pointerLockElement","mouseX","movementX","mouseY","movementY","exitPointerLock","Plane","setFromCoplanarPoints","v1","v2","setComponents","intersect","inverseNormalLength","ShaderPass","VideoRenderProgram","u_time","setupWorker","dummyTransforms","dummyTransformIndices","BVHNode$1","BVHNode","boxes","pointIndices","left","leftIndices","rightIndices","queryRange","range","BVH","_","IntersectionTester","resolution","bvh","singleSplatLookup","testLayer","positiveDirection","splatBounds","testPoint","startTimeSplat","performance","duration","startTimeSingleSplat","singleSplatBoxes","singleSplatbounds","durationSingleSplat","minPoint","maxPoint","queryBox","testPointSingleSplats","obj","Ray","getPoint","CameraHelper","_cameraData","_frustumCorners","calculateFrustum","fovX","fovY","halfHeightNear","tan","halfWidthNear","halfHeightFar","halfWidthFar","nearTopLeft","nearTopRight","nearBottomLeft","nearBottomRight","farTopLeft","farTopRight","farBottomLeft","farBottomRight","cameraToWorldCoords","pointInFrustum","planes","createPlane","ab","ac","FrustumPlane","Utils","draw","upperLeftCorner","bottomRightCorner","drawCone","vecs","Raycaster","buildBVH","testBox","point1","point2","testCameraViewFrustum","showFrustum","showForSeconds","camHelper","AxisProgram","xVertices","yVertices","zVertices","xColor","yColor","zColor","drawAxis","GridProgram","PlaneProgram","planeColor","drawPlane","getPlaneVertices","halfSize","MultibleCubesProgram","upperLeftCorners","bottomRightCorners","tempAllCorners","tempAllSurface","numberOfCubes","allCorners","allsurface","RayProgram","OctreeHelper","intersectPlanes","p1","p2","p3","n1","n2","n3","c1","c2","c3","n2n3","n3n1","n1n2","Frustum","p0","p4","p5","needsUpdate","setFromCube","cube","projectedPoints","setFromPoints","setFromProjectionMatrix","me","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","planeRenderProgram","getFrustumPoints","frustumCorners","drawFrustum","visiblePlanes","frustumColor","frustumRenderProgram","minDistance","ereaseFrustum","getRays","rays","nearCorner","intersectFrustum","otherFrustum","intersectionPoints","boundingBox","b1","b2","d1","d2","e1","e2","f1","f2","g1","g2","h1","h2","pro","pro2","pro3","pro4","pro5","pro6","pro7","pro8","containsPoint","containsBox","corner","NewRaycaster","Mesh","Line","LOD","Sprite"],"mappings":"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EAAE,IAAMA,EAAE,GAAKA,EAAE,KAEtIuE,IACKvE,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,KAEvIuE,GACIvE,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAEnIuE,IACKvE,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAElIuE,IACKvE,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,KAEvIuE,GACIvE,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,GAAKA,EAAE,KAEtIuE,IACKvE,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EA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"}